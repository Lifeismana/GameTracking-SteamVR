package perfetto.protos;

message ChromeFrameReporter {
	enum State {
		STATE_NO_UPDATE_DESIRED = 0;
		STATE_PRESENTED_ALL = 1;
		STATE_PRESENTED_PARTIAL = 2;
		STATE_DROPPED = 3;
	}

	enum FrameDropReason {
		REASON_UNSPECIFIED = 0;
		REASON_DISPLAY_COMPOSITOR = 1;
		REASON_MAIN_THREAD = 2;
		REASON_CLIENT_COMPOSITOR = 3;
	}

	enum ScrollState {
		SCROLL_NONE = 0;
		SCROLL_MAIN_THREAD = 1;
		SCROLL_COMPOSITOR_THREAD = 2;
		SCROLL_UNKNOWN = 3;
	}

	enum FrameType {
		FORKED = 0;
		BACKFILL = 1;
	}

	optional .perfetto.protos.ChromeFrameReporter.State state = 1 [default = STATE_NO_UPDATE_DESIRED, json_name = "state"];
	optional .perfetto.protos.ChromeFrameReporter.FrameDropReason reason = 2 [default = REASON_UNSPECIFIED, json_name = "reason"];
	optional uint64 frame_source = 3 [json_name = "frameSource"];
	optional uint64 frame_sequence = 4 [json_name = "frameSequence"];
	optional bool affects_smoothness = 5 [json_name = "affectsSmoothness"];
	optional .perfetto.protos.ChromeFrameReporter.ScrollState scroll_state = 6 [default = SCROLL_NONE, json_name = "scrollState"];
	optional bool has_main_animation = 7 [json_name = "hasMainAnimation"];
	optional bool has_compositor_animation = 8 [json_name = "hasCompositorAnimation"];
	optional bool has_smooth_input_main = 9 [json_name = "hasSmoothInputMain"];
	optional bool has_missing_content = 10 [json_name = "hasMissingContent"];
	optional uint64 layer_tree_host_id = 11 [json_name = "layerTreeHostId"];
	optional bool has_high_latency = 12 [json_name = "hasHighLatency"];
	optional .perfetto.protos.ChromeFrameReporter.FrameType frame_type = 13 [default = FORKED, json_name = "frameType"];
	repeated string high_latency_contribution_stage = 14 [json_name = "highLatencyContributionStage"];
}
