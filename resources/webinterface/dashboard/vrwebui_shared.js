/*! For license information please see vrwebui_shared.js.LICENSE.txt */
"use strict";(self.webpackChunkvrwebui=self.webpackChunkvrwebui||[]).push([[683],{9942:(e,t,n)=>{n.d(t,{_:()=>he});var i=n(655),o=n(7294),s=n(7062),r=n(6321),a=n(3868),l=n(3446),c=n(8052),d=n(7056),p=n(8325);let u=class extends c.d9{constructor(e){super(e),this.m_audioDeviceChangedEventHandle=null,this.state=this.defaultState}get defaultState(){return{}}componentDidMount(){this.m_audioDeviceChangedEventHandle=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRAudioDevices.RegisterForDeviceChangedEvents(this.onAudioDeviceChanged)}onAudioDeviceChanged(){}getHmdAudioSettingsKey(e){return"/settings/audio/"+l.G3.audioDevices.hmd_settings_key.replace("{setting}",e)}temporaryDropdownOverride(e,t){e.indexOf("Mirror")>=0?l.G3.audioDevices.selected_mirror_device=t:e.indexOf("playback")>=0?l.G3.audioDevices.selected_playback_device=t:e.indexOf("recording")>=0&&(l.G3.audioDevices.selected_recording_device=t)}setDeviceSetting(e,t,n){n&&(l.G3.SetSettingsValue(e,n.guid),l.G3.SetSettingsValue(t,n.name),this.temporaryDropdownOverride(e,n.guid))}setDeviceOverride(e,t){this.setDeviceSetting(this.getHmdAudioSettingsKey(e),this.getHmdAudioSettingsKey(e+"Name"),t)}getAudioDevice(e){return e?l.G3.audioDevices.playback_devices.concat(l.G3.audioDevices.record_devices).find((t=>t.guid==e)):{guid:"",name:""}}onOverrideDeviceDropdownChanged(e,t){this.setDeviceOverride(e,this.getAudioDevice(t))}onMirrorDeviceDropdownChanged(e){this.setDeviceSetting("/settings/audio/playbackMirrorDevice","/settings/audio/playbackMirrorDeviceName",this.getAudioDevice(e))}makeDeviceChoiceList(e){let t=[];t.push({value:"",sLabel:(0,a.Xx)("#Settings_Audio_Default")}),t.push(p.Kr.Separator);for(let n of e)t.push({value:n.guid,sLabel:n.name});return t}render(){var e,t;if(!this.props.active)return null;if(void 0===l.G3.audioDevices)return null;let n=null!==(e=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRProperties.GetBoolProperty("/user/head",r.Uk.Audio_SupportsDualSpeakerAndJackOutput_Bool))&&void 0!==e&&e,i=null!==(t=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRProperties.GetBoolProperty("/user/head",r.Uk.Hmd_SupportsMicMonitoring_Bool))&&void 0!==t&&t,s=!1;try{s="htc"==l.G3.settings.get("/settings/LastKnown/HMDManufacturer").toLowerCase()&&l.G3.settings.get("/settings/LastKnown/HMDModel").toLowerCase().indexOf("vive")>=0}catch(e){}return o.createElement(o.Fragment,null,o.createElement(c.wy,{name:this.getHmdAudioSettingsKey("enablePlaybackDeviceOverride"),label:(0,a.Xx)("#Settings_Audio_Playback_Automatic_Label"),offLabel:(0,a.Xx)("#Settings_Audio_Headset"),onLabel:(0,a.Xx)("#Settings_Audio_Manual"),onSubsection:o.createElement(c.Xp,{items:this.makeDeviceChoiceList(l.G3.audioDevices.playback_devices),value:l.G3.audioDevices.selected_playback_device,onChange:this.onOverrideDeviceDropdownChanged.bind(this,"playbackDeviceOverride"),defaultLabel:(0,a.Xx)("#Settings_Audio_Current_Setting_Unknown")})}),o.createElement(c.wy,{name:this.getHmdAudioSettingsKey("enableRecordingDeviceOverride"),label:(0,a.Xx)("#Settings_Audio_Recording_Automatic_Label"),offLabel:(0,a.Xx)("#Settings_Audio_Headset"),onLabel:(0,a.Xx)("#Settings_Audio_Manual"),onSubsection:o.createElement(c.Xp,{items:this.makeDeviceChoiceList(l.G3.audioDevices.record_devices),value:l.G3.audioDevices.selected_recording_device,onChange:this.onOverrideDeviceDropdownChanged.bind(this,"recordingDeviceOverride"),defaultLabel:(0,a.Xx)("#Settings_Audio_Current_Setting_Unknown")})}),o.createElement(c.wy,{name:"/settings/audio/enablePlaybackMirror",label:(0,a.Xx)("#Settings_Audio_Mirroring_Label"),onSubsection:o.createElement(o.Fragment,null,o.createElement(c.Xp,{items:this.makeDeviceChoiceList(l.G3.audioDevices.playback_devices),value:l.G3.audioDevices.selected_mirror_device,onChange:this.onMirrorDeviceDropdownChanged,defaultLabel:(0,a.Xx)("#Settings_Audio_Current_Setting_Unknown")}),o.createElement(c.wy,{name:"/settings/audio/enablePlaybackMirrorIndependentVolume",label:(0,a.Xx)("#Settings_Audio_Mirroring_Independent_Volume_Label"),visibility:c.VK.Advanced}))}),s&&o.createElement(c.wy,{name:"/settings/audio/viveHDMIGain",label:(0,a.Xx)("#Settings_Audio_HDMIGain")}),n&&o.createElement(c.wy,{name:"/settings/audio/dualSpeakerAndJackOutput",label:(0,a.Xx)("#Settings_Audio_SpeakerJackOutput"),offLabel:(0,a.Xx)("#Settings_Audio_Single"),onLabel:(0,a.Xx)("#Settings_Audio_Dual"),title:(0,a.Xx)("#Settings_Audio_SpeakerJackOutput_Title")}),i&&o.createElement(c.wy,{name:"/settings/audio/muteMicMonitor",label:(0,a.Xx)("#Settings_Audio_MicMonitor"),offLabel:(0,a.Xx)("#Settings_Audio_Active"),onLabel:(0,a.Xx)("#Settings_Audio_Muted")}))}};u.Name="audio_settings",(0,i.gn)([d.ak],u.prototype,"onAudioDeviceChanged",null),(0,i.gn)([d.ak],u.prototype,"onOverrideDeviceDropdownChanged",null),(0,i.gn)([d.ak],u.prototype,"onMirrorDeviceDropdownChanged",null),u=(0,i.gn)([s.Pi],u);var h,m,g,S=n(505),_=n(1818),v=n(197),f=n(2188),y=n(1219);!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.EDGE_A=1]="EDGE_A",e[e.EDGE_B=2]="EDGE_B",e[e.VIDEO_TRANSLUCENT=3]="VIDEO_TRANSLUCENT",e[e.VIDEO_OPAQUE=4]="VIDEO_OPAQUE",e[e.COUNT=5]="COUNT"}(h||(h={})),function(e){e[e.Evaluating=0]="Evaluating",e[e.Success=1]="Success",e[e.Failure=2]="Failure"}(m||(m={}));class b extends o.Component{constructor(e){super(e),this.m_imageRef=o.createRef(),this.m_cameraFrameCount=0,this.state=b.DefaultState}static get DefaultState(){return{bShowTest:!1,streamingProgress:m.Evaluating,trackingProgress:m.Evaluating}}componentWillUnmount(){this.stopTest()}updateStatus(){let e=Date.now()-this.m_startTestTime;this.state.streamingProgress==m.Evaluating&&(this.m_cameraFrameCount>0?this.setState({streamingProgress:m.Success}):e>5e3&&this.setState({streamingProgress:m.Failure}));let t=VRHTML.GetPose(r.wU,r.zq.Standing);this.m_cameraFrameCount>0&&(t.bPoseIsValid||this.setState({trackingProgress:m.Failure}),Date.now()-this.m_firstFrameTime>2e3&&this.state.trackingProgress==m.Evaluating&&this.setState({trackingProgress:m.Success}))}onUpdateCameraFrame(){let e="";try{e=VRHTML.VRTrackedCameraInternal.GetCameraTestFrame(),0==this.m_cameraFrameCount&&(this.m_firstFrameTime=Date.now()),this.m_cameraFrameCount++}catch(e){}this.m_imageRef.current&&(this.m_imageRef.current.src=e),this.updateStatus()}startTest(){this.setState({bShowTest:!0}),VRHTML.VRTrackedCameraInternal.StartCameraTest(),this.m_startTestTime=Date.now(),this.m_cameraFrameCount=0,this.m_imageRef.current&&(this.m_imageRef.current.src=""),this.m_updateInterval=window.setInterval(this.onUpdateCameraFrame,100),this.onUpdateCameraFrame()}stopTest(){this.setState(b.DefaultState),VRHTML.VRTrackedCameraInternal.StopCameraTest(),window.clearInterval(this.m_updateInterval),this.m_updateInterval=void 0}renderStatusLine(){return this.state.streamingProgress==m.Evaluating?o.createElement("h1",{className:"CameraStatus Evaluating"},(0,a.Xx)("#CameraTest_CheckingCamera")):this.state.streamingProgress==m.Failure?o.createElement("h1",{className:"CameraStatus Failure"},(0,a.Xx)("#CameraTest_CameraFailed")):this.state.trackingProgress==m.Evaluating?o.createElement("h1",{className:"CameraStatus Evaluating"},(0,a.Xx)("#CameraTest_CheckingTracking")):this.state.trackingProgress==m.Failure?o.createElement("h1",{className:"CameraStatus Failure"},(0,a.Xx)("#CameraTest_TrackingFailed")):o.createElement("h1",{className:"CameraStatus Success"},(0,a.Xx)("#CameraTest_Success"))}render(){return o.createElement(o.Fragment,null,o.createElement("div",{className:"SettingsItem CameraTestSettingsItem"},o.createElement("div",{className:"Label"},(0,a.Xx)("#Settings_CameraTest")),o.createElement(_.z,{className:"ButtonControl",onClick:this.startTest},(0,a.Xx)("#Settings_StartCameraTest"))),this.state.bShowTest&&o.createElement(c.TB,{className:"CameraTest",header:this.renderStatusLine(),onDismissRequested:this.stopTest},o.createElement("img",{ref:this.m_imageRef})))}}(0,i.gn)([d.ak],b.prototype,"onUpdateCameraFrame",null),(0,i.gn)([d.ak],b.prototype,"startTest",null),(0,i.gn)([d.ak],b.prototype,"stopTest",null),function(e){e[e.Off=0]="Off",e[e.On2D=1]="On2D",e[e.On3D=2]="On3D"}(g||(g={}));const A=(0,s.Pi)((()=>{var e;const t=null!==(e=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRProperties.GetBoolProperty("/user/head",r.Uk.SupportsRoomViewDepthProjection_Bool))&&void 0!==e&&e;let n=l.G3.settings.get(v.k_),i=[{value:g.Off,sLabel:(0,a.Xx)("#Settings_ToggleButton_Off")}];return t||n==g.On3D?(i.push({value:g.On2D,sLabel:(0,a.Xx)("#Settings_2D")}),i.push({value:g.On3D,sLabel:(0,a.Xx)("#Settings_3D")})):i.push({value:g.On2D,sLabel:(0,a.Xx)("#Settings_ToggleButton_On")}),o.createElement(c.D3,{label:(0,a.Xx)("#Settings_Camera_AllowCameraForRoomView"),title:(0,a.Xx)("#Settings_Camera_AllowCameraForRoomView_Desc"),items:i,value:n,onChange:e=>{l.G3.SetSettingsValue(v.k_,e)}})}));let C=class extends c.d9{constructor(e){super(e),this.state={cameraRateValue:this.fetchCameraRate(),showCameraTest:!1}}cameraEnabled(){return l.G3.settings.get(v.Av)}get cameraSupportsRates(){var e;return null!==(e=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRProperties.GetBoolProperty("/user/head",r.Uk.CameraSupportsCompatibilityModes_Bool))&&void 0!==e&&e}fetchCameraRate(){var e;return this.cameraSupportsRates?function(e){switch(e){case r.lx.ISO_30FPS:return 30;case r.lx.ISO_35FPS:return 35;case r.lx.ISO_40FPS:return 40;case r.lx.ISO_46FPS:return 45;case r.lx.ISO_50FPS:return 50;case r.lx.BULK_8K_DMA:return 55;default:case r.lx.BULK_DEFAULT:return 60}}(null!==(e=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRProperties.GetInt32Property("/user/head",r.Uk.CameraCompatibilityMode_Int32))&&void 0!==e?e:r.lx.BULK_DEFAULT):0}setCameraRate(e){let t=function(e){switch(e){case 30:return r.lx.ISO_30FPS;case 35:return r.lx.ISO_35FPS;case 40:return r.lx.ISO_40FPS;case 45:return r.lx.ISO_46FPS;case 50:return r.lx.ISO_50FPS;case 55:return r.lx.BULK_8K_DMA;default:return r.lx.BULK_DEFAULT}}(e);VRHTML.VRTrackedCameraInternal.SetCameraCompatibilityMode(t)&&l.G3.SetRestartRequired()}onCameraEnabled(e){l.G3.SetSettingsValue("/settings/camera/enableCamera",e),this.forceUpdate(),e||this.onStopCameraTest()}onCameraRateChanged(e,t){this.setState({cameraRateValue:t}),this.setCameraRate(t)}onStartCameraTest(){this.setState({showCameraTest:!0})}onStopCameraTest(){this.setState({showCameraTest:!1})}get currentRoomViewStyle(){let e=l.G3.settings.get(v.oh);return e==h.DEFAULT&&(e=h.EDGE_B),e}renderEnabledSettings(){var e;let t=!1,n=!1;switch(this.currentRoomViewStyle){case h.EDGE_A:n=!0,t=!0;break;case h.EDGE_B:t=!0}const i=this.state.cameraRateValue>0,s=l.G3.settings.get(v.k_),d=l.G3.settings.get("/settings/camera/enableCameraForCollisionBounds")||s!=g.Off;let p=[{value:h.EDGE_A,sLabel:(0,a.Xx)("#Settings_Camera_RoomViewStyle_EdgeA")},{value:h.EDGE_B,sLabel:(0,a.Xx)("#Settings_Camera_RoomViewStyle_EdgeB")},{value:h.VIDEO_TRANSLUCENT,sLabel:(0,a.Xx)("#Settings_Camera_RoomViewStyle_VideoTranslucent")},{value:h.VIDEO_OPAQUE,sLabel:(0,a.Xx)("#Settings_Camera_RoomViewStyle_VideoOpaque")}];const u=null!==(e=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRProperties.GetBoolProperty("/user/head",r.Uk.SupportsRoomViewDepthProjection_Bool))&&void 0!==e&&e;return o.createElement(o.Fragment,null,o.createElement(A,null),u&&s==g.On3D&&o.createElement("div",{className:"SettingsItemValueLabel"},(0,a.Xx)("#Settings_Camera_RoomView3D_Experimental")),!u&&s==g.On3D&&o.createElement("div",{className:"SettingsItemValueLabel"},(0,a.Xx)("#Settings_Camera_RoomView3D_Unsupported")),i&&o.createElement(c.U4,{label:(0,a.Xx)("#Settings_Camera_Rate_Hz"),title:(0,a.Xx)("#Settings_Camera_CompatibilityExplanation"),min:30,max:60,step:5,value:this.state.cameraRateValue,onChange:this.onCameraRateChanged.bind(this,"click_activate_threshold"),valueStyleVariant:y.px.OnHandle,renderValue:e=>this.state.cameraRateValue.toString()}),d&&o.createElement(c.Xp,{value:this.currentRoomViewStyle,onChange:e=>l.G3.SetSettingsValue(v.oh,e),label:(0,a.Xx)("#Settings_Camera_RoomViewStyle"),items:p,subsection:(n||t)&&o.createElement(o.Fragment,null,t&&o.createElement(c.vE,{nameR:"/settings/camera/cameraBoundsColorGammaR",nameG:"/settings/camera/cameraBoundsColorGammaG",nameB:"/settings/camera/cameraBoundsColorGammaB",label:(0,a.Xx)("#Settings_Chaperone_BoundsColor")}),n&&o.createElement(c.hR,{name:"/settings/camera/cameraBoundsColorGammaA",min:76.5,max:255,label:(0,a.Xx)("#Settings_Chaperone_BoundsTransparency"),color:{r:l.G3.settings.get("/settings/camera/cameraBoundsColorGammaR"),g:l.G3.settings.get("/settings/camera/cameraBoundsColorGammaG"),b:l.G3.settings.get("/settings/camera/cameraBoundsColorGammaB")}}))}),o.createElement(c.wy,{name:"/settings/camera/showOnController",label:(0,a.Xx)("#Settings_Camera_ShowOnController"),title:(0,a.Xx)("#Settings_Camera_ShowOnController_Desc")}),o.createElement(c.wy,{name:"/settings/camera/enableCameraForCollisionBounds",label:(0,a.Xx)("#Settings_Camera_AllowCameraForChaperoneBounds"),title:(0,a.Xx)("#Settings_Camera_AllowCameraForChaperoneBounds_Desc")}),o.createElement("hr",null))}render(){return this.props.active?o.createElement(o.Fragment,null,this.cameraEnabled()&&this.renderEnabledSettings(),this.cameraEnabled()&&this.GetComponentsForGroup("dev"),o.createElement(c.wy,{label:(0,a.Xx)("#Settings_Camera_EnableCamera"),value:this.cameraEnabled(),requiresRestart:!0,onChange:this.onCameraEnabled,offLabel:(0,a.Xx)("#Settings_ToggleButton_Disable"),onLabel:(0,a.Xx)("#Settings_ToggleButton_Enable")}),this.cameraEnabled()&&o.createElement(b,null),this.makeResetToDefaultButton()):null}};C.Name="camera_settings",(0,i.gn)([d.ak],C.prototype,"onCameraEnabled",null),(0,i.gn)([d.ak],C.prototype,"onCameraRateChanged",null),(0,i.gn)([d.ak],C.prototype,"onStartCameraTest",null),(0,i.gn)([d.ak],C.prototype,"onStopCameraTest",null),(0,i.gn)([f.Fl],C.prototype,"currentRoomViewStyle",null),C=(0,i.gn)([s.Pi],C);var w=n(8546);let k=class extends c.d9{constructor(e){super(e)}render(){return this.props.active?o.createElement(o.Fragment,null,o.createElement(S.DX,null),o.createElement(S.nb,null),o.createElement(S.RR,null),o.createElement(S.TO,null),o.createElement(S.Dc,null),o.createElement(c.Xp,{name:v.o1,label:(0,a.Xx)("#Settings_Dashboard_Position"),items:[{value:w._.Near,sLabel:(0,a.Xx)("#Settings_Near")},{value:w._.Middle,sLabel:(0,a.Xx)("#Settings_Middle")},{value:w._.Far,sLabel:(0,a.Xx)("#Settings_Far")}]}),o.createElement(c.wy,{name:"/settings/notifications/DoNotDisturb",label:(0,a.Xx)("#Settings_General_Notifications_Label"),title:(0,a.Xx)("#Settings_General_Notifications_Text"),swapOnOff:!0}),o.createElement(c.wy,{name:"/settings/userinterface/StatusAlwaysOnTop",label:(0,a.Xx)("#Settings_StatusWindowAlwaysOnTop_Text"),visibility:c.VK.Desktop}),o.createElement(c.wy,{name:"/settings/steamvr/allowDisplayLockedMode",label:(0,a.Xx)("#Settings_PauseOnLocked"),swapOnOff:!0,visibility:c.VK.Advanced}),o.createElement(c.wy,{name:"/settings/steamvr/enableHomeApp",label:(0,a.Xx)("#Settings_HomeAppCheck"),title:(0,a.Xx)("#Settings_HomeAppDesc"),visibility:c.VK.Advanced})):null}};k.Name="general_settings",k=(0,i.gn)([s.Pi],k);var M,R=n(3371),T=n(9669),P=n.n(T);!function(e){e.Unknown="unknown",e.CheckingForUpdate="checking",e.Error="error",e.InProgress="update_in_progress",e.Succeeded="update_succeeded",e.Failed="update_failed",e.Reboot="reboot",e.NoServer="noserver",e.Available="update",e.Reinstall="reinstall"}(M||(M={}));class E extends o.Component{constructor(e){super(e),this.updateTimer=-1,this.state={state:M.Unknown}}componentDidMount(){this.RequestChannels()}cancelUpdateTimer(){-1!=this.updateTimer&&(window.clearInterval(this.updateTimer),this.updateTimer=-1)}componentWillUnmount(){this.cancelUpdateTimer()}RequestChannels(){return(0,i.mG)(this,void 0,void 0,(function*(){try{console.log("requesting channels");let e=(yield P().get("/linux_update/get_channels.json")).data;this.setState({channels:e.channels,current_channel:e.current_channel})}catch(e){console.log("failed to get_channels because of exception: "+e),this.setState({state:M.Error,detail:"WebAPI request failed"})}}))}RequestUpdateState(){return(0,i.mG)(this,void 0,void 0,(function*(){try{console.log("requesting update state");let e=(yield P().get("/linux_update/get_state.json")).data;switch(console.log("get_state response "+JSON.stringify(e)),this.setState({state:e.status,detail:e.detail}),e.status){case M.Error:case M.Failed:case M.Reinstall:case M.Succeeded:case M.Reboot:this.cancelUpdateTimer()}}catch(e){console.log("failed to get update state because of exception: "+e),this.setState({state:M.Error,detail:"WebAPI request failed"}),this.cancelUpdateTimer()}}))}onClickUpdate(){this.setState({state:M.InProgress}),-1==this.updateTimer&&(this.updateTimer=window.setInterval((()=>{this.RequestUpdateState()}),5e3)),console.log("requesting update");try{P().post("/linux_update/update.action")}catch(e){console.log("failed to request update because of exception: "+e),this.setState({state:M.Error,detail:"WebAPI request failed"}),this.cancelUpdateTimer()}}onClickCheckForUpdate(){console.log("check for update"),this.setState({state:M.CheckingForUpdate,detail:""}),this.RequestUpdateState()}onClickReboot(){console.log("requesting reboot");try{P().post("/linux_update/reboot.action")}catch(e){console.log("failed to request reboot because of exception: "+e),this.setState({state:M.Error,detail:"WebAPI request failed"})}}renderStatus(e,t,n){return o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},"Software Updates"),e&&o.createElement(_.z,{className:"ButtonControl",onClick:n,enabled:!!n},e),t&&o.createElement("div",{className:"Label"},t))}renderState(){switch(this.state.state){default:case M.Unknown:return this.renderStatus("Check For Updates","",this.onClickCheckForUpdate);case M.CheckingForUpdate:return this.renderStatus("Checking");case M.InProgress:return this.renderStatus("Installing update...","Installing update... (typical duration 5 min)");case M.Available:return this.renderStatus("Install","Update Available: "+this.state.detail,this.onClickUpdate);case M.Error:return this.renderStatus("Retry Install","Update Error: "+this.state.detail,this.onClickUpdate);case M.Failed:return this.renderStatus("Retry Install","Update Failed:"+this.state.detail,this.onClickUpdate);case M.Reinstall:return this.renderStatus("Reinstall",this.state.detail,this.onClickUpdate);case M.Succeeded:case M.Reboot:return this.renderStatus("Reboot","Update Successful. Reboot to finish Update process",this.onClickReboot)}}onChangeChannel(e){return(0,i.mG)(this,void 0,void 0,(function*(){console.log("setting channel to "+e);try{this.setState({current_channel:e}),yield P().post("/linux_update/set_channel.action",JSON.stringify({sNewChannel:e})),this.RequestUpdateState()}catch(e){console.log("failed to set channel because of exception: "+e)}}))}renderChannelDropdown(){var e;if(!this.state.current_channel||!(null===(e=this.state.channels)||void 0===e?void 0:e.length))return o.createElement("div",{className:"Label"},"Loading...");let t=this.state.channels.map((e=>({value:e,sLabel:e})));return o.createElement(c.Xp,{items:t,value:this.state.current_channel,onChange:this.onChangeChannel,defaultLabel:"Channel"})}renderOSUpdateChannel(){return o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},"OS Update Channel"),this.renderChannelDropdown())}render(){return o.createElement(o.Fragment,null,this.renderState(),this.renderOSUpdateChannel())}}function L(e){return e.replace(/\/+$/,"")}(0,i.gn)([d.ak],E.prototype,"RequestUpdateState",null),(0,i.gn)([d.ak],E.prototype,"onClickUpdate",null),(0,i.gn)([d.ak],E.prototype,"onClickCheckForUpdate",null),(0,i.gn)([d.ak],E.prototype,"onClickReboot",null),(0,i.gn)([d.ak],E.prototype,"onChangeChannel",null);class D extends o.Component{constructor(e){super(e),this.state={currentPath:""}}componentDidMount(){const e=r.ZP.VRPathRegistry.GetRuntimePath();let t=r.ZP.VRPathRegistry.GetInstalledRuntimes();console.log("installedRuntimes: "+JSON.stringify(t)),console.log("currentPath: "+JSON.stringify(e)),this.setState({currentPath:e,installedRuntimes:t})}render(){if(!r.ZP||null==this.state.installedRuntimes)return null;const e=e=>"/usr/local/steamvr"==L(e.toLowerCase()),t=t=>e(t)?"System Default":(e=>"/data/work/steamvr"==L(e.toLowerCase()))(t)?"Custom Build":"Custom: "+t.toLowerCase(),n=this.state.installedRuntimes.filter((e=>e)).map((e=>({value:e,sLabel:t(e)}))),i=e(this.state.currentPath);return o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},"SteamVR Install"),n.length>1&&o.createElement(c.Xp,{defaultLabel:t(this.state.currentPath),items:n,onChange:e=>{r.ZP.VRPathRegistry.SetRuntimePath(e),console.log("SetRuntimePath to "+e),l.G3.SetRestartRequired(),this.setState({currentPath:r.ZP.VRPathRegistry.GetRuntimePath()})}}),1==n.length&&o.createElement("div",{className:"Label"}," ",n[0].sLabel," "),!i&&o.createElement("div",{className:"Label Warning"},"(Does not update with System Update)"))}}let I=class extends c.d9{constructor(e){super(e),this.state={}}GetNetworkInfo(){let e={linksPaired:[],foxnetActive:!1,ethernetActive:!1},t=r.ZP.GetHostInfo(r.zA.NetworkConnections);if(void 0!==t){let n=t.split("\n");for(let t of n){let n=t.split(":");switch(n[1]){case"802-3-ethernet":"activated"==n[2]&&(e.ethernetActive=!0);break;case"802-11-wireless":"activated"==n[2]&&(e.activeWifi=n[0]);break;case"wireguard":"activated"==n[2]&&(e.foxnetActive=!0)}}}return e}getSystemVersion(){var e,t,n,i,o;let s=null===(e=null===r.ZP||void 0===r.ZP?void 0:r.ZP.GetHostInfo(r.zA.Version))||void 0===e?void 0:e.split("\n"),a={};if(void 0!==s)for(let e of s){let t=e.split("=");switch(t[0]){case"VERSION":a.version=t[1];break;case"USER":a.user=t[1];break;case"MACHINE":a.hostname=t[1];break;case"DATE":a.datetime=t[1]}}return null!==(o=null!==(i=null!==(n=null!==(t=a.version)&&void 0!==t?t:"?"+a.user)&&void 0!==n?n:"?@"+a.hostname)&&void 0!==i?i:"?"+a.datetime)&&void 0!==o?o:"?"}render(){var e,t,n,i;if(!this.props.active)return null;let s=null!==(e=null===r.ZP||void 0===r.ZP?void 0:r.ZP.GetHostInfo(r.zA.XRS_CalibrationDate))&&void 0!==e?e:"???",a=null,l=!0;try{a=Date.parse(s.split("_")[0])}finally{}if(a){const e="2021-11-22";l=a<Date.parse(e)}let d=this.getSystemVersion(),p=this.GetNetworkInfo(),u=null!==(t=p.activeWifi)&&void 0!==t?t:"disconnected";return p.ethernetActive&&(u+=" +Ethernet"),p.foxnetActive&&(u+=" +Foxnet"),o.createElement(o.Fragment,null,o.createElement(E,null),o.createElement(D,null),o.createElement("br",null),o.createElement("hr",null),o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},"Hostname"),o.createElement("div",{className:"Label"},null===r.ZP||void 0===r.ZP?void 0:r.ZP.GetHostInfo(r.zA.Hostname))),o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},"System Version"),o.createElement("div",{className:"Label"},d)),o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},"WiFi"),o.createElement("div",{className:"Label"},u)),o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},"Link paired"),null!==(i=null===(n=p.linksPaired)||void 0===n?void 0:n.map(((e,t)=>o.createElement("div",{key:t,className:"Label"},e))))&&void 0!==i?i:"none"),o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},"XRService Cal"),o.createElement("div",{className:"Label"},s),l&&o.createElement("div",{className:"Label Error"},"REQUIRES CAMERA CALIBRATION")),o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},"IP"),o.createElement("div",{className:"Label"},null===r.ZP||void 0===r.ZP?void 0:r.ZP.GetHostInfo(r.zA.IP))))}};var O,B;I.Name="system_settings",I=(0,i.gn)([s.Pi],I),function(e){e[e.NoConnection=0]="NoConnection",e[e.Connected=1]="Connected",e[e.ConnectInitiated=2]="ConnectInitiated",e[e.EnteringPassword=3]="EnteringPassword",e[e.Connecting=4]="Connecting",e[e.ConnectionSuccess=5]="ConnectionSuccess",e[e.ConnectionFailure=6]="ConnectionFailure"}(O||(O={})),function(e){e[e.NoSoftAP=0]="NoSoftAP",e[e.GettingStatus=1]="GettingStatus",e[e.Intermediate=2]="Intermediate",e[e.ErrorGettingStatus=3]="ErrorGettingStatus",e[e.Creating=4]="Creating",e[e.CreationSuccess=5]="CreationSuccess",e[e.CreationFailure=6]="CreationFailure",e[e.Connected=7]="Connected",e[e.Destroying=8]="Destroying"}(B||(B={}));class V extends o.Component{constructor(e){super(e),this.state={accessPoints:[],currentAccessPoint:null,targetAccessPoint:null,sTargetPassword:"",softAPState:B.NoSoftAP,sSoftAPSSID:"",sSoftAPPassword:"",sSoftAPMessage:"",bShowConnectModal:!1,connectionState:O.NoConnection}}componentDidMount(){this.m_mailbox=new r.Nv,this.m_mailbox.Init("WiFiUI").then((()=>{this.RefreshAccessPoints(),this.m_mailbox.RegisterHandler("refresh_wifi_ui",(e=>{console.log("Received refresh message"),this.setState({currentAccessPoint:e.currentAccessPoint,accessPoints:e.accessPoints})})),this.m_mailbox.RegisterHandler("join_network_failed",(e=>{console.log("Received join_network_failed message"),this.setState({sError:e.sError})})),this.m_mailbox.RegisterHandler("sap_status_update",(e=>{let t=()=>{if(0==e.nReturnCode)switch(e.sOutput.charAt(0)){case"0":this.setState({softAPState:B.NoSoftAP});break;case"1":this.setState({softAPState:B.Intermediate,sSoftAPMessage:e.sOutput});break;case"2":this.setState({softAPState:B.Connected,sSoftAPMessage:e.sOutput.substring(2,e.sOutput.length)})}else this.setState({softAPState:B.ErrorGettingStatus,sSoftAPMessage:e.sOutput})};switch(this.state.softAPState){case B.GettingStatus:case B.CreationSuccess:window.setTimeout(t,3e3);break;case B.Connected:case B.ErrorGettingStatus:case B.Intermediate:case B.NoSoftAP:t()}})),l.G3.GetSettingsValue("/settings/internet/enableSoftAP")&&this.setState({softAPState:B.GettingStatus})}))}componentWillUnmount(){this.m_mailbox=null}componentDidUpdate(e,t,n){t.connectionState!=this.state.connectionState&&this.HandleConnectionStateTransition(t.connectionState),t.softAPState!=this.state.softAPState&&this.HandleSoftAPStateTransition(t.softAPState)}HandleConnectionStateTransition(e){switch(this.state.connectionState){case O.Connecting:this.JoinNetwork(this.state.targetAccessPoint.path,this.state.sTargetPassword);break;case O.ConnectionFailure:case O.ConnectionSuccess:this.RefreshAccessPoints()}}HandleSoftAPStateTransition(e){switch(this.state.softAPState){case B.Creating:this.CreateSAP();break;case B.GettingStatus:case B.Intermediate:break;case B.Destroying:this.TeardownSAP();break;case B.CreationFailure:case B.CreationSuccess:case B.Connected:break;case B.NoSoftAP:this.setState({sSoftAPPassword:"",sSoftAPSSID:""})}}RefreshAccessPoints(){var e;return(0,i.mG)(this,void 0,void 0,(function*(){try{console.log("requesting access points");let t=(yield P().get("/linux_network/enumerate.json")).data;if(t.sError)console.log("failed to get access points: "+t.sError),this.setState({sError:t.sError});else{this.setState({accessPoints:null!==(e=t.accessPoints)&&void 0!==e?e:[]}),console.log("requesting current access point\n");let n=(yield P().get("/linux_network/get_current.json")).data;n.sError?(console.log("failed to get current access point: "+n.sError),this.setState({sError:n.sError})):this.setState({currentAccessPoint:n.accessPoint})}}catch(e){console.log("failed to get access points because of exception: "+e),this.setState({sError:""+e})}}))}onClickJoin(e){let t=this.state.accessPoints.find((t=>t.path==e));t?(this.setState({bShowConnectModal:!0,targetAccessPoint:t,sTargetPassword:""}),t.secure?(console.log(`network ${e} secured, showing password prompt`),this.onShowPasswordKeyboard()):(console.log(`network ${e} is unsecured, so joining with no password prompt`),this.setState({connectionState:O.Connecting}))):console.log(`Tried to join AP ${e}, which wasn't in our list`)}JoinNetwork(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){let n={sAccessPointPath:e,sPassword:t};try{let t=Date.now(),i=(yield P().post("/linux_network/join_network.action",n)).data;console.log("join_network response: "+JSON.stringify(i)+"\n");let o=Date.now()-t,s=Math.max(4e3-o,0);window.setTimeout((()=>{i?i.sError?(console.log(`Failed to join ${e}: ${i.sError}`),this.setState({connectionState:O.ConnectionFailure})):(console.log(`Join of ${e} was successful`),this.setState({connectionState:O.ConnectionSuccess,sTargetPassword:""})):(console.log(`Failed to join ${e}: Invalid response`),this.setState({connectionState:O.ConnectionFailure}))}),s)}catch(t){console.log(`Failed to join wifi network ${e}: `+t),this.setState({connectionState:O.ConnectionFailure})}}))}RenderAccessPoints(){var e,t,n,i,s;let r=null;for(let n of null!==(e=this.state.accessPoints)&&void 0!==e?e:[])if(n.path==(null===(t=this.state.currentAccessPoint)||void 0===t?void 0:t.path)){r=n.path;break}if(!r)for(let e of null!==(n=this.state.accessPoints)&&void 0!==n?n:[])if(e.ssid==(null===(i=this.state.currentAccessPoint)||void 0===i?void 0:i.ssid)){r=e.path;break}let a=[];for(let e of null!==(s=this.state.accessPoints)&&void 0!==s?s:[])e.path!=r&&a.push(o.createElement("div",{className:"APRow",key:e.path,onClick:()=>{this.onClickJoin(e.path)}},o.createElement("div",{className:"APSSID"},e.ssid," "),o.createElement("div",{className:"APBitRate"},(e.bitrate_kb/1024).toFixed(1),"Mb "),o.createElement("div",{className:"APStrength"},e.strength,"% "),o.createElement("div",{className:"APSecure"},e.secure?"Yes":"No")));return o.createElement("div",{className:"APList"},o.createElement("div",{className:"APHeader"},o.createElement("div",{className:"APSSID"},"SSID"),o.createElement("div",{className:"APBitRate"},"Bit Rate"),o.createElement("div",{className:"APStrength"},"Strength"),o.createElement("div",{className:"APSecure"},"Secure")),a)}CreateSAP(){return(0,i.mG)(this,void 0,void 0,(function*(){let e=Date.now();try{console.log("CreateSAP");let t={type:"sap_create"},n=yield this.m_mailbox.SendMessageAndWaitForResponse("driver_hmd",t,"sap_create_response");if(n.sError){let t=Date.now()-e,i=Math.max(3e3-t,0);window.setTimeout((()=>{console.log("Failed to create SAP: "+n.sError),this.setState({softAPState:B.CreationFailure,sSoftAPMessage:n.sError})}),i)}else this.setState({softAPState:B.CreationSuccess})}catch(t){let n=Date.now()-e,i=Math.max(3e3-n,0);window.setTimeout((()=>{console.log("Failed to create SAP because exception: "+t),this.setState({softAPState:B.CreationFailure,sSoftAPMessage:t})}),i)}}))}TeardownSAP(){return(0,i.mG)(this,void 0,void 0,(function*(){try{console.log("TeardownSAP");let e={type:"sap_teardown"},t=yield this.m_mailbox.SendMessageAndWaitForResponse("driver_hmd",e,"sap_teardown_response");console.log("TeardownSAP result = "+t.return_code+"\n"),this.setState({softAPState:B.NoSoftAP})}catch(e){console.log("Failed to teardown Wi-Fi Hotspot because exception: "+e),this.setState({sError:""+e})}}))}DeleteWifiHotspot(){return(0,i.mG)(this,void 0,void 0,(function*(){try{console.log("DeleteWifiHotspot");let e={type:"hotspot_delete"};yield this.m_mailbox.SendMessageAndWaitForResponse("driver_hmd",e,"hotspot_delete_response")}catch(e){console.log("failed to create Wi-Fi Hotspot because exception: "+e),this.setState({sError:""+e})}}))}onShowPasswordKeyboard(){this.setState({connectionState:O.EnteringPassword,sTargetPassword:""}),null===VRHTML||void 0===VRHTML||VRHTML.VROverlay.ShowKeyboard("Entering password","",128,(e=>{e&&this.setState({sTargetPassword:e})})),null===VRHTML||void 0===VRHTML||VRHTML.VROverlay.SetKeyboardPositionForOverlay(null===VRHTML||void 0===VRHTML?void 0:VRHTML.VROverlay.ThisOverlayKey(),{})}BIsPasswordInputEnabled(){return!(this.state.connectionState==O.Connecting||this.state.connectionState==O.ConnectionSuccess)}render(){var e;return o.createElement(o.Fragment,null,o.createElement(c.GV,{className:"SettingsItem"},o.createElement(c.wy,{name:"/settings/internet/enableSoftAP",label:"Wi-Fi Hotspot",title:"Toggle the Wi-Fi hotspot on headset.",onChange:e=>{this.setState({softAPState:e?B.Creating:B.Destroying})},onSubsection:o.createElement(o.Fragment,null,this.state.softAPState==B.Connected&&o.createElement("span",null,"Hotspot active. ",this.state.sSoftAPMessage," "),this.state.softAPState==B.GettingStatus&&o.createElement("span",null,"Getting hotspot status..."),this.state.softAPState==B.Intermediate&&o.createElement("span",null,"Hotspot status: ",this.state.sSoftAPMessage),this.state.softAPState==B.ErrorGettingStatus&&o.createElement("span",null,"Error getting hotspot status. ",this.state.sSoftAPMessage),(this.state.softAPState==B.Creating||this.state.softAPState==B.CreationSuccess)&&o.createElement("span",null,"Creating hotspot..."),this.state.softAPState==B.CreationFailure&&o.createElement("span",null,this.state.sSoftAPMessage),this.state.softAPState==B.Destroying&&o.createElement("span",null,"Destroying hotspot..."),this.state.softAPState==B.NoSoftAP&&o.createElement("span",null,"Hotspot inactive."))})),o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},"Active Wi-Fi Connection"),o.createElement("div",{className:"Label"},this.state.currentAccessPoint?this.state.currentAccessPoint.ssid:"None")),o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},"Available Wi-Fi Networks"),o.createElement("div",{className:"Label"},o.createElement(_.z,{style:{display:"inline-block",width:"fit-content"},className:"ButtonControl",onClick:()=>{this.RefreshAccessPoints()}},"Refresh"))),this.RenderAccessPoints(),this.state.bShowConnectModal&&o.createElement(c.TB,{header:o.createElement("h1",null,"Connect to Network"),subheader:null===(e=this.state.targetAccessPoint)||void 0===e?void 0:e.ssid,onDismissRequested:()=>{this.setState({bShowConnectModal:!1})}},o.createElement("div",{style:{display:"flex",marginBottom:"0.5em"}},o.createElement("div",{className:this.BIsPasswordInputEnabled()?"PasswordInput":"PasswordInputDisabled",onClick:()=>{this.onShowPasswordKeyboard()}},o.createElement("span",{style:{fontSize:"35px"}},this.state.sTargetPassword)),o.createElement("div",null,o.createElement(c.ls,{onClick:()=>{this.setState({connectionState:O.Connecting})},enabled:this.BIsPasswordInputEnabled()},"Submit"))),this.state.connectionState==O.EnteringPassword&&o.createElement("span",null,"Please enter the password with the keyboard."),this.state.connectionState==O.Connecting&&o.createElement("span",null,"Connecting..."),this.state.connectionState==O.ConnectionFailure&&o.createElement("span",null,"Failed to connect. Please try again."),this.state.connectionState==O.ConnectionSuccess&&o.createElement("span",null,"Connection successful.")))}}(0,i.gn)([d.ak],V.prototype,"onShowPasswordKeyboard",null),(0,i.gn)([d.ak],V.prototype,"BIsPasswordInputEnabled",null);let G=class extends c.d9{constructor(e){super(e)}render(){return this.props.active?o.createElement(o.Fragment,null,o.createElement(V,null)):null}};function x(){const[e,t]=o.useState();return o.createElement(c.GV,{className:"SettingsItem"},o.createElement(_.z,{className:"ButtonControl Spanning",onClick:()=>(0,i.mG)(this,void 0,void 0,(function*(){t(null);try{(yield l.G3.ReloadSettingsSchema()).success?window.location.reload():t("Failed to reload schema. File might not be found, or might be invalid.")}catch(e){t(e.message)}}))},"Reload Settings Schema"),e&&o.createElement("div",{className:"Subsection Label"},e))}G.Name="internet_settings",G=(0,i.gn)([s.Pi],G);const F=(0,s.Pi)((()=>o.createElement(c.GV,{className:"SettingsItem"},o.createElement(c.Xp,{label:"Auto-Show Dashboard",name:v.y3,items:[{value:"",sLabel:"Default"},p.Kr.Separator,{value:v.O5,sLabel:"Library"},{value:v.PF,sLabel:"Now Playing"},{value:v.wB,sLabel:"Store"},p.Kr.Separator,{value:v.gB,sLabel:"Desktop View"},{value:v.r4+".1",sLabel:"Desktop 1"},{value:v.r4+".2",sLabel:"Desktop 2"},p.Kr.Separator,{value:v.A4,sLabel:"Settings"}]})))),N=e=>{const[t,n]=o.useState(1),[i,s]=o.useState(1),[r,a]=o.useState(1),[l,d]=o.useState(1),[p,u]=o.useState(!1);return o.createElement(o.Fragment,null,o.createElement(c.D3,{label:"Segmented Control",items:[{sLabel:"One",value:1},{sLabel:"Two",value:2}],value:t,onChange:n}),o.createElement(c.D3,{label:"Segmented Control",items:[{sLabel:"One",value:1},{sLabel:"Two",value:2},{sLabel:"Three",value:3}],value:i,onChange:s}),o.createElement(c.D3,{label:"Segmented Control",items:[{sLabel:"One",value:1},{sLabel:"Two",value:2},{sLabel:"Three",value:3},{sLabel:"Four",value:4}],value:r,onChange:a}),o.createElement(c.D3,{label:"Segmented Control",items:[{sLabel:"1",value:1},{sLabel:"2",value:2},{sLabel:"3",value:3},{sLabel:"4",value:4},{sLabel:"5",value:5}],value:l,onChange:d}),o.createElement("hr",null),o.createElement(c.wy,{label:"Standard Toggle",value:p,onChange:u}),o.createElement(c.wy,{label:"Inverted Toggle",value:p,onChange:u,swapOnOff:!0}))},H=e=>{const[t,n]=o.useState(1);return o.createElement(o.Fragment,null,o.createElement(c.t0,{label:"Radio Buttons",items:[{sLabel:"1",value:1},{sLabel:"2",value:2},{sLabel:"3",value:3},{sLabel:"4",value:4}],value:t,onChange:n}))},U=e=>{const[t,n]=o.useState(1);return o.createElement(o.Fragment,null,o.createElement(c.Xp,{label:"Dropdown",items:[{sLabel:"One",value:1},{sLabel:"Two",value:2},{sLabel:"Three",value:3},{sLabel:"Four",value:4}],value:t,onChange:n}))},W=(0,s.Pi)((()=>{const e="settingscontrolzoo",t=l.G3.routePageSection==e;return o.createElement(o.Fragment,null,o.createElement("div",{className:"SettingsItem Button"},o.createElement(_.z,{className:"ButtonControl",onClick:()=>l.G3.setRoutePageSection(e)},"Zoo of Settings Controls")),t&&o.createElement(c.TB,{header:"Settings Controls",onDismissRequested:()=>l.G3.setRoutePageSection(null)},o.createElement(N,null),o.createElement("hr",null),o.createElement(H,null),o.createElement("hr",null),o.createElement(U,null)))}));let X=class extends c.d9{constructor(e){super(e)}render(){return this.props.active?o.createElement(o.Fragment,null,this.schemaComponents,o.createElement(c.U4,{name:"/settings/dashboard/verticalOffsetCm_2",label:"Vertical Offset (cm)",min:-9,max:9,valueStyleVariant:y.px.OnHandle,detents:[0],renderValue:e=>e.toFixed(0)+" cm",step:1}),o.createElement(c.wy,{label:"Enable Per-App Refresh Rate",name:"/settings/internal/enablePerAppFPS"}),o.createElement(c.wy,{label:"Allow Dashboard auto-launch with SteamVR Home",name:"/settings/dashboard/allowDashboardAutoLaunchWithSteamVRHome"}),o.createElement(c.wy,{label:"Skip the Dashboard BG fade during SteamVR Home",name:"/settings/dashboard/omitDashboardFadeWithSteamVRHome"}),o.createElement(c.wy,{label:"Haptics on Button Exit",name:"/settings/steamvr/noEdgeExitHaptics",swapOnOff:!0}),o.createElement(c.wy,{label:"Force Welcome in Quicklaunch",name:"/settings/dashboard/forceWelcomeScreen"}),o.createElement(c.wy,{name:v.BW,swapOnOff:!0,label:(0,a.Xx)("#Settings_Animations")}),o.createElement(F,null),o.createElement(x,null),o.createElement(W,null),this.makeResetToDefaultButton()):null}};X.Name="internal_settings",X=(0,i.gn)([s.Pi],X);var q=n(1058);let z=class extends c.d9{constructor(e){super(e)}OnSetAsOpenXRRuntime(){null===VRHTML||void 0===VRHTML||VRHTML.XRRuntimeManager.SetThisRuntimeToCurrent(),this.forceUpdate()}render(){var e;if(!this.props.active)return null;let[t,n]=null!==(e=null===VRHTML||void 0===VRHTML?void 0:VRHTML.XRRuntimeManager.GetCurrentRuntime())&&void 0!==e?e:[r.GC.Error,""];switch(r.GC.ThisSteamVR,t){case r.GC.AnotherSteamVR:n="#OpenXR_AnotherSteamVR";break;case r.GC.ThisSteamVR:n="#OpenXR_SteamVR";break;default:case r.GC.Error:n="#OpenXR_Error";break;case r.GC.None:n="#OpenXR_None";break;case r.GC.AnotherRuntime:switch(n){case"Oculus OpenXR":n="#OpenXR_OculusRuntime";break;case"MixedRealityRuntime":n="#OpenXR_WindowsMixedReality"}}return n.startsWith("#")&&(n=(0,a.Xx)(n)),o.createElement(o.Fragment,null,this.schemaComponents,o.createElement("div",{className:"SettingsItem"},o.createElement("div",{className:"OpenXRRuntimeLabel"},(0,a.Xx)("#Settings_CurrentOpenXRRuntime")),o.createElement("div",{className:"OpenXRRuntimeValue"}," ",n," ")),!(null===VRHTML||void 0===VRHTML?void 0:VRHTML.XRRuntimeManager.IsThisRuntimeCurrent())&&o.createElement("div",{className:"SettingsItem Button ResetDefaultButton"},o.createElement(_.z,{className:"ButtonControl",onClick:this.OnSetAsOpenXRRuntime},(0,a.Xx)("#Settings_SetAsOpenXRRuntime"))),this.makeResetToDefaultButton())}};z.Name="developer_settings",(0,i.gn)([d.ak],z.prototype,"OnSetAsOpenXRRuntime",null),z=(0,i.gn)([s.Pi],z);var K=n(3947);let j=class extends o.Component{constructor(e){super(e),this.m_refSelectedButton=o.createRef(),this.state={bShowModal:!1,rBackgroundUGCItems:[]}}updateUGCItems(){l.G3.GetSettingsUGC().then((e=>{null!=e.items&&this.setState({rBackgroundUGCItems:e.items})}))}componentDidMount(){this.updateUGCItems(),this.m_workshopStateChangedCanaryDisposer=(0,f.N7)(l.G3,"workshopStateChangedCanary",this.updateUGCItems)}componentWillUnmount(){this.m_workshopStateChangedCanaryDisposer(),this.m_workshopStateChangedCanaryDisposer=null}setBackground(e){l.G3.systemInfo&&e===l.G3.systemInfo.default_background&&(e=""),l.G3.SetSettingsValue("/settings/steamvr/background",e),this.hideModal()}hideModal(){this.setState({bShowModal:!1})}showModal(){this.setState({bShowModal:!0})}componentDidUpdate(e,t){this.state.bShowModal&&!t.bShowModal&&setTimeout((()=>{this.m_refSelectedButton.current&&this.m_refSelectedButton.current.elem.scrollIntoView({block:"center"})}),0)}get currentBackgroundPath(){return l.G3.settings.get("/settings/steamvr/background")||l.G3.systemInfo.default_background}render(){const e=this.currentBackgroundPath,t=[{file:"#A0A0A0FF",tags:"background",preview:"/dashboard/images/background_light_thumbnail.png",publishedfileid:null},{file:"#0D0D0DFF",tags:"background",preview:"/dashboard/images/background_dark_thumbnail.png",publishedfileid:null},...this.state.rBackgroundUGCItems.filter(((e,t)=>e.tags&&-1!=e.tags.indexOf("background")))],n=t.find((t=>t.file==e))||null,i=n?n.preview:null;return o.createElement(o.Fragment,null,o.createElement(c.GV,{className:"SettingsItem Background",title:(0,a.Xx)("#Settings_Appearance_BackgroundDesc")},o.createElement("div",{className:"Label"},(0,a.Xx)("#Settings_Appearance_Background")),o.createElement(_.z,{className:(0,q.LJ)("ButtonControl",["Background",!!i]),style:{"--background-url-value":i?'url("'+i+'")':null},onClick:this.showModal},!i&&(0,a.Xx)("#Settings_Appearance_Background_Select"))),this.state.bShowModal&&o.createElement(c.TB,{onDismissRequested:this.hideModal,className:"Backgrounds",header:(0,a.Xx)("#Settings_Appearance_Background"),subheader:K.I.IsSteamAvailable?null:(0,a.Xx)("#Settings_Appearance_Background_NoSteam")},o.createElement("div",{className:"BackgroundsGrid"},t.map(((t,n)=>o.createElement(_.z,{className:(0,q.LJ)("ButtonControl","Background",["Selected",t.file==e]),style:{"--background-url-value":t.preview?'url("'+t.preview+'")':null},key:"backgroundelement_"+t.preview,ref:t.file==e?this.m_refSelectedButton:null,title:t.file.startsWith("#")?null:t.file,onClick:()=>this.setBackground(t.file)}))))))}};(0,i.gn)([d.ZP],j.prototype,"updateUGCItems",null),(0,i.gn)([d.ZP],j.prototype,"setBackground",null),(0,i.gn)([d.ZP],j.prototype,"hideModal",null),(0,i.gn)([d.ZP],j.prototype,"showModal",null),(0,i.gn)([f.Fl],j.prototype,"currentBackgroundPath",null),j=(0,i.gn)([s.Pi],j);class Z extends o.Component{constructor(){super(...arguments),this.m_sUniqueIdForForceBoundsVisible=Math.random().toString()}componentDidMount(){l.G3.SetDashboardForceBoundsVisible(v.A4,this.m_sUniqueIdForForceBoundsVisible,!0)}componentWillUnmount(){l.G3.SetDashboardForceBoundsVisible(v.A4,this.m_sUniqueIdForForceBoundsVisible,!1)}render(){return null}}let J=class extends c.d9{constructor(e){super(e)}render(){var e;if(!this.props.active)return null;const t=l.G3.settings.get("/settings/steamvr/background"),n=!!t&&!t.startsWith("#"),i=null!==(e=l.G3.settings.get(v.yQ))&&void 0!==e?e:.7;let s;return s=i<.5?(0,a.Xx)("#Settings_Chaperone_SuitableForSmall"):i<1?(0,a.Xx)("#Settings_Chaperone_SuitableForMedium"):(0,a.Xx)("#Settings_Chaperone_SuitableForLarge"),o.createElement(o.Fragment,null,o.createElement(Z,null),o.createElement(c.Xp,{name:"/settings/collisionBounds/CollisionBoundsStyle",label:(0,a.Xx)("#Settings_Chaperone_Style"),items:[{value:0,sLabel:(0,a.Xx)("#Settings_Chaperone_Style_0")},{value:1,sLabel:(0,a.Xx)("#Settings_Chaperone_Style_1")},{value:3,sLabel:(0,a.Xx)("#Settings_Chaperone_Style_3")},{value:2,sLabel:(0,a.Xx)("#Settings_Chaperone_Style_2")},{value:4,sLabel:(0,a.Xx)("#Settings_Chaperone_Style_4")}],subsection:o.createElement(o.Fragment,null,o.createElement(c.Ei,{label:(0,a.Xx)("#Settings_Chaperone_Color"),nameR:"/settings/collisionBounds/CollisionBoundsColorGammaR",nameG:"/settings/collisionBounds/CollisionBoundsColorGammaG",nameB:"/settings/collisionBounds/CollisionBoundsColorGammaB",nameA:"/settings/collisionBounds/CollisionBoundsColorGammaA",minA:.3,alphaScale:255}),o.createElement(c.wy,{name:"/settings/collisionBounds/CollisionBoundsGroundPerimeterOn",label:(0,a.Xx)("#Settings_Appearance_Chaperone_CollisionBoundsGroundPerimeterOn"),title:(0,a.Xx)("#Settings_Appearance_Chaperone_CollisionBoundsGroundPerimeterOnDesc")}),o.createElement(c.U4,{min:.1,max:3,detents:[2.4],name:"/settings/collisionBounds/CollisionBoundsWallHeight",label:(0,a.Xx)("#Settings_Chaperone_WallHeight"),renderValue:e=>e.toFixed(2),valueStyleVariant:y.px.OnHandle}),o.createElement(c.U4,{min:.2,max:1.4,detents:[.7],name:v.yQ,label:(0,a.Xx)("#Settings_Chaperone_ActivationDistance"),renderValue:e=>e.toFixed(2),valueStyleVariant:y.px.OnHandle}),o.createElement("div",{className:"SettingsItemValueLabel"},s))}),o.createElement(c.Ei,{label:(0,a.Xx)("#Settings_Appearance_PlayArea_FloorColor"),name:"/settings/steamvr/playAreaColor"}),o.createElement(j,null),n&&o.createElement(c.wy,{name:"/settings/steamvr/backgroundUseDomeProjection",label:(0,a.Xx)("#Settings_Appearance_UseDomeProjection"),title:(0,a.Xx)("#Settings_Appearance_UseDomeProjectionDesc"),onSubsection:o.createElement(o.Fragment,null,o.createElement(c.U4,{min:1,max:10,detents:[1.6],name:v.EL,label:(0,a.Xx)("#Settings_Appearance_DomeCameraHeight"),title:(0,a.Xx)("#Settings_Appearance_DomeCameraHeightDesc"),exponent:2}),o.createElement(c.U4,{min:2,max:250,specialMaxValue:0,name:v.RD,label:(0,a.Xx)("#Settings_Appearance_DomeCameraRadius"),title:(0,a.Xx)("#Settings_Appearance_DomeCameraRadiusDesc"),exponent:5}),o.createElement(c.GV,{className:"SettingsItem"},o.createElement(_.z,{className:"ButtonControl",onClick:()=>l.G3.ResetSettingsValues(v.EL,v.RD)},(0,a.Xx)("#Settings_Appearance_ResetDomeProjectionSettings"))))}),this.makeResetToDefaultButton())}};var Q;J.Name="playarea_settings",J=(0,i.gn)([s.Pi],J);class Y{constructor(){this.driverNameToIdMap=new Map,P().get("/drivers/list.json").then((e=>{const t=e.data.drivers;this.driverList=t,console.log(t),t.map(((e,t)=>{this.driverNameToIdMap.set(e.manifest.name,t)}))}))}prettyName(e){return Y.driverPrettyNames[e]||e}unBlock(e){l.G3.SetRestartRequired(),this.driverList[this.driverNameToIdMap.get(e)].blocked_by_safe_mode=!1;let t={driver:e};return P().post("/drivers/unblock",t)}setEnabled(e,t){l.G3.SetRestartRequired(),this.driverList[this.driverNameToIdMap.get(e)].enabled=t;let n={driver:e,enable:t};return P().post("/drivers/setenable",n)}get visibleDriverList(){return this.driverList.filter((e=>!(e.manifest.resourceOnly||e.enabled_by_default==e.enabled&&!e.blocked_by_safe_mode&&e.on_safemode_whitelist)))}get numBlockedDrivers(){return this.visibleDriverList.filter((e=>e.blocked_by_safe_mode)).length}get numDisabledDrivers(){return this.visibleDriverList.filter((e=>!e.enabled)).length}get numUserManuallyDisenabledDrivers(){return this.visibleDriverList.filter((e=>e.enabled_by_default!=e.enabled)).length}}Y.driverPrettyNames={lighthouse:"Lighthouse (Index, Vive, ...)",oculus:"Oculus (Rift, Rift S, Quest)",oculus_legacy:"Legacy Oculus (DK1, DK2)",gamepad:"Gamepad Support",null:"No HMD",holographic:"Windows MR / Holographic","00natural":"Natural Locomotion","00inputemulator":"OpenVR-InputEmulator",aapvr:"Pimax",ivry:"iVRy (Phone, PSVR)",kinoni:"Kinoni (Phone)",amdwvr:"AMD ReLive for VR (Wireless)",alvr:"ALVR - Air Light VR (Gear VR, Oculus Go, Quest)",VirtualDesktop:"Virtual Desktop Streamer (Quest)"},(0,i.gn)([f.LO],Y.prototype,"driverList",void 0),(0,i.gn)([f.Fl],Y.prototype,"visibleDriverList",null),(0,i.gn)([f.Fl],Y.prototype,"numBlockedDrivers",null),(0,i.gn)([f.Fl],Y.prototype,"numDisabledDrivers",null),(0,i.gn)([f.Fl],Y.prototype,"numUserManuallyDisenabledDrivers",null);const $=new Y,ee=(0,s.Pi)((()=>o.createElement(_.z,{className:"ButtonControl",title:(0,a.Xx)("#Settings_Drivers_UnblockAllTip"),onClick:()=>(0,i.mG)(void 0,void 0,void 0,(function*(){const e=$.driverList.filter((e=>e.blocked_by_safe_mode)).map((e=>e.manifest.name));for(let t=0;t<e.length;++t)yield $.unBlock(e[t])}))},(0,a.Xx)("#Settings_Drivers_UnblockAll"))));function te(e){return e.blocked?o.createElement(c.GV,{className:"SettingsItem",title:e.title},o.createElement("div",{className:"Label"},e.label),o.createElement(_.z,{className:"ButtonControl",title:e.title,onClick:e.onUnblock},(0,a.Xx)("#Settings_Drivers_Unblock"))):o.createElement(c.wy,{label:e.label,title:e.title,onChange:e.onToggleEnable,value:e.enabled})}const ne=(0,s.Pi)((()=>o.createElement(o.Fragment,null,$.visibleDriverList.map((e=>o.createElement(te,{key:e.manifest.name,label:$.prettyName(e.manifest.name),title:e.manifest.name,blocked:e.blocked_by_safe_mode,enabled:e.enabled,onToggleEnable:t=>{return n=e.manifest.name,i=t,void $.setEnabled(n,i);var n,i},onUnblock:()=>{return t=e.manifest.name,void $.unBlock(t);var t}}))))));let ie=Q=class extends o.Component{constructor(e){super(e)}render(){const e=$.numBlockedDrivers,t=$.numDisabledDrivers,n=l.G3.showAdvancedSettings||e||$.numUserManuallyDisenabledDrivers,i=l.G3.routePageSection==Q.PAGE_SECTION;return o.createElement(o.Fragment,null,!!n&&o.createElement("div",{className:"SettingsItem Button"},o.createElement(_.z,{className:"ButtonControl",onClick:()=>l.G3.setRoutePageSection(Q.PAGE_SECTION)},(0,a.Xx)("#Settings_Drivers_ShowDriverManagerUI"),0!=e&&o.createElement("div",{className:"Badge DriversBlocked"},(0,a.Xx)("#Settings_Drivers_Number_Blocked",e)),0==e&&0!=t&&o.createElement("div",{className:"Badge DriversDisabled"},(0,a.Xx)("#Settings_Drivers_Number_Disabled",t)))),i&&$.driverList&&o.createElement(c.TB,{header:(0,a.Xx)("#Settings_Drivers_Header"),subheader:0==e?null:o.createElement("div",{className:"BlockedSubheader"},o.createElement("div",{className:"Label"},(0,a.Xx)("#Settings_Drivers_SomeBlocked")),o.createElement(ee,null)),onDismissRequested:()=>l.G3.setRoutePageSection(null)},o.createElement(ne,null)))}};ie.PAGE_SECTION="drivermanager",ie=Q=(0,i.gn)([s.Pi],ie);let oe=class extends o.Component{constructor(e){super(e),this.state={bShowingModal:!1}}show(){this.setState({bShowingModal:!0})}hide(){this.setState({bShowingModal:!1})}render(){const e=!!l.G3.apps,t=e?l.G3.apps.filter((e=>e.is_dashboard_overlay&&e.key!=v.Pv&&!e.is_internal)):[],n=t.filter((e=>e.is_autolaunch));return o.createElement(o.Fragment,null,o.createElement(c.GV,{className:"SettingsItem",title:e?null:(0,a.Xx)("#Settings_Loading")},o.createElement(_.z,{className:"ButtonControl",enabled:e,onClick:this.show},(0,a.Xx)("#Settings_ChooseStartupOverlayApps"),e&&o.createElement("div",{className:"Badge"},(0,a.Xx)("#Settings_Number_Selected",n.length)))),this.state.bShowingModal&&o.createElement(c.TB,{className:"OverlayAutoLaunchModal",header:(0,a.Xx)("#Settings_StartTheseOverlayAppsOnLaunch"),onDismissRequested:this.hide},t.map((e=>o.createElement(c.wy,{key:e.key,label:e.name,value:e.is_autolaunch,onChange:t=>l.G3.SetAppSettings(e.key,{is_autolaunch:t})}))),!t.length&&o.createElement("div",{className:"ModalPlaceholder"},(0,a.Xx)("#Settings_ChooseStartupOverlayApps_NoOverlayAppsInstalled"))))}};(0,i.gn)([d.ZP],oe.prototype,"show",null),(0,i.gn)([d.ZP],oe.prototype,"hide",null),oe=(0,i.gn)([s.Pi],oe);let se=class extends c.d9{constructor(e){super(e)}render(){return this.props.active?o.createElement(o.Fragment,null,o.createElement(oe,null),o.createElement(ie,null),o.createElement("hr",null),this.schemaComponents,this.makeResetToDefaultButton()):null}};se.Name="startupshutdown_settings",se=(0,i.gn)([s.Pi],se);let re=class extends o.Component{constructor(e){super(e),this.state={m_nValue:l.G3.settings.get("/settings/dashboard/dashboardScale")}}componentDidMount(){this.m_settingObserverAutorunDisposer=(0,f.EH)((()=>{this.setState({m_nValue:l.G3.settings.get("/settings/dashboard/dashboardScale")})}))}componentWillUnmount(){this.m_settingObserverAutorunDisposer&&(this.m_settingObserverAutorunDisposer(),this.m_settingObserverAutorunDisposer=null)}render(){return o.createElement(c.U4,{label:(0,a.Xx)("#Settings_DashboardScale"),min:.75,max:1.5,valueStyleVariant:y.px.OnHandle,renderValue:e=>(100*e).toFixed(0)+"%",value:this.state.m_nValue,detents:[1],onChange:e=>{this.setState({m_nValue:e}),(0,r.Op)()!=r.qA.Overlay&&l.G3.SetSettingsValue("/settings/dashboard/dashboardScale",e)},onFinalChange:e=>l.G3.SetSettingsValue("/settings/dashboard/dashboardScale",e)})}};re=(0,i.gn)([s.Pi],re);let ae=class extends c.d9{constructor(e){super(e)}render(){var e;if(!this.props.active)return null;const t=null!==(e=l.G3.settings.get("/settings/dashboard/allowTheaterMode"))&&void 0!==e&&e;return o.createElement(o.Fragment,null,o.createElement(c.Xp,{name:v.o1,label:(0,a.Xx)("#Settings_Dashboard_Position"),items:[{value:w._.Near,sLabel:(0,a.Xx)("#Settings_Near")},{value:w._.Middle,sLabel:(0,a.Xx)("#Settings_Middle")},{value:w._.Far,sLabel:(0,a.Xx)("#Settings_Far")}]}),t&&o.createElement(c.Xp,{name:"/settings/dashboard/theaterPosition",label:"Theater Position",items:[{value:w._.Near,sLabel:(0,a.Xx)("#Settings_Near")},{value:w._.Middle,sLabel:(0,a.Xx)("#Settings_Middle")},{value:w._.Far,sLabel:(0,a.Xx)("#Settings_Far")}]}),t&&o.createElement(c.U4,{name:"/settings/dashboard/theaterModeBrightness",label:"Theater Room Brightness",min:0,max:1,valueStyleVariant:y.px.OnHandle,detents:[.5],renderValue:e=>(100*e).toFixed(0)+"%"}),t&&o.createElement(c.U4,{name:"/settings/dashboard/theaterModeReflection",label:"Theater Room Reflections",min:0,max:1,valueStyleVariant:y.px.OnHandle,detents:[.5],renderValue:e=>(100*e).toFixed(0)+"%"}),o.createElement(c.wy,{name:"/settings/dashboard/showPowerOptions",label:(0,a.Xx)("#Settings_ShowPowerMenu"),visibility:c.VK.Advanced}),o.createElement(c.wy,{name:"/settings/dashboard/showDesktop",label:(0,a.Xx)("#Settings_ShowDesktopViews"),visibility:c.VK.Advanced}),o.createElement(c.wy,{name:"/settings/dashboard/allowAppQuitting",label:(0,a.Xx)("#Settings_AllowAppQuitting"),visibility:c.VK.Advanced}),o.createElement(c.wy,{name:"/settings/dashboard/arcadeMode",label:(0,a.Xx)("#Settings_ShowSettingsInDashboard"),swapOnOff:!0,visibility:c.VK.Advanced}),o.createElement(c.wy,{name:"/settings/dashboard/enableDashboard",title:(0,a.Xx)("#Settings_EnableDashboardDesc"),label:(0,a.Xx)("#Settings_EnableDashboard"),visibility:c.VK.Advanced}))}};ae.Name="dashboard_settings",ae=(0,i.gn)([s.Pi],ae);var le,ce=n(7679),de=n(9392),pe=n(6547);class ue extends o.Component{constructor(e){super(e),this.state={bRestartAnimation:!1,bShowSteamVRRestartRequired:!1,bShowAppRestartRequired:!1}}get enabled(){const e=(0,r.Op)()==r.qA.Overlay;return this.props.standalonePanel==e}onExitApp(){null===r.ZP||void 0===r.ZP||r.ZP.QuitSceneApp()}onRestartSteamVR(){r.ZP?r.ZP.RestartSteamVR(!1):window.open("vrmonitor://restartsystem")}onRestartRequired(){this.setState({bShowSteamVRRestartRequired:!0,bRestartAnimation:!0},(()=>{setTimeout((()=>{this.setState({bRestartAnimation:!1})}),10)}))}onAppRestartRequired(e){this.setState({bShowAppRestartRequired:!e,bRestartAnimation:!0},(()=>{setTimeout((()=>{this.setState({bRestartAnimation:!1})}),10)}))}componentDidMount(){this.enabled&&(l.G3.onRestartRequired=this.onRestartRequired,l.G3.onAppRestartRequired=this.onAppRestartRequired)}componentWillUnmount(){this.enabled&&(l.G3.onRestartRequired==this.onRestartRequired&&(l.G3.onRestartRequired=null),l.G3.onAppRestartRequired==this.onAppRestartRequired&&(l.G3.onAppRestartRequired=null))}render(){if(!this.enabled)return null;let e=null;if(this.state.bShowSteamVRRestartRequired?e=o.createElement(_.q,{className:"SettingsRestartRequiredBanner Shown"+(this.state.bRestartAnimation?" ReShimmer":"")},o.createElement("div",{className:"Label"},(0,a.Xx)("#Settings_MustRestart_Description")),o.createElement(_.z,{className:"ButtonControl",onClick:this.onRestartSteamVR},(0,a.Xx)("#Settings_MustRestart_RestartSteamVR_Button"))):this.state.bShowAppRestartRequired&&(e=o.createElement(_.q,{className:"SettingsRestartRequiredBanner Shown"+(this.state.bRestartAnimation?" ReShimmer":"")},o.createElement("div",{className:"Label"},(0,a.Xx)("#Settings_MustQuitApp_Description")),o.createElement(_.z,{className:"ButtonControl",onClick:this.onExitApp},(0,a.Xx)("#Settings_MustQuitApp_QuitCurrentGame_Button")))),this.props.standalonePanel){if(null===e)return null;const t="mainmountable_TopCenter";return o.createElement(r.wx,{parent_id:t,translation:{y:.2,z:-.05}},o.createElement(r.s_,{debug_name:"settingsrestartbanner",curvature_origin_id:v.Pt,origin:r.Ic.BottomCenter,interactive:!0,target_dpi_panel_id:ce.WR,reflect:.1},e))}return e}}(0,i.gn)([d.ak],ue.prototype,"onExitApp",null),(0,i.gn)([d.ak],ue.prototype,"onRestartSteamVR",null),(0,i.gn)([d.ak],ue.prototype,"onRestartRequired",null),(0,i.gn)([d.ak],ue.prototype,"onAppRestartRequired",null);let he=le=class extends o.Component{constructor(e){super(e),this.m_refSettingsPageContainer=o.createRef(),this.m_routeObservingAutorunDisposer=null,this.m_fidelitySettingsObserver=null,this.state={sActiveSettingSection:null}}componentDidMount(){this.m_routeObservingAutorunDisposer=(0,f.EH)((()=>{l.G3.routePage?this.setState({sActiveSettingSection:l.G3.routePage}):l.G3.setRoutePage(l.G3.settingsSchema.filter(le.shouldShowSection)[0].controller)})),this.m_fidelitySettingsObserver=new q.kB,this.ListenForHomeEnabledChanges()}componentDidUpdate(e,t){this.state.sActiveSettingSection!==t.sActiveSettingSection&&this.m_refSettingsPageContainer.current&&(this.m_refSettingsPageContainer.current.scrollTop=0)}componentWillUnmount(){var e,t;null===(e=this.m_routeObservingAutorunDisposer)||void 0===e||e.call(this),this.m_routeObservingAutorunDisposer=null,null===(t=this.m_fidelitySettingsObserver)||void 0===t||t.cleanup(),this.m_fidelitySettingsObserver=null}render(){const e=!l.G3.connected||!l.G3.settingsSchema;let t=null;e&&(0,r.Op)()!=r.qA.Overlay?t=o.createElement("div",{className:"Label"},(0,a.Xx)("#Settings_Loading")):e||((0,r.Op)()!=r.qA.Overlay||this.props.visible)&&(t=this.renderSettingsPanelContents());let n=null;if((0,r.Op)()==r.qA.Overlay){const e="mainmountable",i=e+"_TopCenter";n=o.createElement(r.Y9,{id:"settingstab",tabName:(0,a.Xx)("#VRMonitor_Nav_Settings"),iconUri:"/dashboard/images/icons/svr_settings.svg",summonOverlayKey:v.A4,mountableUnqualifiedID:e},t&&o.createElement(ue,{standalonePanel:!0}),t&&o.createElement(ce.lL,{visible:!0,debugName:"settings",additionalClassNames:"Settings",foregroundReflectMultiplier:.25},o.createElement(r.at,{id:i,location:r.Ic.TopCenter}),t))}else n=t;return o.createElement("div",{className:(0,q.LJ)("SettingsMain",(0,r.Op)()==r.qA.Overlay?"Overlay":"Desktop",["Loading",e])},n)}renderSettingsPanelContents(){const e=l.G3.settingsSchema.filter(le.shouldShowSection);return o.createElement(_.q,{className:"SettingsMainPanel"},o.createElement(ue,{standalonePanel:!1}),o.createElement("div",{className:"SettingsSidebarPageModalContainer"},o.createElement(pe.sC,{className:"SettingsSidebarPageContainer"},o.createElement("div",{className:(0,q.LJ)("SettingsSidebar")},e.map(this.renderSectionButton),o.createElement("div",{className:"Spacer"}),o.createElement("div",{className:(0,q.LJ)("Bottom","AdvancedSettingsToggle",["Fadable",!l.G3.showAdvancedSettings])},o.createElement(c.wy,{label:(0,a.Xx)("#Settings_AdvancedSettings"),value:l.G3.showAdvancedSettings,onChange:e=>l.G3.showAdvancedSettings=e,onLabel:(0,a.Xx)("#Settings_Show"),offLabel:(0,a.Xx)("#Settings_Hide")}))),o.createElement(de.P,{scrollDirection:de.I.Vertical,alwaysShowScrollbars:!0,className:(0,q.LJ)("SettingsPageContainer"),ref:this.m_refSettingsPageContainer},e.map(this.renderSectionPage)))))}renderSectionButton(e){let t=["SettingsSidebarButton"];return this.state.sActiveSettingSection===e.controller&&t.push("Active"),o.createElement(_.z,{key:e.title,className:t.join(" "),onClick:()=>l.G3.setRoutePage(e.controller)},o.createElement("div",{className:"Label"},(0,a.Xx)(e.title)))}renderSectionPage(e){const t=e.controller?e.controller:"generic",n=this.state.sActiveSettingSection===e.controller,i=[u,se,J,S.Yw,C,k,ae,z,X,R.P,I,G].find((e=>e.Name===t))||c.d9;return o.createElement(i,{key:e.title,section:e,active:n})}static shouldShowSection(e){if(e.internal_only&&!l.G3.showInternalSettings&&!l.G3.settings.get(le.k_sShowInternalSettings))return!1;if(e.controller==I.Name&&!l.G3.settings.get(le.k_sShowSystemSettings))return!1;if(e.controller==G.Name&&!l.G3.settings.get(le.k_sShowInternetSettings))return!1;if(!e.show_without_hmd&&!(null===r.ZP||void 0===r.ZP?void 0:r.ZP.HasHMD()))return!1;if(e.desktop_only&&(0,r.Op)()==r.qA.Overlay)return!1;let t=e.controller==ae.Name&&l.G3.settings.get(le.k_sShowDashboardSettings);return!(e.advanced_only&&!l.G3.showAdvancedSettings&&!t)&&(!(e.controller==C.Name&&!(null===r.ZP||void 0===r.ZP?void 0:r.ZP.VRProperties.GetBoolProperty("/user/head",r.Uk.HasCamera_Bool)))&&(!!(e.controller!=u.Name||l.G3.systemInfo&&l.G3.systemInfo.os_type>=0)&&!(!r.ZP&&e.web_helper_only)))}ListenForHomeEnabledChanges(){return(0,i.mG)(this,void 0,void 0,(function*(){if((0,r.Op)()!=r.qA.Overlay)return;let e=yield l.G3.GetSettingsValue(v.je);r.ZP&&(0,f.EH)((()=>{let t=l.G3.settings.get(v.je);void 0!==t&&t!=e&&(t&&!r.ZP.VRApplications.GetSceneApplicationKey()?r.ZP.VRApplications.LaunchApplication(v.hK):t||r.ZP.VRApplications.GetSceneApplicationKey()!=v.hK||r.ZP.QuitSceneApp(),e=t)}))}))}};he.k_sShowInternalSettings="/settings/steamvr/showInternalSettings",he.k_sShowSystemSettings="/settings/steamvr/showSystemSettings",he.k_sShowInternetSettings="/settings/steamvr/showInternetSettings",he.k_sShowDashboardSettings="/settings/steamvr/showDashboardSettings",(0,i.gn)([d.ak],he.prototype,"renderSectionButton",null),(0,i.gn)([d.ak],he.prototype,"renderSectionPage",null),he=le=(0,i.gn)([s.Pi],he)},3371:(e,t,n)=>{n.d(t,{P:()=>D,f:()=>P});var i=n(655),o=n(7294),s=n(7056),r=n(7062),a=n(3868),l=n(3446),c=n(8052),d=n(1818),p=n(6321),u=n(3947),h=n(1428),m=n(2188),g=n(2379);class S extends o.Component{constructor(e){super(e),this.m_mailbox=new p.Nv,this.m_deviceDetails=null,this.m_controllerType=null,this.m_thumbstickSourceName=null,this.m_lastX=0,this.m_lastY=0,this.m_addedPoint=!1,this.m_edgeValues=[],this.m_deviceDetails=u.I.GetDeviceInfo(this.props.devicePath),this.m_controllerType=u.I.GetControllerTypeInfo(this.m_deviceDetails.controller_type);for(let e in this.m_controllerType.input_source)if("joystick"==this.m_controllerType.input_source[e].type){this.m_thumbstickSourceName=e;break}this.m_mailbox.RegisterHandler("update_component_states",this.OnUpdateComponentStates),this.m_mailbox.Init("calibrate_thumbstick").then((()=>{if(this.m_thumbstickSourceName){let e={type:"request_input_state_updates",device_path:this.props.devicePath,returnAddress:this.m_mailbox.name};return this.m_mailbox.SendMessage("input_server",e),null}})),this.state={edgeValue:[]}}componentWillUnmount(){let e={type:"cancel_input_state_updates",device_path:this.props.devicePath,returnAddress:this.m_mailbox.name};this.m_mailbox.SendMessage("input_server",e)}OnUpdateComponentStates(e){let t=!1;for(let n in e.components){let i=e.components[n];n==this.m_thumbstickSourceName+"/x"?(this.m_lastX=i,t=!0):n==this.m_thumbstickSourceName+"/y"&&(this.m_lastY=i,t=!0)}if(t){let e=Math.sqrt(this.m_lastX*this.m_lastX+this.m_lastY*this.m_lastY);this.m_addedPoint?e<.2&&(this.m_addedPoint=!1):e>.95&&(this.m_addedPoint=!0,this.m_edgeValues.push({x:this.m_lastX,y:this.m_lastY}),this.setState({edgeValue:this.m_edgeValues}))}}OnCancel(){this.props.fnCloseCalibrator()}ComputeCalibration(){if(this.m_edgeValues.length<5)return null;{let e=[];for(let t of this.m_edgeValues){let n=-Math.atan2(t.x,t.y);e.push(180*n/Math.PI)}return e.sort(((e,t)=>e-t)),e[Math.floor(e.length/2)]}}OnConfirm(){this.props.fnUpdateThumbstickCalibration(this.props.devicePath,this.ComputeCalibration()),this.props.fnCloseCalibrator()}render(){const e=60;let t=[],n=0;for(let i of this.state.edgeValue){let s=i.x*e+e,r=-i.y*e+e;t.push(o.createElement("polyline",{key:n++,points:"60,60 "+s.toFixed(0)+","+r.toFixed(0),strokeWidth:"0.1rem",fill:"transparent"}))}let i=this.ComputeCalibration(),s=null;return s=i?(0,a.Xx)("#Settings_General_InviteMoreSamples",i.toFixed(2)):(0,a.Xx)("#Settings_General_NotEnoughSamples",5-this.m_edgeValues.length),o.createElement(c.TB,{onDismissRequested:this.props.fnCloseCalibrator,header:(0,a.Xx)("#Settings_General_CalibrateThumbstick"),footer:o.createElement("div",{className:"SettingsItem ButtonRow"},o.createElement(d.z,{key:"cancel",className:"ButtonControl",onClick:this.OnCancel},(0,a.Xx)("#Settings_General_Cancel")),o.createElement("div",{className:"Spacer"}),o.createElement(d.z,{key:"confirm",className:"ButtonControl",enabled:!!i,onClick:this.OnConfirm},(0,a.Xx)("#Settings_General_Confirm")))},o.createElement("div",{className:"ThumbstickCalibrateBody"},o.createElement("div",{className:"ThumbstickContainer"},o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:[0,0,120,120].join(" ")},o.createElement("circle",{cx:e,cy:e,r:e,strokeWidth:"0.1rem"}),t)),o.createElement("div",{className:"Label ThumbstickAngle"},s)))}}(0,i.gn)([s.ak],S.prototype,"OnUpdateComponentStates",null),(0,i.gn)([s.ak],S.prototype,"OnCancel",null),(0,i.gn)([s.ak],S.prototype,"OnConfirm",null);var _,v,f=n(1884),y=n(1732),b=n(1219),A=n(197);const C=(0,r.Pi)((()=>{const e="managevivetrackers";if(!(null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRDashboardManager.ShouldShowTrackerUI()))return null;const t=l.G3.routePageSection==e;return o.createElement(o.Fragment,null,o.createElement("div",{className:"SettingsItem Button"},o.createElement(d.z,{className:"ButtonControl",onClick:()=>l.G3.setRoutePageSection(e)},(0,a.Xx)("#Settings_General_ShowTrackerUI"))),t&&o.createElement(c.TB,{header:(0,a.Xx)("#Settings_ViveTrackers"),onDismissRequested:()=>l.G3.setRoutePageSection(null)},o.createElement(g.s,null)))})),w=(0,r.Pi)((()=>{const e="debuglegacyinput";if(!u.I.BDevMode)return null;const t=l.G3.routePageSection==e;return o.createElement(o.Fragment,null,o.createElement("div",{className:"SettingsItem Button"},o.createElement(d.z,{className:"ButtonControl",enabled:!!VRHTML,onClick:()=>l.G3.setRoutePageSection(e)},(0,a.Xx)("#AppSelect_LegacyDebug"))),t&&o.createElement(c.TB,{header:(0,a.Xx)("#AppSelect_LegacyDebug"),onDismissRequested:()=>l.G3.setRoutePageSection(null)},o.createElement(f.V,null)))})),k=(0,r.Pi)((()=>{const e="testcontrollers",t=l.G3.routePageSection==e;return o.createElement(o.Fragment,null,o.createElement("div",{className:"SettingsItem Button"},o.createElement(d.z,{className:"ButtonControl",onClick:()=>l.G3.setRoutePageSection(e)},(0,a.Xx)("#AppSelect_ControllerTester"))),t&&o.createElement(y.L,{onDismissRequested:()=>l.G3.setRoutePageSection(null)}))}));function M(){return o.createElement(c.GV,{visibility:c.VK.Advanced,className:"SettingsItem Button"},o.createElement(c.ls,{icon:c.uc.PopOut,onClick:function(){if(VRHTML)switch((0,p.Op)()){case p.qA.Desktop:VRHTML.ShowBindingUI(!0);break;case p.qA.Overlay:VRHTML.ShowBindingUI(!1),VRHTML.ShowBindingUIAppSelect()}else window.open("/dashboard/controllerbinding.html")}},(0,a.Xx)("#Settings_ShowOldBindingUI")))}function R(e){return u.I.BDevMode?o.createElement(c.GV,{className:"SettingsItem Button"},o.createElement(c.ls,{icon:c.uc.PopOut,onClick:function(){if(VRHTML){switch((0,p.Op)()){case p.qA.Desktop:VRHTML.ShowBindingUI(!0);break;case p.qA.Overlay:VRHTML.ShowBindingUI(!1)}let t="bindingui/"+p.qA[(0,p.Op)()];e.mailbox.SendMessage(t,{type:"show_input_debugger"})}else window.open("/dashboard/controllerbinding.html?debugger=true")}},(0,a.Xx)("#BindingUI_InputDebugger"))):null}let T=_=class extends o.Component{constructor(e){super(e),this.state={bShowingModal:!1,sDeviceToCalibrate:null}}resetToDefaults(){_.devices.forEach((e=>{this.updateCalibration(e.sDevicePath,0)}))}closeCalibrator(){this.setState({sDeviceToCalibrate:null})}updateCalibration(e,t){this.closeCalibrator(),_.devices.some((n=>n.sDevicePath==e&&(l.G3.SetSettingsValue(this.getThumbstickRotationSetting(e),t),!0)))}getThumbstickRotationSetting(e){let t=null;return _.devices.some((n=>{if(n.sDevicePath==e){const i=u.I.GetDeviceInfo(e);return i&&(t=n.sThumbstickAngleSettingPathPrefix+i.controller_type),!0}return!1})),t}shouldShowThumbstickCalibrateForHand(e){const t=u.I.GetDeviceInfo(e);if(!t)return!1;const n=u.I.GetControllerTypeInfo(t.controller_type);if(!n)return!1;for(let e in n.input_source)if("joystick"==n.input_source[e].type)return!0;return!1}showCalibration(e){this.setState({sDeviceToCalibrate:e})}GetThumbstickDeadzoneSetting(){let e=u.I.GetDeviceInfo("/user/hand/left");return e||(e=u.I.GetDeviceInfo("/user/hand/right")),e&&(this.shouldShowThumbstickCalibrateForHand("/user/hand/left")||this.shouldShowThumbstickCalibrateForHand("/user/hand/right"))?"/settings/input/thumbstickDeadzone_"+e.controller_type:null}show(){this.setState({bShowingModal:!0})}hide(){this.closeCalibrator(),this.setState({bShowingModal:!1})}render(){let e=this.GetThumbstickDeadzoneSetting(),t=0;return e&&l.G3.settings.has(e)&&l.G3.settings.get(e),o.createElement(o.Fragment,null,o.createElement(c.GV,{className:"SettingsItem"},o.createElement(d.z,{className:"ButtonControl",onClick:this.show},(0,a.Xx)("#Settings_ShowThumbstickSettings"))),this.state.bShowingModal&&o.createElement(c.TB,{header:(0,a.Xx)("#Settings_ThumbstickSettings"),onDismissRequested:this.hide},null!==this.state.sDeviceToCalibrate&&o.createElement(S,{devicePath:this.state.sDeviceToCalibrate,fnCloseCalibrator:this.closeCalibrator,fnUpdateThumbstickCalibration:this.updateCalibration}),_.devices.map((e=>{if(!this.shouldShowThumbstickCalibrateForHand(e.sDevicePath))return o.createElement(c.GV,{key:e.sDevicePath,title:(0,a.Xx)("#Settings_General_CalibrateThumbstick_ConnectAController"),className:"SettingsItem CalibrateThumbstickItem"},o.createElement("div",{className:"Label"},(0,a.Xx)(e.sThumbstickAngleLabelPlaceholderUnlocalized)),o.createElement(d.z,{className:"ButtonControl",enabled:!1},(0,a.Xx)("#Settings_General_Calibrate")));let t=l.G3.settings.get(this.getThumbstickRotationSetting(e.sDevicePath));return null==t&&(t=0),o.createElement(c.GV,{key:e.sDevicePath,className:"SettingsItem CalibrateThumbstickItem"},o.createElement("div",{className:"Label"},(0,a.Xx)(e.sThumbstickAngleLabelUnlocalized,t.toFixed(1))),o.createElement(d.z,{className:"ButtonControl",onClick:()=>{this.showCalibration(e.sDevicePath)}},(0,a.Xx)("#Settings_General_Calibrate")))})),e&&o.createElement(c.U4,{min:0,max:.5,step:.01,valueStyleVariant:b.px.OnHandle,renderValue:e=>(100*e).toFixed(0)+"%",name:e,label:(0,a.Xx)("#Settings_ThumbstickDeadzone_Text"),title:(0,a.Xx)("#Settings_ThumbstickDeadzone_Desc")})))}};T.devices=[{sDevicePath:"/user/hand/left",sThumbstickAngleSettingPathPrefix:"/settings/input/leftThumbstickRotation_",sThumbstickAngleLabelUnlocalized:"#Settings_General_LeftThumbstickAngle",sThumbstickAngleLabelPlaceholderUnlocalized:"#Settings_General_LeftThumbstickAngle_NoValue"},{sDevicePath:"/user/hand/right",sThumbstickAngleSettingPathPrefix:"/settings/input/rightThumbstickRotation_",sThumbstickAngleLabelUnlocalized:"#Settings_General_RightThumbstickAngle",sThumbstickAngleLabelPlaceholderUnlocalized:"#Settings_General_RightThumbstickAngle_NoValue"}],(0,i.gn)([s.ak],T.prototype,"resetToDefaults",null),(0,i.gn)([s.ak],T.prototype,"closeCalibrator",null),(0,i.gn)([s.ak],T.prototype,"updateCalibration",null),(0,i.gn)([s.ak],T.prototype,"showCalibration",null),(0,i.gn)([s.ak],T.prototype,"show",null),(0,i.gn)([s.ak],T.prototype,"hide",null),T=_=(0,i.gn)([r.Pi],T);let P=v=class extends o.Component{constructor(e){super(e),this.m_mailbox=new p.Nv,this.m_routeObservingAutorunDisposer=null,this.m_refAppSelectDropdown=o.createRef(),this.state={currentBindingApp:null,currentControllerType:h.c6.GetBestControllerType(),currentActionManifest:null,currentBinding:null,rCurrentBindingList:null,bForceToggleToCustom:!1,eDominantHand:null},this.m_mailbox.Init("settings_binding_manager")}componentDidMount(){this.setState({currentControllerType:h.c6.GetBestControllerType()}),this.m_bindingSubscriptionChangedCanaryDisposer=(0,m.N7)(h.c6,"BindingSubscriptionChangedCanary",(e=>{this.updateStateForApp(this.state.currentBindingApp)})),this.m_routeObservingAutorunDisposer=(0,m.EH)((()=>{var e;if(this.shouldShowModal){const t=this.currentRouteAppKey;t&&(null===(e=this.m_refAppSelectDropdown.current)||void 0===e||e.setCurrentApp(t))}}))}componentWillUnmount(){this.m_bindingSubscriptionChangedCanaryDisposer&&(this.m_bindingSubscriptionChangedCanaryDisposer(),this.m_bindingSubscriptionChangedCanaryDisposer=null),this.m_routeObservingAutorunDisposer&&(this.m_routeObservingAutorunDisposer(),this.m_routeObservingAutorunDisposer=null)}static OpenDeepLink(e,t){l.G3.setRoute(e,v.PAGE_SECTION,t?[t]:null),null===VRHTML||void 0===VRHTML||VRHTML.ShowSettingsUI()}get shouldShowModal(){return l.G3.routePageSection==v.PAGE_SECTION}get currentRouteAppKey(){const e=l.G3.routePageSectionParams;return e.length>=1?e[0]:null}loadAppActionManifest(e){return(0,i.mG)(this,void 0,void 0,(function*(){let t=yield(0,h._l)(e);if(t.error)throw new Error(t.error);return t}))}loadBindingConfig(e,t){return(0,i.mG)(this,void 0,void 0,(function*(){return(yield(0,h.Cl)(e,this.state.currentControllerType.controller_type,t.current_binding_url[this.state.currentControllerType.controller_type])).binding_config}))}updateStateForApp(e){return(0,i.mG)(this,void 0,void 0,(function*(){this.state.currentBindingApp&&e.key==this.state.currentBindingApp.key||this.setState({currentBindingApp:e,currentActionManifest:null,currentBinding:null,rCurrentBindingList:null,bForceToggleToCustom:!1});let t=yield this.loadAppActionManifest(e.key);if(this.setState({currentActionManifest:t,bForceToggleToCustom:!1}),t.supports_dominant_hand_setting){let t=yield l.G3.GetAppSettings(e.key);this.setState({eDominantHand:t.dominant_hand})}else this.setState({eDominantHand:void 0});let n=yield this.loadBindingConfig(e.key,t);this.setState({currentBinding:n})}))}loadBindingListForApp(e){return(0,i.mG)(this,void 0,void 0,(function*(){let t=this.state.currentControllerType,n=yield h.c6.QueryBindingList(e.key,t?t.controller_type:"");if(!n.success)throw new Error(n.error);return n.results}))}onApplicationDropdownChange(e){return(0,i.mG)(this,void 0,void 0,(function*(){this.setState(((t,n)=>{var i;if(t.currentBindingApp===e)return null;e&&this.updateStateForApp(e),l.G3.setRoutePageSectionParams([null!==(i=null==e?void 0:e.key)&&void 0!==i?i:""])}))}))}onToggleDefaultCustomBinding(e){return(0,i.mG)(this,void 0,void 0,(function*(){const t=(e?this.state.currentActionManifest.previous_binding_url:this.state.currentActionManifest.default_bindings)[this.state.currentControllerType.controller_type];t?yield h.c6.SelectConfig(this.state.currentBindingApp.key,this.state.currentControllerType.controller_type,t):this.setState({bForceToggleToCustom:!0})}))}showBindingDetail(e){let t={type:"show_app_binding",app_key:this.state.currentBindingApp.key};e&&(t.controller_type=this.state.currentControllerType.controller_type);let n="bindingui/"+p.qA[(0,p.Op)()];this.m_mailbox.SendMessage(n,t)}show(){l.G3.setRoutePageSection(v.PAGE_SECTION)}close(){l.G3.setRoutePageSection(null)}showBindingCallouts(){var e,t;let n=null!==(e=this.state.currentBindingApp?this.state.currentBindingApp.key:null)&&void 0!==e?e:null!==(t=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRApplications.GetSceneApplicationKey())&&void 0!==t?t:"openvr.component.vrcompositor",i={type:"request_binding_callouts",returnAddress:this.m_mailbox.name,app_key:n,controller_type:this.state.currentControllerType.controller_type};this.m_mailbox.SendMessage(A.Ml,i)}onToggleDominantHand(e){let t=e?p.Kg.TrackedControllerRole_RightHand:p.Kg.TrackedControllerRole_LeftHand;this.setAppState("dominant_hand",t),this.setState({eDominantHand:t})}setAppState(e,t){if(null!=this.state.currentBindingApp){let n={};n[e]=t,l.G3.SetAppSettings(this.state.currentBindingApp.key,n)}}render(){var e,t;let n="",i="";try{n=this.state.currentActionManifest.current_binding_url[this.state.currentControllerType.controller_type],i=this.state.currentActionManifest.default_bindings[this.state.currentControllerType.controller_type]}catch(e){}const s=this.state.bForceToggleToCustom||!i||i!=n,r=(null===(e=this.state.currentActionManifest)||void 0===e?void 0:e.supports_dominant_hand_setting)&&null!=this.state.eDominantHand,l=this.state.eDominantHand==p.Kg.TrackedControllerRole_RightHand;return o.createElement(o.Fragment,null,o.createElement(c.GV,{className:"SettingsItem"},o.createElement(d.z,{className:"ButtonControl",onClick:this.show},(0,a.Xx)("#Settings_Controller_AdvancedControllerSettings"))),this.shouldShowModal&&o.createElement(c.TB,{className:"BindingsModal",header:o.createElement(o.Fragment,null,o.createElement("h1",null,(0,a.Xx)("#Settings_ManageControllerBindingSettingsForApp")),o.createElement(c.YL,{ref:this.m_refAppSelectDropdown,defaultAppKey:null!==(t=this.currentRouteAppKey)&&void 0!==t?t:null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRApplications.GetSceneApplicationKey(),stateKey:"settings_controller_binding",showCompositor:!0,defaultLabel:(0,a.Xx)("#Settings_PerApplication_ChooseApplication"),onChange:this.onApplicationDropdownChange})),subheader:u.I.IsSteamAvailable?null:(0,a.Xx)("#Settings_NeedSteamTo_ViewAndEditBindings"),onDismissRequested:this.close},this.state.currentControllerType&&o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},(0,a.Xx)("#Settings_ActiveController")),o.createElement("div",{className:"Label"},u.I.LocalizeDriverString(this.state.currentControllerType.resource_root,this.state.currentControllerType.controller_type))),!u.I.IsSteamAvailable&&this.state.currentBinding&&o.createElement(c.GV,{className:"SettingsItem"},o.createElement("div",{className:"Label"},(0,a.Xx)("#Settings_ActiveBinding")),o.createElement("div",{className:"Label"},this.state.currentBinding.name)),u.I.IsSteamAvailable&&o.createElement(c.wy,{label:(0,a.Xx)("#Settings_ActiveControllerBinding"),offLabel:(0,a.Xx)("#Settings_Controller_DefaultBinding"),onLabel:(0,a.Xx)("#Settings_Controller_CustomBinding"),onChange:this.onToggleDefaultCustomBinding,value:s,onSubsection:o.createElement(o.Fragment,null,(!n||!this.state.currentBinding)&&o.createElement("div",{className:"SettingsItem Label"},(0,a.Xx)("#Settings_Loading_CurrentBinding")),s&&o.createElement("div",{className:"SettingsItem ButtonRow BindingButtonRow"},o.createElement(c.ls,{icon:c.uc.PopOut,enabled:u.I.IsSteamAvailable&&Boolean(n),onClick:this.showBindingDetail.bind(this,!0)},(0,a.Xx)("#Settings_EditBinding")),o.createElement(c.ls,{icon:c.uc.PopOut,enabled:u.I.IsSteamAvailable,onClick:this.showBindingDetail.bind(this,!1)},(0,a.Xx)("#Settings_EditBinding_ChooseAnother"))))}),o.createElement("div",{className:"Spacer"}),this.state.currentBinding&&o.createElement(E,{appKey:this.state.currentBindingApp.key}),r&&o.createElement(c.wy,{label:(0,a.Xx)("#Settings_DominantHand"),offLabel:(0,a.Xx)("#Settings_DominantHand_Left"),onLabel:(0,a.Xx)("#Settings_DominantHand_Right"),onChange:this.onToggleDominantHand,value:l})))}};P.PAGE_SECTION="appcontrollerbindings",(0,i.gn)([m.Fl],P.prototype,"shouldShowModal",null),(0,i.gn)([m.Fl],P.prototype,"currentRouteAppKey",null),(0,i.gn)([s.ak],P.prototype,"onApplicationDropdownChange",null),(0,i.gn)([s.ak],P.prototype,"onToggleDefaultCustomBinding",null),(0,i.gn)([s.ak],P.prototype,"showBindingDetail",null),(0,i.gn)([s.ak],P.prototype,"show",null),(0,i.gn)([s.ak],P.prototype,"close",null),(0,i.gn)([s.ak],P.prototype,"showBindingCallouts",null),(0,i.gn)([s.ak],P.prototype,"onToggleDominantHand",null),P=v=(0,i.gn)([r.Pi],P);const E=e=>o.createElement(c.GV,{className:"SettingsItem"},o.createElement(d.z,{className:"ButtonControl",onClick:()=>{var t,n;return l.G3.showBindingCallouts(null!==(t=e.appKey)&&void 0!==t?t:null!==(n=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRApplications.GetSceneApplicationKey())&&void 0!==n?n:"openvr.component.vrcompositor")}},(0,a.Xx)((0,p.Op)()==p.qA.Overlay?"#Settings_Controller_ShowBindingCallouts":"#Settings_Controller_ShowBindingCalloutsInVR")));let L=class extends o.Component{constructor(e){super(e),this.m_mailbox=new p.Nv,this.state={bShowingModal:!1,dongles:[],isPairing:!1},this.m_mailbox=new p.Nv,this.m_mailbox.Init("PairControllersModal").then((()=>{this.m_mailbox.RegisterHandler("discover_dongles_response",this.OnDiscoverDonglesResponse)})).catch((e=>{console.log("Failed to open PairControllersModal mailbox "+e)}))}OnDiscoverDonglesResponse(e){console.log("OnDiscoverDonglesResponse "+e),this.setState({dongles:e.dongles,isPairing:e.isPairing})}DiscoverDongles(){let e={type:"discover_dongles",returnAddress:this.m_mailbox.name};this.m_mailbox.SendMessage("lighthouse_pairing",e)}StartPairing(e){let t={type:"start_pairing",returnAddress:this.m_mailbox.name,serial:e,timeoutSeconds:10,sendStatusUpdates:!0};this.m_mailbox.SendMessage("lighthouse_pairing",t),this.setState({isPairing:!0}),console.log("StartPairing "+e)}show(){this.DiscoverDongles(),this.setState({bShowingModal:!0})}hide(){this.setState({bShowingModal:!1})}render(){const e=0==this.state.dongles.length;let t=[];for(let e of this.state.dongles){let n=o.createElement("div",{key:e.serial,className:"ButtonRow"},"Dongle ",e.serial," connected to ",e.connectedSerial,!this.state.isPairing&&o.createElement(d.z,{className:"ButtonControl",onClick:()=>this.StartPairing(e.serial)}," ",(0,a.Xx)("#Settings_Controller_Pair")," "),e.isPairing&&o.createElement("h2",null," ",(0,a.Xx)("#Settings_Controller_Pairing")," "));t.push(n)}return o.createElement(o.Fragment,null,o.createElement(c.GV,{className:"SettingsItem"},o.createElement(d.z,{className:"ButtonControl",onClick:this.show},(0,a.Xx)("#Settings_Controller_PairControllers"))),this.state.bShowingModal&&o.createElement(c.TB,{header:(0,a.Xx)("#Settings_Controller_ControllerPairingSection"),onDismissRequested:this.hide},o.createElement(o.Fragment,null,t),e&&o.createElement("h1",null,"No controller dongles detected.")))}};(0,i.gn)([s.ak],L.prototype,"OnDiscoverDonglesResponse",null),(0,i.gn)([s.ak],L.prototype,"DiscoverDongles",null),(0,i.gn)([s.ak],L.prototype,"StartPairing",null),(0,i.gn)([s.ak],L.prototype,"show",null),(0,i.gn)([s.ak],L.prototype,"hide",null),L=(0,i.gn)([r.Pi],L);let D=class extends c.d9{constructor(e){super(e),this.m_mailbox=new p.Nv,this.m_refControllerSettingsSection=o.createRef(),this.m_mailbox.Init("settings_controller_page")}ResetToDefaults(){super.ResetToDefaults(),this.m_refControllerSettingsSection.current&&this.m_refControllerSettingsSection.current.resetToDefaults()}render(){var e,t;if(!this.props.active)return null;const n=null!==(e=l.G3.settings.get("/settings/dashboard/allowInHeadsetControllerPairing"))&&void 0!==e&&e,i=null!==(t=l.G3.settings.get("/settings/dashboard/showControllerTrackingReset"))&&void 0!==t&&t;return o.createElement(o.Fragment,null,o.createElement(E,null),o.createElement(P,null),o.createElement(M,null),o.createElement(T,{ref:this.m_refControllerSettingsSection}),o.createElement(k,null),o.createElement(C,null),o.createElement(w,null),o.createElement(R,{mailbox:this.m_mailbox}),n&&o.createElement(L,null),i&&o.createElement(d.z,{className:"ButtonControl",onClick:()=>this.m_mailbox.SendMessage("controller_tracking",{type:"reset_persistent_calibration"})},(0,a.Xx)("#Settings_Controller_ResetTracking")))}};D.Name="controller_settings",(0,i.gn)([s.ak],D.prototype,"ResetToDefaults",null),D=(0,i.gn)([r.Pi],D)},8052:(e,t,n)=>{n.d(t,{D3:()=>M,Ei:()=>B,GV:()=>C,TB:()=>x,U4:()=>E,U5:()=>F,VK:()=>o,Xp:()=>T,YL:()=>G,d9:()=>w,hR:()=>I,ls:()=>H,t0:()=>P,uc:()=>N,vE:()=>D,wy:()=>R});var i,o,s=n(655),r=n(7294),a=n(7056),l=n(3868),c=n(2188),d=n(7062),p=n(3446),u=n(6321),h=n(7264),m=n(1818),g=n(1058),S=n(1415),_=n(1307),v=n(8325),f=n(197),y=n(6889),b=n(1219),A=n(9392);!function(e){e[e.Normal=0]="Normal",e[e.Advanced=1]="Advanced",e[e.Desktop=2]="Desktop",e[e.VR=3]="VR"}(o||(o={}));let C=class extends r.Component{constructor(e){super(e)}render(){let e=Object.assign({},this.props);delete e.label,delete e.subsection,delete e.visibility;let t=this.props.visibility==o.Advanced;switch(this.props.visibility){case o.Desktop:t=(0,u.Op)()!=u.qA.Desktop;break;case o.VR:t=(0,u.Op)()!=u.qA.Overlay}return t&&!p.G3.showAdvancedSettings?null:(this.props.visibility==o.Advanced&&(e.className=(0,g.LJ)(e.className,"Advanced")),r.createElement("div",e,this.props.children))}};C=(0,s.gn)([d.Pi],C);class w extends r.Component{constructor(e){super(e)}makeSettingComponent(e){if(e.requires)for(let t in e.requires){let n=e.requires[t];if(p.G3.settings.get(t)!=n)return null}switch(e.control){case"checkbox":return r.createElement(k,{key:e.name,name:e.name,label:e.label?(0,l.Xx)(e.label):"",title:e.text?(0,l.Xx)(e.text):""});case"toggle":return r.createElement(R,{key:e.name,name:e.name,swapOnOff:e.inverted,label:e.label?(0,l.Xx)(e.label):"",title:e.text?(0,l.Xx)(e.text):""});case"select":let t=e.options.filter((e=>null!=e)).map(((e,t)=>({value:e.value,sLabel:(0,l.Xx)(e.label)})));return r.createElement(T,{key:e.name,name:e.name,label:e.label?(0,l.Xx)(e.label):"",title:e.text?(0,l.Xx)(e.text):"",items:t});case"radio":let n=e.options.filter((e=>null!=e)).map(((e,t)=>({sValue:e.value,sTitle:(0,l.Xx)(e.label)})));return r.createElement(P,{key:e.name,name:e.name,label:e.label?(0,l.Xx)(e.label):"",items:n});case"scale":case"none":default:return r.createElement("div",{key:e.name});case"slider":return r.createElement(E,{key:e.name,name:e.name,label:e.label?(0,l.Xx)(e.label):"",min:e.min?e.min:0,max:e.max?e.max:100,step:e.step?e.step:5,renderValue:e=>"number"==typeof e?e.toString():JSON.stringify(e)})}}makeResetToDefaultButton(){return r.createElement("div",{className:"SettingsItem Button ResetDefaultButton"},r.createElement(m.z,{className:"ButtonControl",onClick:this.ResetToDefaults},(0,l.Xx)("#Settings_ResetPageToDefault")))}ResetToDefaults(){for(let e of this.props.section.values)null!=e.name&&p.G3.SetSettingsValue(e.name,null)}get schemaComponents(){if(!this.props.section.values)return null;let e=[];for(let t of this.props.section.values)if(t.control){let n=this.makeSettingComponent(t);n&&e.push(n)}return e}GetComponentsForGroup(e){let t=[];for(let n of this.props.section.values)if(n.control&&n.group==e){let e=this.makeSettingComponent(n);e&&t.push(e)}return r.createElement("div",null,t)}render(){return this.props.active?r.createElement(r.Fragment,null,this.schemaComponents,this.makeResetToDefaultButton()):null}}(0,s.gn)([a.ak],w.prototype,"ResetToDefaults",null),(0,s.gn)([c.Fl],w.prototype,"schemaComponents",null);let k=class extends r.Component{constructor(e){if(super(e),void 0!==this.props.name&&void 0!==this.props.value)throw new Error("SettingsCheckbox cannot have both an explicit value and a settings name set in props.")}handleChange(e){let t=e.target.checked;this.props.name&&p.G3.SetSettingsValue(this.props.name,t),this.props.onChange&&this.props.onChange(t),m.q.temporarilySuppressSoundEffect(),h.G.Instance.playSound(h.y.ButtonClick)}render(){let e=!!this.props.value;return this.props.name&&(e=!!p.G3.settings.get(this.props.name)),r.createElement("div",{className:"FlexRow SettingsItem Checkbox"},r.createElement("label",{className:"SettingsCheckboxContainer FlexRow"},r.createElement("input",{type:"checkbox",checked:e,onChange:this.handleChange}),r.createElement("div",{className:"FlexColumn"},this.props.label&&r.createElement("div",{className:"Label"},this.props.label),this.props.title&&r.createElement("div",{className:"Label Description"},this.props.title))))}};(0,s.gn)([a.ak],k.prototype,"handleChange",null),k=(0,s.gn)([d.Pi],k);let M=class extends r.Component{constructor(e){if(super(e),this.state={nMouseDownIndex:0},void 0!==this.props.name&&void 0!==this.props.value)throw new Error("SettingsSegmentedControl cannot have both an explicit value and a settings name set in props.");if(void 0!==this.props.subsection&&void 0!==this.props.valueSubsections)throw new Error("SettingsSegmentedControl cannot have both a constantly-visible subsection and value-dependent subsections (valueSubsections) set in props.")}getCurrentValue(){return this.props.name?p.G3.settings.get(this.props.name):this.props.value}onItemClick(e){let t=e.value;if(this.ValuesAreEqual(t,this.getCurrentValue())){if(2!=this.props.items.length)return;t=this.props.items.find((e=>!this.ValuesAreEqual(e.value,t))).value}this.props.name&&p.G3.SetSettingsValue(this.props.name,t),this.props.onChange&&this.props.onChange(t),(0,u.Op)()==u.qA.Overlay&&(m.q.temporarilySuppressSoundEffect(),h.G.Instance.playSound(h.y.ButtonClick)),this.props.requiresRestart&&p.G3.SetRestartRequired()}onGroupMouseEnter(){2==this.props.items.length&&(0,u.Op)()==u.qA.Overlay&&_.LJ.Instance.triggerHaptic(_.Kf.ButtonEnter)}onGroupMouseLeave(){2==this.props.items.length&&(0,u.Op)()==u.qA.Overlay&&_.LJ.Instance.triggerHaptic(_.Kf.ButtonLeave)}onOptionMouseEnter(){2!=this.props.items.length&&(0,u.Op)()==u.qA.Overlay&&_.LJ.Instance.triggerHaptic(_.Kf.ButtonEnter)}onOptionMouseLeave(){2!=this.props.items.length&&(0,u.Op)()==u.qA.Overlay&&_.LJ.Instance.triggerHaptic(_.Kf.ButtonLeave)}ValuesAreEqual(e,t){return"boolean"!=typeof e&&"boolean"!=typeof t||(e=!!e,t=!!t),e===t}render(){var e,t,n;const i=this.getCurrentValue(),o=this.props.items.findIndex((e=>this.ValuesAreEqual(e.value,i))),s=null!==(n=null===(t=null===(e=this.props.valueSubsections)||void 0===e?void 0:e.find((e=>this.ValuesAreEqual(e.value,i))))||void 0===t?void 0:t.subsection)&&void 0!==n?n:this.props.subsection,a=!!s;return r.createElement(C,{className:(0,g.LJ)("SettingsItem","SegmentedControl"),title:this.props.title,visibility:this.props.visibility},r.createElement("div",{className:"Label"},this.props.label),r.createElement("div",{className:(0,g.LJ)("SubsectionStem",["Hidden",!a])},r.createElement("div",{className:(0,g.LJ)("SegmentedControlGroup",["DualValue",2==this.props.items.length]),style:{"--item-count":this.props.items.length,"--item-value-index":o,"--toggle-control-translate-x-direction":0==o?1:o==this.props.items.length-1?-1:this.state.nMouseDownIndex>o?1:this.state.nMouseDownIndex<o?-1:0},onMouseEnter:this.onGroupMouseEnter,onMouseLeave:this.onGroupMouseLeave},this.props.items.map(((e,t)=>r.createElement("div",{key:t,className:(0,g.LJ)("SegmentedControlGroupOption",["Active",this.ValuesAreEqual(e.value,i)]),onClick:()=>this.onItemClick(e),onMouseDown:()=>this.setState({nMouseDownIndex:t}),onMouseEnter:this.onOptionMouseEnter,onMouseLeave:this.onOptionMouseLeave},r.createElement("span",null,e.sLabel)))))),!!s&&r.createElement("div",{className:"Subsection WithStem"},s))}};(0,s.gn)([a.ak],M.prototype,"onGroupMouseEnter",null),(0,s.gn)([a.ak],M.prototype,"onGroupMouseLeave",null),(0,s.gn)([a.ak],M.prototype,"onOptionMouseEnter",null),(0,s.gn)([a.ak],M.prototype,"onOptionMouseLeave",null),M=(0,s.gn)([d.Pi],M);let R=class extends r.Component{constructor(e){if(super(e),void 0!==this.props.name&&void 0!==this.props.value)throw new Error("SettingsToggle cannot have both an explicit value and a settings name set in props.");if(void 0!==this.props.subsection&&(void 0!==this.props.onSubsection||void 0!==this.props.offSubsection))throw new Error("SettingsToggle cannot have both a constantly-visible subsection and an onSubsection/offSubsection set in props.")}render(){var e,t;const n=!!this.props.swapOnOff,i=!this.props.swapOnOff;return r.createElement(M,{name:this.props.name,label:this.props.label,title:this.props.title,items:[{value:n,sLabel:null!==(e=this.props.offLabel)&&void 0!==e?e:(0,l.Xx)("#Settings_ToggleButton_Off")},{value:i,sLabel:null!==(t=this.props.onLabel)&&void 0!==t?t:(0,l.Xx)("#Settings_ToggleButton_On")}],value:this.props.value,onChange:this.props.onChange,requiresRestart:this.props.requiresRestart,subsection:this.props.subsection,valueSubsections:this.props.subsection?void 0:[{value:n,subsection:this.props.offSubsection},{value:i,subsection:this.props.onSubsection}],visibility:this.props.visibility})}};R=(0,s.gn)([d.Pi],R);let T=class extends r.Component{constructor(e){if(super(e),void 0!==this.props.name&&void 0!==this.props.value)throw new Error("SettingsDropdown cannot have both an explicit value and a settings name set in props.")}get value(){return this.props.name?p.G3.settings.get(this.props.name):void 0!==this.props.value?this.props.value:null}onChange(e){this.props.name&&p.G3.SetSettingsValue(this.props.name,e.toString()),this.props.onChange&&this.props.onChange(e),this.props.requiresRestart&&p.G3.SetRestartRequired()}render(){let e=Object.assign({},this.props);return e.onChange=this.onChange,e.value=this.value,r.createElement(C,{className:"SettingsItem",title:this.props.title,visibility:this.props.visibility},this.props.label&&r.createElement("div",{className:(0,g.LJ)("Label",["Spanning",this.props.fullWidth])},this.props.label),r.createElement("div",{className:(0,g.LJ)("SubsectionStem",["Hidden",!this.props.subsection])},r.createElement(v.Lt,Object.assign({},e))),!!this.props.subsection&&r.createElement("div",{className:"Subsection WithStem"},this.props.subsection))}};(0,s.gn)([c.Fl],T.prototype,"value",null),(0,s.gn)([a.ak],T.prototype,"onChange",null),T=(0,s.gn)([d.Pi],T);let P=class extends r.Component{constructor(e){if(super(e),void 0!==this.props.name&&void 0!==this.props.value)throw new Error("SettingsRadioButtons cannot have both an explicit value and a settings name set in props.")}get value(){return this.props.name?p.G3.settings.get(this.props.name):void 0!==this.props.value?this.props.value:null}onChange(e){this.props.name&&p.G3.SetSettingsValue(this.props.name,e.toString()),this.props.onChange&&this.props.onChange(e)}render(){const e=this.props.items.map(((e,t)=>{const n=this.props.comparator?this.props.comparator(this.value,e.value):this.value==e.value;return r.createElement(m.z,{className:(0,g.LJ)("RadioButton",["Selected",n]),key:t,enabled:!n,onClick:()=>this.onChange(e.value)},r.createElement("div",{className:"Label"},e.sLabel))}));return r.createElement(C,{className:(0,g.LJ)("SettingsItem","RadioButtons"),title:this.props.title},r.createElement("div",{className:"Label"},this.props.label),r.createElement("div",{className:"RadioButtonsSet"},e))}};(0,s.gn)([c.Fl],P.prototype,"value",null),(0,s.gn)([a.ak],P.prototype,"onChange",null),P=(0,s.gn)([d.Pi],P);let E=class extends r.Component{constructor(e){if(super(e),void 0!==this.props.name&&void 0!==this.props.value)throw new Error("SettingsSlider cannot have both an explicit value and a settings name set in props.");this.state={},this.m_sUniqueIdForFadeSupression=Math.random().toString()}onInteractionStart(){var e,t;this.props.dashboardFadeSupression&&p.G3.SetDashboardFadeSupression(this.m_sUniqueIdForFadeSupression,!0),null===(t=(e=this.props).onInteractionStart)||void 0===t||t.call(e)}onInteractionEnd(){var e,t;this.props.dashboardFadeSupression&&p.G3.SetDashboardFadeSupression(this.m_sUniqueIdForFadeSupression,!1),null===(t=(e=this.props).onInteractionEnd)||void 0===t||t.call(e)}get value(){if(this.props.name){return p.G3.settings.get(this.props.name)||0}return this.props.value}onChange(e){var t,n;this.props.name&&p.G3.SetSettingsValue(this.props.name,e.toString()),null===(n=(t=this.props).onChange)||void 0===n||n.call(t,e)}render(){let e=Object.assign({},this.props);return e.onInteractionStart=this.onInteractionStart,e.onInteractionEnd=this.onInteractionEnd,e.onChange=this.onChange,e.value=this.value,r.createElement(C,{className:(0,g.LJ)("SettingsItem","Slider",this.props.additionalClassName),title:this.props.title},this.props.label&&r.createElement("label",{className:(0,g.LJ)("Label",["Spanning",this.props.labelSpans])},this.props.label),r.createElement(b.iR,Object.assign({},e)))}};function L(e){return("#"+("0"+Math.floor(e.r).toString(16)).slice(-2)+("0"+Math.floor(e.g).toString(16)).slice(-2)+("0"+Math.floor(e.b).toString(16)).slice(-2)+("0"+Math.floor(255*e.a).toString(16)).slice(-2)).toUpperCase()}(0,s.gn)([a.ak],E.prototype,"onInteractionStart",null),(0,s.gn)([a.ak],E.prototype,"onInteractionEnd",null),(0,s.gn)([c.Fl],E.prototype,"value",null),(0,s.gn)([a.ak],E.prototype,"onChange",null),E=(0,s.gn)([d.Pi],E);let D=i=class extends r.Component{static HueToRGB(e,t,n){return 6*(n=(n+1)%1)<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}static HSLToRGB(e,t,n){e/=360;let o=n<=.5?n*(1+t):n+t-n*t,s=2*n-o;return[i.HueToRGB(s,o,e+1/3),i.HueToRGB(s,o,e),i.HueToRGB(s,o,e-1/3)]}static RGBtoHueLuminance(e,t,n){e/=255,t/=255,n/=255;let i=Math.max(e,t,n),o=Math.min(e,t,n),s=0,r=(i+o)/2;if(i!=o){let r=i-o;switch(i){case e:s=(t-n)/r+(t<n?6:0);break;case t:s=(n-e)/r+2;break;case n:s=(e-t)/r+4}s/=6}return{hue:360*s,luminance:r}}onSliderChanged(e){let t=[255,255,255];if(e<=360&&(t=i.HSLToRGB(e,1,.5).map((e=>255*e))),this.props.name){const e="#"+(t[2]|t[1]<<8|t[0]<<16).toString(16).padStart(6,"0");p.G3.SetSettingsValue(this.props.name,e)}this.props.nameR&&this.props.nameG&&this.props.nameB&&(p.G3.SetSettingsValue(this.props.nameR,t[0]),p.G3.SetSettingsValue(this.props.nameG,t[1]),p.G3.SetSettingsValue(this.props.nameB,t[2])),this.props.onChange&&this.props.onChange({r:t[0],g:t[1],b:t[2]})}render(){let e,t,n;this.props.nameR&&this.props.nameG&&this.props.nameB?(e=p.G3.settings.get(this.props.nameR),t=p.G3.settings.get(this.props.nameG),n=p.G3.settings.get(this.props.nameB)):this.props.value&&(e=this.props.value.r,t=this.props.value.g,n=this.props.value.b);const o=i.RGBtoHueLuminance(e,t,n),s=360/(1-i.WHITE_SIZE_PERCENT),a=255==e&&255==t&&255==n?s:o.hue;return r.createElement(E,{additionalClassName:"Hue",label:this.props.label,labelSpans:!0,title:this.props.text,styleVariant:b.uz.Color,renderValue:e=>e>360?"white":"hsl("+e+", 100%, 50%)",max:s,value:a,onChange:this.onSliderChanged})}};D.WHITE_SIZE_PERCENT=.03,(0,s.gn)([a.ak],D.prototype,"onSliderChanged",null),D=i=(0,s.gn)([d.Pi],D);let I=class extends r.Component{get value(){return this.props.name?p.G3.settings.get(this.props.name):this.props.value}onSliderChanged(e){this.props.onChange&&this.props.onChange(e),this.props.name&&p.G3.SetSettingsValue(this.props.name,e)}render(){const e=this.props.color?this.props.color:{r:255,g:255,b:255};return r.createElement(E,{additionalClassName:"Alpha",label:this.props.label,title:this.props.text,labelSpans:!0,styleVariant:b.uz.Color,renderValue:t=>"rgba("+e.r*t/this.props.max+","+e.g*t/this.props.max+","+e.b*t/this.props.max+",1)",sliderColor:"rgb("+e.r+","+e.g+","+e.b+")",min:this.props.min,max:this.props.max,value:this.value,onChange:this.onSliderChanged})}};(0,s.gn)([c.Fl],I.prototype,"value",null),(0,s.gn)([a.ak],I.prototype,"onSliderChanged",null),I=(0,s.gn)([d.Pi],I);let O,B=class extends r.Component{constructor(e){super(e),this.state={bShowingModal:!1}}get value(){if(this.props.name)return(e=p.G3.settings.get(this.props.name))?{r:parseInt(e.slice(1,3),16),g:parseInt(e.slice(3,5),16),b:parseInt(e.slice(5,7),16),a:parseInt(e.slice(7,9),16)/255}:{r:0,g:0,b:0,a:0};if(this.props.nameR||this.props.nameG||this.props.nameB||this.props.nameA){let e={r:0,g:0,b:0,a:1};return this.props.nameR&&(e.r=p.G3.settings.get(this.props.nameR)),this.props.nameG&&(e.g=p.G3.settings.get(this.props.nameG)),this.props.nameB&&(e.b=p.G3.settings.get(this.props.nameB)),this.props.nameA&&(e.a=p.G3.settings.get(this.props.nameA)/this.alphaScale),e}return this.props.value;var e}get alphaScale(){return void 0===this.props.alphaScale?1:this.props.alphaScale}onAlphaChange(e){const t=this.value,n={r:t.r,g:t.g,b:t.b,a:e};this.props.name&&p.G3.SetSettingsValue(this.props.name,L(n)),this.props.nameA&&p.G3.SetSettingsValue(this.props.nameA,e*this.alphaScale),this.props.onChange&&this.props.onChange(n)}get minA(){return void 0===this.props.minA?0:this.props.minA}get maxA(){return void 0===this.props.maxA?1:this.props.maxA}onColorChange(e){const t={r:e.r,g:e.g,b:e.b,a:this.value.a};this.props.name&&p.G3.SetSettingsValue(this.props.name,L(t)),this.props.nameR&&p.G3.SetSettingsValue(this.props.nameR,t.r),this.props.nameG&&p.G3.SetSettingsValue(this.props.nameG,t.g),this.props.nameB&&p.G3.SetSettingsValue(this.props.nameB,t.b),this.props.onChange&&this.props.onChange(t)}showModal(){this.setState({bShowingModal:!0})}hideModal(){this.setState({bShowingModal:!1})}render(){const e=this.value;return r.createElement(C,{className:"SettingsItem ColorPicker",title:this.props.title},this.props.label&&r.createElement("div",{className:"Label"},this.props.label),r.createElement(m.z,{className:"ButtonControl",onClick:this.showModal,style:{"--color-value-rgb":e.r+","+e.g+","+e.b,"--color-value-a":e.a}}),this.state.bShowingModal&&r.createElement(x,{onDismissRequested:this.hideModal,header:this.props.label},r.createElement(D,{label:(0,l.Xx)("#Settings_Chaperone_BoundsColor"),onChange:this.onColorChange,value:e}),r.createElement(I,{label:(0,l.Xx)("#Settings_Chaperone_BoundsTransparency"),min:this.minA,max:this.maxA,onChange:this.onAlphaChange,color:e,value:e.a})))}};(0,s.gn)([c.Fl],B.prototype,"value",null),(0,s.gn)([c.Fl],B.prototype,"alphaScale",null),(0,s.gn)([a.ak],B.prototype,"onAlphaChange",null),(0,s.gn)([c.Fl],B.prototype,"minA",null),(0,s.gn)([c.Fl],B.prototype,"maxA",null),(0,s.gn)([a.ak],B.prototype,"onColorChange",null),(0,s.gn)([a.ak],B.prototype,"showModal",null),(0,s.gn)([a.ak],B.prototype,"hideModal",null),B=(0,s.gn)([d.Pi],B);class V{constructor(){this.m_sceneApplicationStateChangedEventHandle=null,this.m_mapSelectedAppKeys={},this.m_mapCallbacks={},this.m_sceneApplicationStateChangedEventHandle=null===VRHTML||void 0===VRHTML?void 0:VRHTML.RegisterForSceneApplicationStateChangedEvents(this.onSceneApplicationStateChanged),this.onSceneApplicationStateChanged()}theresNoDestructor(){this.m_sceneApplicationStateChangedEventHandle&&(this.m_sceneApplicationStateChangedEventHandle.unregister(),this.m_sceneApplicationStateChangedEventHandle=null)}register(e,t){this.m_mapCallbacks[e]=t,t(this.m_mapSelectedAppKeys[e]||this.runningAppKey)}unregister(e){delete this.m_mapCallbacks[e]}setAppKey(e,t){this.m_mapSelectedAppKeys[e]=t}onSceneApplicationStateChanged(){var e;const t=null!==(e=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRApplications.GetSceneApplicationKey())&&void 0!==e?e:null;t!==this.runningAppKey&&(this.runningAppKey=t,this.m_mapSelectedAppKeys={},Object.values(this.m_mapCallbacks).forEach((e=>{e(this.runningAppKey)})))}}(0,s.gn)([c.LO],V.prototype,"runningAppKey",void 0),(0,s.gn)([a.ak],V.prototype,"onSceneApplicationStateChanged",null);class G extends r.Component{constructor(e){O||(O=new V),super(e),this.state={currentApp:null}}componentDidMount(){O.register(this.props.stateKey,this.onSceneApplicationStateChanged)}componentWillUnmount(){O.unregister(this.props.stateKey)}onSceneApplicationStateChanged(e){var t,n;const i=this.props.showCompositor?"openvr.component.vrcompositor":null,o=null!==(n=null!==(t=this.props.defaultAppKey)&&void 0!==t?t:e)&&void 0!==n?n:i;this.setCurrentApp(o)}setCurrentApp(e){const t=p.G3.apps&&p.G3.apps.find((t=>t.key==e));this.setState(((e,n)=>{var i;return(null===(i=e.currentApp)||void 0===i?void 0:i.key)===(null==t?void 0:t.key)?null:(this.props.onChange&&this.props.onChange(t),{currentApp:t})}))}makeAppChoiceList(){let e=[],t=" "+(0,l.Xx)("#Settings_PerApplication_DashboardSuffix");if(null!=p.G3.apps)for(let n of p.G3.apps){let i=!0;"openvr.component.vrcompositor"==n.key?i=!!this.props.showCompositor:n.key==f.Pv?i=!!this.props.showSteam:n.key==f.W4||n.key==f.jW?i=!!this.props.showSteamVR:n.key.startsWith("system.generated")?i=!!this.props.showGenerated:n.is_internal?i=!!this.props.showInternal:n.is_dashboard_overlay&&(i=!!this.props.showOverlays),(i||n.current_scene_process)&&e.push({value:n.key,sLabel:n.name+(n.is_dashboard_overlay?t:"")})}const n=e=>e.value==O.runningAppKey||"openvr.component.vrcompositor"==e.value,i=e.filter(n),o=e.filter((e=>!n(e)));return i.sort(((e,t)=>e.value==O.runningAppKey?-1:t.value==O.runningAppKey?1:"openvr.component.vrcompositor"==e.value?-1:"openvr.component.vrcompositor"==t.value?1:e.sLabel.localeCompare(t.sLabel))),o.sort(((e,t)=>e.sLabel.localeCompare(t.sLabel))),i.length>0&&o.length>0?[...i,v.Kr.Separator,...o]:i.length>0?i:o}onControllerDropdownChanged(e){O.setAppKey(this.props.stateKey,e),this.setCurrentApp(e)}render(){const e=this.makeAppChoiceList(),t=this.state.currentApp?this.state.currentApp.key:null;return r.createElement(T,{label:this.props.label,items:e,value:t,defaultLabel:this.props.defaultLabel||(0,l.Xx)("#Settings_PerApplication_ChooseApplication"),onChange:this.onControllerDropdownChanged,fullWidth:!0})}}(0,s.gn)([a.ak],G.prototype,"onSceneApplicationStateChanged",null),(0,s.gn)([a.ak],G.prototype,"onControllerDropdownChanged",null);const x=e=>{let t=Object.assign({},e),n=t.header;"string"==typeof n&&(n=r.createElement("h1",null,n));let i=t.subheader;"string"==typeof i&&(i=r.createElement("div",{className:"Label"},i));let o=t.footer;void 0===o&&(o=r.createElement(F,{onDismissRequested:t.onDismissRequested}));const s=t.allowableParentSelectors||[];return u.n0.IsSceneGraphApp||(t.allowableParentSelectors=[...s,".SettingsSidebarPageModalContainer"]),r.createElement(S.u,Object.assign({},t),n&&r.createElement("div",{className:"Subsection Top"},n),i&&r.createElement("div",{className:"Subsection Top Subheader"},i),e.children&&r.createElement(A.P,{scrollDirection:A.I.Vertical,className:"Subsection Body"},t.children),o&&r.createElement("div",{className:"Subsection Bottom"},o))},F=e=>{let t=e.leftControls?e.leftControls:[];e.showResetButton&&t.push(r.createElement(m.z,{key:"reset",className:"ButtonControl",onClick:e.onResetRequested},(0,l.Xx)("#Settings_ResetToDefault")));let n=[r.createElement(m.z,{key:"close",className:"ButtonControl",onClick:e.onDismissRequested},(0,l.Xx)("#Settings_General_Close"))];return r.createElement("div",{className:"SettingsItem ButtonRow"},t,t.length>0&&n.length>0&&r.createElement("div",{className:"Spacer"}),n)};var N;!function(e){e[e.PopOut=0]="PopOut"}(N||(N={}));const H=e=>{let t=null;return void 0!==e.icon&&e.icon===N.PopOut&&(t=r.createElement(y.u,{className:"Icon"})),r.createElement(m.z,Object.assign({className:(0,g.LJ)("ButtonControl",["WithIcon",null!==t])},e),r.createElement("span",null,e.children),t)}},505:(e,t,n)=>{n.d(t,{DX:()=>f,Dc:()=>y,RR:()=>w,TO:()=>k,Ux:()=>P,Yw:()=>E,nb:()=>A});var i,o=n(655),s=n(7294),r=n(2188),a=n(7056),l=n(3868),c=n(3446),d=n(8052),p=n(1818),u=n(6321),h=n(7062),m=n(1058),g=n(197),S=n(8325),_=n(1219);function v(){VRHTML?VRHTML.PromptUserForDirectMode(!0):window.open("vrmonitor://directmode/enable")}const f=(0,h.Pi)((()=>{if(!c.G3.systemInfo||0==c.G3.systemInfo.refresh_rates.actual_display_frequency)return null;if(c.G3.systemInfo.refresh_rates.supported_rates.length>1)return s.createElement(d.t0,{name:"/settings/steamvr/preferredRefreshRate",comparator:(e,t)=>Math.round(e)==Math.round(t),label:(0,l.Xx)("#Settings_Video_RefreshRate_Label_Hz"),items:c.G3.systemInfo.refresh_rates.supported_rates.map((e=>({value:e,sLabel:Math.round(e).toString()})))});{const e=c.G3.systemInfo.refresh_rates.supports_multiple_rates,t=c.G3.systemInfo.extended_mode,n=Math.round(c.G3.systemInfo.refresh_rates.actual_display_frequency);return s.createElement(d.GV,{className:"SettingsItem",title:e?null:(0,l.Xx)("#Settings_Video_RefreshRate_OneSupported")},s.createElement("div",{className:"Label"},(0,l.Xx)("#Settings_Video_RefreshRate_Header")),s.createElement("div",{className:(0,m.LJ)("Label",["SubsectionStem",e])},n+(0,l.Xx)("#Settings_Video_RefreshRate_HzSuffix")),e&&s.createElement("div",{className:"Subsection WithStem"},t&&(0,l.Xx)("#Settings_Video_RefreshRate_NotAvailableExtended"),t&&(0,u.Op)()!=u.qA.Overlay&&s.createElement(p.z,{className:"ButtonControl",onClick:v},(0,l.Xx)("#Settings_Video_RefreshRate_EnableDirectModeAction")),!t&&(0,l.Xx)("#Settings_Video_RefreshRate_NotFound")))}})),y=(0,h.Pi)((()=>{const e=c.G3.settings.get(g.bt),t=c.G3.settings.get(g.eW);let n=[],i=c.G3.settings.get(g.aT);if(i>0?n.push(i):n.push(1),null===e||null===t)return null;let o=null;if(c.G3.systemInfo&&null!=c.G3.systemInfo.render_target_size.width&&0!=c.G3.systemInfo.render_target_size.height){const e=c.G3.SliderposToSupersample(t);let n=Math.max(512,Math.floor(c.G3.systemInfo.render_target_size.width*Math.sqrt(e)+.5)),i=Math.max(512,Math.floor(c.G3.systemInfo.render_target_size.height*Math.sqrt(e)+.5));n=4*Math.trunc(n/4),i=4*Math.trunc(i/4),o=(0,l.Xx)("#Settings_Advanced_Supersampling_WidthByHeight",n,i)}return s.createElement(d.wy,{name:g.bt,label:(0,l.Xx)("#Settings_Advanced_Supersampling_Header"),onLabel:(0,l.Xx)("#Settings_Advanced_Supersampling_Auto"),offLabel:(0,l.Xx)("#Settings_Advanced_Supersampling_Custom"),title:e?"":(0,l.Xx)("#Explanation_Supersampling_Header"),swapOnOff:!0,offSubsection:s.createElement(s.Fragment,null,s.createElement(d.GV,{className:"SettingsItem"},s.createElement("div",{className:"Label"},(0,l.Xx)("#Settings_Advanced_Supersampline_ResolutionPerEye")),s.createElement("div",{className:"Label Right Resolution"},s.createElement("div",{className:"Dimensions"},o),s.createElement("div",{className:"Percentage"},Math.round(100*t).toString()+"%")),s.createElement(d.U4,{min:.2,max:5,step:.02,detents:n,value:t,onChange:e=>c.G3.SetSettingsValue(g.eW,e)})))})}));let b=class extends s.Component{constructor(e){super(e),this.state={bShowingModal:!1},this.m_sUniqueIdForFadeSupression=Math.random().toString()}componentWillUnmount(){this.state.bShowingModal&&c.G3.SetDashboardFadeSupression(this.m_sUniqueIdForFadeSupression,!1)}showModal(){this.setState({bShowingModal:!0}),c.G3.SetDashboardFadeSupression(this.m_sUniqueIdForFadeSupression,!0)}hideModal(){this.setState({bShowingModal:!1}),c.G3.SetDashboardFadeSupression(this.m_sUniqueIdForFadeSupression,!1)}render(){if(!VRHTML)return null;const e=VRHTML.VRProperties.GetStringProperty("/user/head",u.Uk.HmdColumnCorrectionSettingPrefix_String);if(!e)return null;if("firmware_update_required"==e)return s.createElement(d.GV,{title:(0,l.Xx)("#DisplaySettings_ColumnCorrectionDesc"),className:"SettingsItem",visibility:this.props.visibility},s.createElement("div",{className:"Label"},(0,l.Xx)("#DisplaySettings_ColumnCorrection")),s.createElement("div",{className:"Subsection WithStem"},s.createElement("div",{className:"Label"},(0,l.Xx)("#DisplaySettings_Error_FirmwareUpdateNeeded"))));{let t=c.G3.settings.get(g.zL);const n="/settings/driver_lighthouse/"+e+"_L",i="/settings/driver_lighthouse/"+e+"_R";let o=c.G3.settings.get(n);null==o&&(o=0);let r=c.G3.settings.get(i);return null==r&&(r=0),s.createElement(d.GV,{className:"SettingsItem",title:(0,l.Xx)("#DisplaySettings_ColumnCorrectionDesc"),visibility:this.props.visibility},s.createElement("div",{className:"Label"},(0,l.Xx)("#DisplaySettings_IndexColumnCorrection")),s.createElement(p.z,{className:"ButtonControl",onClick:this.showModal},(0,l.Xx)("#DisplaySettings_ColumnCorrectionEdit")),this.state.bShowingModal&&s.createElement(d.TB,{onDismissRequested:this.hideModal,allowableParentSelectors:[".SettingsMain"],header:(0,l.Xx)("#DisplaySettings_IndexColumnCorrection"),footer:s.createElement(d.U5,{showResetButton:!0,onResetRequested:()=>{c.G3.SetSettingsValue(g.zL,1),c.G3.SetSettingsValue(n,0),c.G3.SetSettingsValue(i,0)},onDismissRequested:this.hideModal})},s.createElement(d.wy,{value:0!=t,title:(0,l.Xx)("#DisplaySettings_ColumnCorrectionDesc"),label:(0,l.Xx)("#DisplaySettings_ColumnCorrection"),offLabel:(0,l.Xx)("#DisplaySettings_ColumnCorrectionOff"),onLabel:(0,l.Xx)("#DisplaySettings_ColumnCorrectionAuto"),onChange:e=>c.G3.SetSettingsValue(g.zL,e?1:0)}),s.createElement(d.U4,{label:(0,l.Xx)("#DisplaySettings_ColumnCorrectionBiasLeft"),min:-10,max:10,step:1,value:o,detents:[0],valueStyleVariant:_.px.OnHandle,renderValue:e=>e.toFixed(0),onChange:e=>c.G3.SetSettingsValue(n,e)}),s.createElement(d.U4,{label:(0,l.Xx)("#DisplaySettings_ColumnCorrectionBiasRight"),min:-10,max:10,step:1,value:r,detents:[0],valueStyleVariant:_.px.OnHandle,renderValue:e=>e.toFixed(0),onChange:e=>c.G3.SetSettingsValue(i,e)})))}}};(0,o.gn)([a.ak],b.prototype,"showModal",null),(0,o.gn)([a.ak],b.prototype,"hideModal",null),b=(0,o.gn)([h.Pi],b);const A=(0,h.Pi)((()=>{var e;if(!VRHTML)return null;if(!VRHTML.VRProperties.GetBoolProperty("/user/head",u.Uk.DisplaySupportsAnalogGain_Bool))return null;let t=c.G3.settings.get(g.bp);null==t&&(t=1);const n=null!==(e=VRHTML.VRProperties.GetFloatProperty("/user/head",u.Uk.DisplayMaxAnalogGain_Float))&&void 0!==e?e:1;return s.createElement(d.GV,{className:"SettingsItem"},s.createElement("div",{className:"Label"},(0,l.Xx)("#DisplaySettings_DisplayBrightness")),s.createElement(d.U4,{min:20,max:100*n,value:(i=t,i<0?0:i<1?100*Math.pow(i,1/2.2):100*i),detents:[100],valueStyleVariant:_.px.OnHandle,renderValue:e=>e.toFixed(0)+"%",onChange:e=>c.G3.SetSettingsValue(g.bp,function(e){return e<100?Math.pow(e/100,2.2):e/100}(e)),dashboardFadeSupression:!0}));var i}));class C extends s.Component{constructor(e){super(e)}render(){const e=null===VRHTML||void 0===VRHTML?void 0:VRHTML.GetRecommendedOverlayRenderQuality();return s.createElement(d.Xp,{name:"/settings/steamvr/overlayRenderQuality_2",label:(0,l.Xx)("#Settings_OverlayRenderQuality"),items:[{value:u.LL.Auto,sLabel:void 0!==e?(0,l.Xx)("#Settings_Auto_Parenthesized",(0,l.Xx)("#Settings_"+u.LL[e])):(0,l.Xx)("#Settings_Auto")},S.Kr.Separator,{value:u.LL.Low,sLabel:(0,l.Xx)("#Settings_Low")},{value:u.LL.Medium,sLabel:(0,l.Xx)("#Settings_Medium")},{value:u.LL.High,sLabel:(0,l.Xx)("#Settings_High")}],visibility:d.VK.Advanced})}}class w extends s.Component{constructor(e){super(e)}render(){return VRHTML&&VRHTML.VRProperties.GetBoolProperty("/user/head",u.Uk.DisplayAllowNightMode_Bool)?s.createElement(d.wy,{label:(0,l.Xx)("#Settings_NightModeCheck"),title:(0,l.Xx)("#Settings_NightModeDesc"),value:VRHTML.VRDashboardManager.GetNightModeEnabled(),onChange:e=>{null===VRHTML||void 0===VRHTML||VRHTML.VRDashboardManager.SetNightModeEnabled(e),this.forceUpdate()}}):null}}const k=()=>{if(!VRHTML)return null;if(VRHTML.VRProperties.GetBoolProperty("/user/head",u.Uk.HasDriverDirectModeComponent_Bool))return"oculus"===VRHTML.VRProperties.GetStringProperty("/user/head",u.Uk.TrackingSystemName_String)?null:s.createElement(d.wy,{name:"/settings/steamvr/motionSmoothing",label:(0,l.Xx)("#Settings_Advanced_MotionSmoothing_Header"),title:(0,l.Xx)("#Settings_Advanced_MotionSmoothing_Description")});if(VRHTML.VRClientInternal.GetGraphicsHardwareVendorInfo().bSupportsMotionSmoothing)return s.createElement(d.wy,{name:"/settings/steamvr/motionSmoothing",label:(0,l.Xx)("#Settings_Advanced_MotionSmoothing_Header"),title:(0,l.Xx)("#Settings_Advanced_MotionSmoothing_Description")});const e=c.G3.systemInfo&&c.G3.systemInfo.os_type>0&&c.G3.systemInfo.os_type<c._e,t=(0,l.Xx)(e?"#Settings_Advanced_MotionSmoothing_Disabled_Win7":"#Settings_Advanced_MotionSmoothing_Disabled");return s.createElement(d.GV,{className:"SettingsItem",title:t},s.createElement("div",{className:"Label"},(0,l.Xx)("#Settings_Advanced_MotionSmoothing_Header")),s.createElement("div",{className:"Label Right"},(0,l.Xx)("#Settings_NotSupported")))};var M,R;!function(e){e[e.UseGlobal=0]="UseGlobal",e[e.ForceOn=1]="ForceOn",e[e.ForceOff=2]="ForceOff",e[e.ForceAlwaysOn=3]="ForceAlwaysOn"}(M||(M={})),function(e){e[e.Off=0]="Off",e[e.Fine=1]="Fine",e[e.Normal=2]="Normal",e[e.Extreme=3]="Extreme"}(R||(R={}));const T={[R.Fine]:{min:.8,max:1.25,step:.001},[R.Normal]:{min:.5,max:2,step:.01},[R.Extreme]:{min:.1,max:10,step:.1},[R.Off]:{min:0,max:100,step:1}};let P=i=class extends s.Component{constructor(e){super(e),this.m_routeObservingAutorunDisposer=null,this.m_refAppSelectDropdown=s.createRef(),this.m_initialAppState=null,this.state={currentApp:null,nResolutionMultiplier:null,nFovScaleMultiplier:null,bShowRefreshRateOptions:null,nPreferredRefreshRate:null,eSmoothingMode:null,disableAsyncReprojection:null,bShowThrottleOptions:null,nFramesToThrottle:null,nAdditionalPrediction:null,eWorldScaleRange:R.Off,flWorldScaleMultiplier:null}}componentDidMount(){this.m_routeObservingAutorunDisposer=(0,r.EH)((()=>{var e;if(this.shouldShowModal){const t=this.currentRouteAppKey;t&&(null===(e=this.m_refAppSelectDropdown.current)||void 0===e||e.setCurrentApp(t))}}))}componentWillUnmount(){this.m_routeObservingAutorunDisposer&&(this.m_routeObservingAutorunDisposer(),this.m_routeObservingAutorunDisposer=null)}static OpenDeepLink(e,t){c.G3.setRoute(e,i.PAGE_SECTION,t?[t]:null),null===VRHTML||void 0===VRHTML||VRHTML.ShowSettingsUI()}get shouldShowModal(){return c.G3.routePageSection==i.PAGE_SECTION}get currentRouteAppKey(){const e=c.G3.routePageSectionParams;return e.length>=1?e[0]:null}get enableThrottleOverrideSettings(){return!(!VRHTML||!VRHTML.VRProperties.GetBoolProperty("/user/head",u.Uk.SupportsAppThrottling_Bool)||!VRHTML.VRProperties.GetBoolProperty("/user/head",u.Uk.HasDriverDirectModeComponent_Bool)&&this.state.disableAsyncReprojection)}get enableMotionSmoothingOverrideSettings(){return!!VRHTML&&(VRHTML.VRProperties.GetBoolProperty("/user/head",u.Uk.HasDriverDirectModeComponent_Bool)?"oculus"!==VRHTML.VRProperties.GetStringProperty("/user/head",u.Uk.TrackingSystemName_String):VRHTML.VRClientInternal.GetGraphicsHardwareVendorInfo().bSupportsMotionSmoothing)}get enableLegacyReprojectionSettings(){return!!VRHTML&&!VRHTML.VRProperties.GetBoolProperty("/user/head",u.Uk.HasDriverDirectModeComponent_Bool)}get worldScaleRangeMin(){return T[this.state.eWorldScaleRange].min}get worldScaleRangeMax(){return T[this.state.eWorldScaleRange].max}get worldScaleRangeStep(){return T[this.state.eWorldScaleRange].step}onApplicationDropdownChange(e){this.setState(((t,n)=>{var i;return t.currentApp===e?null:(e&&this.fetchAppState(e.key),c.G3.setRoutePageSectionParams([null!==(i=null==e?void 0:e.key)&&void 0!==i?i:""]),{currentApp:e,nResolutionMultiplier:null,nFovScaleMultiplier:null,bShowRefreshRateOptions:null,nPreferredRefreshRate:null,eSmoothingMode:null,disableAsyncReprojection:null})}))}updateAppState(e){var t,n;if(void 0!==e.resolution){let i=null!==(t=e.throttling)&&void 0!==t?t:0,o=null!==(n=e.prediction)&&void 0!==n?n:0,s=R.Off;1!==e.worldscale&&(s=Math.round(1e3*e.worldscale)%10!=0?R.Fine:e.worldscale<T[R.Normal].min||e.worldscale>T[R.Normal].max?R.Extreme:R.Normal),this.m_initialAppState={nResolutionMultiplier:e.resolution/100,nFovScaleMultiplier:e.fovscale/100,bShowRefreshRateOptions:e.preferred_refresh_rate>0,nPreferredRefreshRate:e.preferred_refresh_rate,eSmoothingMode:e.smoothing,disableAsyncReprojection:e.disable_async_reprojection,bShowThrottleOptions:void 0!==e.throttling||void 0!==e.prediction,nFramesToThrottle:i,nAdditionalPrediction:o-i,eWorldScaleRange:s,flWorldScaleMultiplier:e.worldscale?e.worldscale:1},this.setState(this.m_initialAppState)}}fetchAppState(e){c.G3.GetAppSettings(e).then(this.updateAppState)}setAppState(e,t){if(null!=this.state.currentApp){let n={};n[e]=t,c.G3.SetAppSettings(this.state.currentApp.key,n)}}get computedResolution(){let e=c.G3.settings.get(g.bt)?c.G3.settings.get(g.eW):c.G3.settings.get(g.aT);if(null==e||null==this.state.nResolutionMultiplier)return"";let t=c.G3.SliderposToSupersample(this.state.nResolutionMultiplier);if(c.G3.systemInfo&&null!=c.G3.systemInfo.render_target_size.width&&0!=c.G3.systemInfo.render_target_size.height){let n=Math.max(512,Math.floor(c.G3.systemInfo.render_target_size.width*Math.sqrt(e*t)+.5)),i=Math.max(512,Math.floor(c.G3.systemInfo.render_target_size.height*Math.sqrt(e*t)+.5));return n=4*Math.trunc(n/4),i=4*Math.trunc(i/4),(0,l.Xx)("#Settings_Advanced_Supersampling_WidthByHeight",n,i)}return""}onResolutionSliderChange(e){this.setState({nResolutionMultiplier:e}),this.setAppState("resolution",100*e)}onFovScaleSliderChange(e){this.setState({nFovScaleMultiplier:e}),this.setAppState("fovscale",100*e)}onMotionSmoothChange(e){this.setState({eSmoothingMode:e}),this.setAppState("smoothing",e)}onRefreshRateOverrideChange(e){this.allowPerAppRefreshRate&&(this.setState({bShowRefreshRateOptions:e}),this.setAppState("preferred_refresh_rate",e?this.state.nPreferredRefreshRate:0))}onRefreshRateChange(e){this.allowPerAppRefreshRate&&(this.setState({nPreferredRefreshRate:e}),this.setAppState("preferred_refresh_rate",this.state.bShowRefreshRateOptions?e:0))}onDisableAsyncReprojection(e){this.setState({disableAsyncReprojection:e}),this.setAppState("disable_async_reprojection",e)}onShowThrottleOptions(e){var t,n;if(this.setState({bShowThrottleOptions:e}),this.setAppState("override_throttling",e),e){let e=null!==(t=this.state.nFramesToThrottle)&&void 0!==t?t:0,i=null!==(n=this.state.nAdditionalPrediction)&&void 0!==n?n:0;this.setAppState("throttling",e),this.setAppState("prediction",e+i)}}onThrottleSliderChange(e){var t;this.setState({nFramesToThrottle:e}),this.setAppState("throttling",e);let n=null!==(t=this.state.nAdditionalPrediction)&&void 0!==t?t:0;this.setAppState("prediction",e+n)}onPredictionSliderChange(e){var t;this.setState({nAdditionalPrediction:e});let n=null!==(t=this.state.nFramesToThrottle)&&void 0!==t?t:0;this.setAppState("prediction",e+n)}onWorldScaleRangeChange(e){this.setState({eWorldScaleRange:e,flWorldScaleMultiplier:Math.max(T[e].min,Math.min(T[e].max,this.state.flWorldScaleMultiplier))}),this.setAppState("worldscale",e==R.Off?1:this.state.flWorldScaleMultiplier)}onWorldScaleMultiplierSliderChange(e){this.setState({flWorldScaleMultiplier:e}),this.setAppState("worldscale",e)}hasCurrentApp(){return null!=this.state.currentApp}resetAppToDefaults(){c.G3.ResetAppSettings(this.state.currentApp.key).then(this.updateAppState)}show(){c.G3.setRoutePageSection(i.PAGE_SECTION)}close(){c.G3.setRoutePageSection(null)}get allowPerAppRefreshRate(){return!!c.G3.settings.get("/settings/internal/enablePerAppFPS")}get currentRefreshRate(){return c.G3.settings.get("/settings/steamvr/preferredRefreshRate")}render(){var e;let t=null;return this.state.eSmoothingMode==M.ForceAlwaysOn&&(t=s.createElement(s.Fragment,null,(0,l.Xx)("#Settings_PerApplication_MotionSmoothing_AlwaysOn_Desc"))),s.createElement(s.Fragment,null,s.createElement(d.GV,{className:"SettingsItem"},s.createElement(p.z,{className:"ButtonControl",onClick:this.show},(0,l.Xx)("#Settings_PerApplication_VideoSettings"))),this.shouldShowModal&&s.createElement(d.TB,{className:"AppVideoModal",onDismissRequested:this.close,header:s.createElement(s.Fragment,null,s.createElement("h1",null,(0,l.Xx)("#Settings_ManageVideoSettingsForApp")),s.createElement(d.YL,{ref:this.m_refAppSelectDropdown,stateKey:"settings_applications",defaultAppKey:null!==(e=this.currentRouteAppKey)&&void 0!==e?e:null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRApplications.GetSceneApplicationKey(),showOverlays:!1,defaultLabel:(0,l.Xx)("#Settings_PerApplication_ChooseApplication"),onChange:this.onApplicationDropdownChange})),footer:s.createElement(d.U5,{showResetButton:this.hasCurrentApp(),onResetRequested:this.resetAppToDefaults,onDismissRequested:this.close})},this.hasCurrentApp()&&s.createElement(s.Fragment,null,this.enableMotionSmoothingOverrideSettings&&null!==this.state.eSmoothingMode&&!this.state.disableAsyncReprojection&&s.createElement(d.Xp,{label:(0,l.Xx)("#Settings_Advanced_MotionSmoothing_Header"),items:[{value:M.UseGlobal,sLabel:(0,l.Xx)("#Settings_PerApplication_MotionSmoothing_Global")},{value:M.ForceOn,sLabel:(0,l.Xx)("#Settings_PerApplication_MotionSmoothing_On")},{value:M.ForceOff,sLabel:(0,l.Xx)("#Settings_PerApplication_MotionSmoothing_Off")},{value:M.ForceAlwaysOn,sLabel:(0,l.Xx)("#Settings_PerApplication_MotionSmoothing_AlwaysOn")}],value:this.state.eSmoothingMode,onChange:this.onMotionSmoothChange,subsection:t}),null!==this.state.nResolutionMultiplier&&s.createElement(d.GV,{title:(0,l.Xx)("#Settings_PerApplication_AppResHeader",(0,l.Xx)("#Settings_SectionTitle_General")),className:"SettingsItem"},s.createElement("div",{className:"Label"},(0,l.Xx)("#Settings_PerApplication_AppResTitle")),s.createElement("div",{className:"SubsectionStem Label Resolution"},s.createElement("div",{className:"Dimensions"},this.computedResolution),s.createElement("div",{className:"Percentage"},Math.round(100*this.state.nResolutionMultiplier).toString()+"%")),s.createElement("div",{className:"Subsection WithStem"},s.createElement(d.U4,{min:c.BQ,max:c._g,step:c.A3,value:this.state.nResolutionMultiplier,detents:[1],onChange:this.onResolutionSliderChange}))),null!==this.state.nFovScaleMultiplier&&(c.G3.showAdvancedSettings||this.m_initialAppState&&1!=this.m_initialAppState.nFovScaleMultiplier)&&s.createElement(d.GV,{title:(0,l.Xx)("#Settings_PerApplication_FovScale_Description"),className:"SettingsItem Advanced"},s.createElement("div",{className:"Label"},(0,l.Xx)("#Settings_PerApplication_FovScale_Label")),s.createElement("div",{className:"SubsectionStem Label Resolution"},s.createElement("div",{className:"Dimensions"},(0,l.Xx)("#Settings_PerApplication_FovScale_Multiplier")),s.createElement("div",{className:"Percentage"},Math.round(100*this.state.nFovScaleMultiplier).toString()+"%")),s.createElement("div",{className:"Subsection WithStem"},s.createElement(d.U4,{min:.5,max:1,step:.01,value:this.state.nFovScaleMultiplier,onChange:this.onFovScaleSliderChange}))),null!==this.state.flWorldScaleMultiplier&&(c.G3.showAdvancedSettings||this.m_initialAppState&&this.m_initialAppState.eWorldScaleRange!==R.Off)&&s.createElement(d.GV,{title:(0,l.Xx)("#Settings_PerApplication_WorldScale_Description"),className:"SettingsItem Advanced"},s.createElement("div",{className:"Label"},(0,l.Xx)("#Settings_PerApplication_WorldScale_Label")),s.createElement(d.Xp,{items:[{value:R.Off,sLabel:(0,l.Xx)("#Settings_PerApplication_WorldScale_Off")},{value:R.Fine,sLabel:(0,l.Xx)("#Settings_PerApplication_WorldScale_Fine")},{value:R.Normal,sLabel:(0,l.Xx)("#Settings_PerApplication_WorldScale_Normal")},{value:R.Extreme,sLabel:(0,l.Xx)("#Settings_PerApplication_WorldScale_Extreme")}],value:this.state.eWorldScaleRange,onChange:this.onWorldScaleRangeChange})),this.state.eWorldScaleRange!==R.Off&&s.createElement(d.GV,{className:"SettingsItem Advanced"},s.createElement("div",{className:"Label"}),s.createElement("div",{className:"SubsectionStem Label Resolution"},s.createElement("div",{className:"Dimensions"},(0,l.Xx)("#Settings_PerApplication_WorldScale_Range",100*this.worldScaleRangeMin,100*this.worldScaleRangeMax)),s.createElement("div",{className:"Percentage"},(Math.round(1e3*this.state.flWorldScaleMultiplier)/10).toString()+"%")),s.createElement("div",{className:"Subsection WithStem"},s.createElement(d.U4,{min:this.worldScaleRangeMin,max:this.worldScaleRangeMax,step:this.worldScaleRangeStep,value:this.state.flWorldScaleMultiplier,detents:[1],onChange:this.onWorldScaleMultiplierSliderChange}),s.createElement("div",{className:"SettingsItemValueLabel Fixed"},(0,l.Xx)("#Settings_PerApplication_WorldScale_Warning")))),this.allowPerAppRefreshRate&&c.G3.systemInfo&&c.G3.systemInfo.refresh_rates.actual_display_frequency>0&&c.G3.systemInfo.refresh_rates.supported_rates.length>1&&s.createElement(s.Fragment,null,null!==this.state.bShowRefreshRateOptions&&s.createElement(d.wy,{label:(0,l.Xx)("#Settings_PerApplication_RefreshRateOverride_Checkbox"),title:(0,l.Xx)("#Settings_Perapplication_RefreshRateOverride_Description"),value:this.state.bShowRefreshRateOptions,onChange:this.onRefreshRateOverrideChange,onSubsection:s.createElement(d.t0,{label:(0,l.Xx)("#Settings_Video_RefreshRate_Label_Hz"),onChange:this.onRefreshRateChange,value:this.state.nPreferredRefreshRate,items:c.G3.systemInfo.refresh_rates.supported_rates.map((e=>({value:e,sLabel:Math.round(e).toString()})))})})),this.enableLegacyReprojectionSettings&&null!==this.state.disableAsyncReprojection&&(c.G3.showAdvancedSettings||this.m_initialAppState&&this.m_initialAppState.disableAsyncReprojection)&&s.createElement(d.GV,{title:(0,l.Xx)("#Settings_PerApplication_Reprojection_Description"),className:"SettingsItem Advanced"},s.createElement(d.wy,{label:(0,l.Xx)("#Settings_PerApplication_Reprojection_Checkbox"),value:this.state.disableAsyncReprojection,onChange:this.onDisableAsyncReprojection})),this.enableThrottleOverrideSettings&&(c.G3.showAdvancedSettings||this.m_initialAppState&&this.m_initialAppState.bShowThrottleOptions)&&s.createElement(d.GV,{title:(0,l.Xx)("#Settings_PerApplication_ThrottlingOverride_Description"),className:"SettingsItem Advanced"},s.createElement("div",{className:"Label"},(0,l.Xx)("#Settings_PerApplication_ThrottlingOverride_Label")),s.createElement(d.wy,{title:(0,l.Xx)("#Settings_PerApplication_ThrottlingOverride_Toggle"),onLabel:(0,l.Xx)("#Settings_PerApplication_ThrottlingOverride_Toggle_On"),offLabel:(0,l.Xx)("#Settings_PerApplication_ThrottlingOverride_Toggle_Off"),value:this.state.bShowThrottleOptions,onChange:this.onShowThrottleOptions}),this.state.bShowThrottleOptions&&s.createElement("div",{className:"Subsection WithStem"},s.createElement("div",{className:"Label"},(0,l.Xx)("#Settings_PerApplication_ThrottlingOverride_Framerate")),s.createElement(d.U4,{min:5,max:0,step:1,value:this.state.nFramesToThrottle,valueStyleVariant:_.px.OnHandle,renderValue:e=>(this.currentRefreshRate/(e+1)).toFixed(1),onChange:this.onThrottleSliderChange}),s.createElement("div",{className:"Label"},(0,l.Xx)("#Settings_PerApplication_ThrottlingOverride_Prediction")),s.createElement(d.U4,{min:0,max:3,step:1,value:this.state.nAdditionalPrediction,valueStyleVariant:_.px.OnHandle,renderValue:e=>(1e3*e/this.currentRefreshRate).toFixed(2),onChange:this.onPredictionSliderChange})))),!this.hasCurrentApp()&&s.createElement("div",{className:"ModalPlaceholder"},(0,l.Xx)("#Settings_PerApplication_ChooseApplication"))))}};P.PAGE_SECTION="appvideosettings",(0,o.gn)([r.Fl],P.prototype,"shouldShowModal",null),(0,o.gn)([r.Fl],P.prototype,"currentRouteAppKey",null),(0,o.gn)([r.Fl],P.prototype,"enableThrottleOverrideSettings",null),(0,o.gn)([r.Fl],P.prototype,"enableMotionSmoothingOverrideSettings",null),(0,o.gn)([r.Fl],P.prototype,"enableLegacyReprojectionSettings",null),(0,o.gn)([r.Fl],P.prototype,"worldScaleRangeMin",null),(0,o.gn)([r.Fl],P.prototype,"worldScaleRangeMax",null),(0,o.gn)([r.Fl],P.prototype,"worldScaleRangeStep",null),(0,o.gn)([a.ak],P.prototype,"onApplicationDropdownChange",null),(0,o.gn)([a.ak],P.prototype,"updateAppState",null),(0,o.gn)([r.Fl],P.prototype,"computedResolution",null),(0,o.gn)([a.ak],P.prototype,"onResolutionSliderChange",null),(0,o.gn)([a.ak],P.prototype,"onFovScaleSliderChange",null),(0,o.gn)([a.ak],P.prototype,"onMotionSmoothChange",null),(0,o.gn)([a.ak],P.prototype,"onRefreshRateOverrideChange",null),(0,o.gn)([a.ak],P.prototype,"onRefreshRateChange",null),(0,o.gn)([a.ak],P.prototype,"onDisableAsyncReprojection",null),(0,o.gn)([a.ak],P.prototype,"onShowThrottleOptions",null),(0,o.gn)([a.ak],P.prototype,"onThrottleSliderChange",null),(0,o.gn)([a.ak],P.prototype,"onPredictionSliderChange",null),(0,o.gn)([a.ak],P.prototype,"onWorldScaleRangeChange",null),(0,o.gn)([a.ak],P.prototype,"onWorldScaleMultiplierSliderChange",null),(0,o.gn)([a.ak],P.prototype,"resetAppToDefaults",null),(0,o.gn)([a.ak],P.prototype,"show",null),(0,o.gn)([a.ak],P.prototype,"close",null),(0,o.gn)([r.Fl],P.prototype,"allowPerAppRefreshRate",null),(0,o.gn)([r.Fl],P.prototype,"currentRefreshRate",null),P=i=(0,o.gn)([h.Pi],P);class E extends d.d9{render(){if(!this.props.active)return null;const e=VRHTML.VRProperties.GetBoolProperty("/user/head",u.Uk.Hmd_SupportsHDCP14LegacyCompat_Bool),t=VRHTML.VRProperties.GetBoolProperty("/user/head",u.Uk.Hmd_SupportsDisplayPortTrainingMode_Bool);return s.createElement(s.Fragment,null,s.createElement(f,null),s.createElement(A,null),s.createElement(w,null),s.createElement(k,null),s.createElement(y,null),s.createElement(d.wy,{name:"/settings/steamvr/doNotFadeToGrid",label:(0,l.Xx)("#Settings_FadeToGrid"),swapOnOff:!0}),s.createElement(P,null),s.createElement(d.wy,{name:"/settings/steamvr/allowSupersampleFiltering",label:(0,l.Xx)("#Settings_Advanced_AllowSupersampleFiltering"),visibility:d.VK.Advanced}),s.createElement(C,null),e&&s.createElement(d.wy,{name:"/settings/steamvr/hdcp14legacyCompatibility",label:(0,l.Xx)("#Settings_Video_HDCP14LegacyCompatibility"),visibility:d.VK.Advanced,requiresRestart:!0}),t&&s.createElement(d.Xp,{name:"/settings/steamvr/displayPortTrainingMode",label:(0,l.Xx)("#Settings_DisplayPortTrainingMode"),items:[{value:0,sLabel:(0,l.Xx)("#Settings_DisplayPortTrainingMode_Automatic")},S.Kr.Separator,{value:1,sLabel:(0,l.Xx)("#Settings_DisplayPortTrainingMode_CompatibilityModeA")},{value:2,sLabel:(0,l.Xx)("#Settings_DisplayPortTrainingMode_CompatibilityModeB")}],visibility:d.VK.Advanced,requiresRestart:!0}),s.createElement(b,{visibility:d.VK.Advanced}),s.createElement(d.wy,{name:"/settings/power/pauseCompositorOnStandby",label:(0,l.Xx)("#Settings_PauseOnStandby"),visibility:d.VK.Advanced}),this.makeResetToDefaultButton())}}E.Name="video_settings"},1818:(e,t,n)=>{n.d(t,{q:()=>p,z:()=>d});var i=n(655),o=n(7294),s=n(7056),r=n(7264),a=n(6321),l=n(1307),c=n(1058);class d extends o.Component{constructor(){super(...arguments),this.m_ref=o.createRef()}get elem(){return this.m_ref.current}get disabled(){return!1===this.props.enabled}onMouseDown(e){var t,n,i;null===(n=(t=this.props).onMouseDown)||void 0===n||n.call(t,e),this.disabled||r.G.Instance.playSound(null!==(i=this.props.pressSoundEffect)&&void 0!==i?i:null)}onMouseUp(e){var t,n;null===(n=(t=this.props).onMouseUp)||void 0===n||n.call(t,e)}onClick(e){var t,n,i;this.disabled||(null===(n=(t=this.props).onClick)||void 0===n||n.call(t,e),p.temporarilySuppressSoundEffect(),r.G.Instance.playSound(null!==(i=this.props.releaseSoundEffect)&&void 0!==i?i:r.y.ButtonClick))}onMouseEnter(e){var t,n;null===(n=(t=this.props).onMouseEnter)||void 0===n||n.call(t,e),this.disabled||(0,a.Op)()==a.qA.Overlay&&l.LJ.Instance.triggerHaptic(l.Kf.ButtonEnter)}onMouseLeave(e){this.props.onMouseLeave&&this.props.onMouseLeave(e),this.disabled||(0,a.Op)()==a.qA.Overlay&&l.LJ.Instance.triggerHaptic(l.Kf.ButtonLeave)}render(){let e=Object.assign({},this.props);return delete e.enabled,delete e.pressSoundEffect,delete e.releaseSoundEffect,e.className=(0,c.LJ)(e.className,["Disabled",this.disabled]),o.cloneElement(o.createElement("div",e,this.props.children),{onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,ref:this.m_ref})}}(0,i.gn)([s.ak],d.prototype,"onMouseDown",null),(0,i.gn)([s.ak],d.prototype,"onMouseUp",null),(0,i.gn)([s.ak],d.prototype,"onClick",null),(0,i.gn)([s.ak],d.prototype,"onMouseEnter",null),(0,i.gn)([s.ak],d.prototype,"onMouseLeave",null);class p extends o.Component{static temporarilySuppressSoundEffect(){window.clearTimeout(this.s_nPlaySoundEffectTimeout),this.s_nPlaySoundEffectTimeout=0,window.clearTimeout(this.s_nSuppressingSoundEffectsTimeout),this.s_nSuppressingSoundEffectsTimeout=window.setTimeout(this.endSoundEffectSuppression,this.k_nSoundEffectSuppressionPeriod)}static get suppressingSoundEffect(){return this.s_nSuppressingSoundEffectsTimeout>0}onClick(e){p.suppressingSoundEffect||(window.clearTimeout(p.s_nPlaySoundEffectTimeout),p.s_nPlaySoundEffectTimeout=window.setTimeout(p.playSoundEffect,p.k_nSoundEffectDelay)),this.props.onClick&&this.props.onClick(e)}static endSoundEffectSuppression(){window.clearTimeout(this.s_nSuppressingSoundEffectsTimeout),this.s_nSuppressingSoundEffectsTimeout=0}static playSoundEffect(){r.G.Instance.playSound(r.y.SurfaceClick)}render(){return o.cloneElement(o.createElement("div",this.props,this.props.children),{onClick:this.onClick})}}p.k_nSoundEffectSuppressionPeriod=4,p.k_nSoundEffectDelay=2,p.s_nSuppressingSoundEffectsTimeout=0,p.s_nPlaySoundEffectTimeout=0,(0,i.gn)([s.ak],p.prototype,"onClick",null),(0,i.gn)([s.ak],p,"endSoundEffectSuppression",null),(0,i.gn)([s.ak],p,"playSoundEffect",null)},8325:(e,t,n)=>{n.d(t,{Kr:()=>i,Lt:()=>g,hu:()=>S});var i,o=n(655),s=n(7294),r=n(1818),a=n(1058),l=n(7056),c=n(2188),d=n(3868),p=n(9392),u=n(6547),h=n(6882);!function(e){e[e.Separator=0]="Separator"}(i||(i={}));class m extends s.Component{constructor(){super(...arguments),this.m_refView=s.createRef(),this.m_refScrollPanel=s.createRef(),this.m_refSelectedButton=s.createRef(),this.m_refParentPortal=s.createRef(),this.m_elemBoundingParent=window.document.body}renderDropdownItem(e,t){switch(typeof e){case"number":return this.renderDropdownSpecialItem(e,t);case"object":return this.renderDropdownValueItem(e)}}renderDropdownSpecialItem(e,t){return e===i.Separator?s.createElement("div",{className:"Separator",key:"separator"+t}):null}renderDropdownValueItem(e){return s.createElement(r.z,{key:JSON.stringify(e.value),ref:e==this.props.selectedItem?this.m_refSelectedButton:null,className:(0,a.LJ)("DropdownPopoverButton",["Selected",e==this.props.selectedItem]),onClick:()=>this.setValue(e.value)},e.sLabel)}setValue(e){var t,n;this.props.onChange&&this.props.onChange(e),null===(n=(t=this.props).onDismissRequested)||void 0===n||n.call(t)}render(){return s.createElement(h.R,{ref:this.m_refParentPortal,allowableParentSelectors:["body",".SettingsMain",".DesktopHandWidget",".HMDPanel","vsg-app","vsg-mountable","[vsg-type=panel]"],onPortalDidMount:this.updateLayout},s.createElement(u.og,{ref:this.m_refView,shouldDismissOnClickAnywhere:!0,shouldDismissOnClickInViewStack:!0,fadesViewsBelow:!1,onDismissRequested:this.props.onDismissRequested,className:(0,a.LJ)("Dropdown","Popover")},s.createElement(p.P,{scrollDirection:p.I.Vertical,ref:this.m_refScrollPanel},this.props.items.map(this.renderDropdownItem))))}componentDidMount(){var e;this.m_elemBoundingParent=(0,a.gZ)(["body","[vsg-type=panel]",".SettingsSidebarPageModalContainer"],null===(e=this.m_refParentPortal.current)||void 0===e?void 0:e.anchorElement)}updateLayout(){var e,t,n,i;const o=null===(e=this.m_refView.current)||void 0===e?void 0:e.div,s=null===(t=this.m_refScrollPanel.current)||void 0===t?void 0:t.div;if(!o||!s)return;const r=null!==(i=null===(n=this.props.buttonRef.current)||void 0===n?void 0:n.elem.clientWidth)&&void 0!==i?i:0,a=this.m_elemBoundingParent.getBoundingClientRect();s.style.minWidth=r+"px",s.style.maxWidth=a.width-2*m.POPOVER_BOUNDS_MARGIN+"px",s.style.maxHeight=a.height-2*m.POPOVER_BOUNDS_MARGIN+"px";const l=this.props.buttonRef.current.elem.getBoundingClientRect();let c=l.left,d=l.top;const p=o.getBoundingClientRect(),u=this.m_elemBoundingParent.getBoundingClientRect(),h=u.left+m.POPOVER_BOUNDS_MARGIN,g=u.right-m.POPOVER_BOUNDS_MARGIN,S=u.top+m.POPOVER_BOUNDS_MARGIN,_=u.bottom-m.POPOVER_BOUNDS_MARGIN;this.m_refSelectedButton.current&&(d-=this.m_refSelectedButton.current.elem.getBoundingClientRect().top-p.top);const v=d;c<h&&(c=h),c+p.width>g&&(c=g-p.width),d<S&&(d=S),d+p.height>_&&(d=_-p.height),c=Math.round(c),d=Math.round(d),o.scrollTop=d-v,o.style.transform="translateX("+c+"px) translateY("+d+"px)"}}m.POPOVER_BOUNDS_MARGIN=10,(0,o.gn)([l.ZP],m.prototype,"renderDropdownItem",null),(0,o.gn)([l.ZP],m.prototype,"renderDropdownSpecialItem",null),(0,o.gn)([l.ZP],m.prototype,"renderDropdownValueItem",null),(0,o.gn)([l.ZP],m.prototype,"setValue",null),(0,o.gn)([l.ZP],m.prototype,"updateLayout",null);class g extends s.Component{constructor(e){super(e),this.m_refButton=s.createRef(),this.m_scrollWatcher=new a.cB,this.state={bShowingOptions:!1},this.m_scrollWatcher.onScroll=this.onParentScroll}componentWillUnmount(){this.m_scrollWatcher.cleanup()}componentDidUpdate(e,t){this.state.bShowingOptions&&!t.bShowingOptions&&this.m_scrollWatcher.updateScrollableParents()}onParentScroll(){this.hideDropdown()}get value(){return void 0!==this.props.value?this.props.value:null}get selectedItem(){const e=this.value;for(let t of this.props.items)if("object"==typeof t&&t.value==e)return t;return null}showDropdown(){this.setState({bShowingOptions:!0})}hideDropdown(){this.setState({bShowingOptions:!1})}render(){const e=this.selectedItem,t=void 0!==this.props.defaultLabel?this.props.defaultLabel:(0,d.Xx)("#Settings_SelectAnOption"),n=e?e.sLabel:t;return s.createElement(s.Fragment,null,s.createElement(r.z,{ref:this.m_refButton,className:"ButtonControl Dropdown",onClick:this.showDropdown,enabled:this.props.items&&(this.props.items.length>1||1==this.props.items.length&&!this.props.value),style:{pointerEvents:this.state.bShowingOptions?"none":"initial"}},s.createElement("span",{ref:this.m_scrollWatcher.ref},n)),this.state.bShowingOptions&&s.createElement(m,Object.assign({},this.props,{selectedItem:e,buttonRef:this.m_refButton,onDismissRequested:this.hideDropdown})))}}(0,o.gn)([l.ZP],g.prototype,"onParentScroll",null),(0,o.gn)([c.Fl],g.prototype,"value",null),(0,o.gn)([c.Fl],g.prototype,"selectedItem",null),(0,o.gn)([l.ZP],g.prototype,"showDropdown",null),(0,o.gn)([l.ZP],g.prototype,"hideDropdown",null);class S extends s.Component{constructor(e){super(e),this.state={value:void 0===e.value?null:e.value}}onChange(e){this.setState({value:e}),this.props.onChange&&this.props.onChange(e)}render(){let e=Object.assign({},this.props);return e.onChange=this.onChange,e.value=this.state.value,s.createElement(g,Object.assign({},e))}}(0,o.gn)([l.ZP],S.prototype,"onChange",null)},6547:(e,t,n)=>{n.d(t,{og:()=>u,sC:()=>h,vz:()=>m});var i,o=n(655),s=n(7294),r=n(7056),a=n(1058),l=n(2188),c=n(7062);const d=s.createContext(null);class p{constructor(){this.m_stack=l.LO.array([]),this.m_bSViewtackWasChangedInThisCallStack=!0,this.m_nCallStackClearedTimeout=0,window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("click",this.onWindowClick)}cleanup(){clearTimeout(this.m_nCallStackClearedTimeout),window.removeEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("click",this.onWindowClick)}onWindowKeyDown(e){"Escape"==e.key&&this.dismissTopView()}onWindowClick(e){const t=this.topView;t&&t.div&&!this.m_bSViewtackWasChangedInThisCallStack&&(t.shouldDismissOnClickAnywhere||t.shouldDismissOnClickInViewStack)&&!t.isPointInDiv(e.clientX,e.clientY)&&(t.shouldDismissOnClickAnywhere||t==this.bottomView||t.getViewsBelow().some((t=>t.isPointInDiv(e.clientX,e.clientY))))&&t.dismissView()}get size(){return this.m_stack.length}dismissTopView(){var e;null===(e=this.topView)||void 0===e||e.dismissView()}get hasViews(){return this.m_stack.length>0}get bottomView(){return this.hasViews?this.m_stack[0]:null}get topView(){return this.hasViews?this.m_stack[this.m_stack.length-1]:null}getViewsBelow(e){const t=this.m_stack.indexOf(e);return t<0?[]:this.m_stack.slice(0,t)}getViewsAbove(e){const t=this.m_stack.indexOf(e);return t<0?[]:this.m_stack.slice(t+1)}getViewLevel(e){return this.m_stack.indexOf(e)}pushView(e){this.m_stack.push(e),this.setViewJustAddedOrRemoved()}removeView(e){this.m_stack.splice(this.m_stack.indexOf(e),1),this.setViewJustAddedOrRemoved()}setViewJustAddedOrRemoved(){clearTimeout(this.m_nCallStackClearedTimeout),this.m_bSViewtackWasChangedInThisCallStack=!0,this.m_nCallStackClearedTimeout=setTimeout((()=>this.m_bSViewtackWasChangedInThisCallStack=!1),0)}}(0,o.gn)([r.ak],p.prototype,"cleanup",null),(0,o.gn)([r.ak],p.prototype,"onWindowKeyDown",null),(0,o.gn)([r.ak],p.prototype,"onWindowClick",null),(0,o.gn)([l.Fl],p.prototype,"size",null),(0,o.gn)([l.aD.bound],p.prototype,"dismissTopView",null),(0,o.gn)([l.Fl],p.prototype,"hasViews",null),(0,o.gn)([l.Fl],p.prototype,"bottomView",null),(0,o.gn)([l.Fl],p.prototype,"topView",null),(0,o.gn)([l.aD],p.prototype,"pushView",null),(0,o.gn)([l.aD],p.prototype,"removeView",null);let u=i=class extends s.Component{constructor(e){super(e),this.m_viewRef=s.createRef(),this.m_newViewStack=null}get viewStack(){return this.context?this.context:(null===this.m_newViewStack&&(this.m_newViewStack=new p),this.m_newViewStack)}get isTopView(){return this.viewStack.topView==this}getViewsBelow(){return this.viewStack.getViewsBelow(this)}getViewsAbove(){return this.viewStack.getViewsAbove(this)}get viewLevel(){return this.viewStack.getViewLevel(this)}get viewShouldFadeForModal(){return this.getViewsAbove().some((e=>e.fadesViewsBelow))}get shouldDismissOnClickInViewStack(){var e;return null!==(e=this.props.shouldDismissOnClickInViewStack)&&void 0!==e&&e}get shouldDismissOnClickAnywhere(){var e;return null!==(e=this.props.shouldDismissOnClickAnywhere)&&void 0!==e&&e}get fadesViewsBelow(){var e;return null!==(e=this.props.fadesViewsBelow)&&void 0!==e&&e}dismissView(){var e,t;null===(t=(e=this.props).onDismissRequested)||void 0===t||t.call(e)}get div(){return this.m_viewRef.current}isPointInDiv(e,t){if(!this.div)return!1;const n=this.div.getBoundingClientRect();return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}componentDidMount(){this.viewStack.pushView(this)}componentWillUnmount(){var e;this.viewStack.removeView(this),null===(e=this.m_newViewStack)||void 0===e||e.cleanup()}render(){let e=Object.assign({},this.props);delete e.shouldDismissOnClickAnywhere,delete e.shouldDismissOnClickInViewStack,delete e.fadesViewsBelow,delete e.onDismissRequested;const t=s.createElement("div",Object.assign({},e,{className:(0,a.LJ)("View",[i.k_FadedForModalClassName,this.viewShouldFadeForModal],e.className),style:Object.assign(Object.assign({},e.style),{zIndex:3e3+this.viewLevel}),ref:this.m_viewRef}),e.children);return null===this.context?s.createElement(d.Provider,{value:this.viewStack},t):t}};u.k_FadedForModalClassName="FadedForModal",u.contextType=d,(0,o.gn)([l.Fl],u.prototype,"viewStack",null),(0,o.gn)([l.Fl],u.prototype,"isTopView",null),(0,o.gn)([l.Fl],u.prototype,"viewLevel",null),(0,o.gn)([l.Fl],u.prototype,"viewShouldFadeForModal",null),(0,o.gn)([r.ak],u.prototype,"dismissView",null),u=i=(0,o.gn)([c.Pi],u);const h=865!=n.j?s.forwardRef(((e,t)=>s.createElement(u,Object.assign({},e,{ref:t}),e.children))):null;let m=class extends s.Component{constructor(e){super(e),this.state={viewStack:null}}setFloatingViewStack(e){this.setState({viewStack:e})}render(){var e,t,n;const i=null!==(n=null===(t=null===(e=this.state.viewStack)||void 0===e?void 0:e.bottomView)||void 0===t?void 0:t.viewShouldFadeForModal)&&void 0!==n&&n;return s.createElement("div",Object.assign({},this.props,{className:(0,a.LJ)("View",[u.k_FadedForModalClassName,i],this.props.className)}),this.props.children)}};m=(0,o.gn)([c.Pi],m)},1307:(e,t,n)=>{n.d(t,{Kf:()=>i,LJ:()=>a});var i,o=n(6321);!function(e){e[e.ButtonEnter=0]="ButtonEnter",e[e.ButtonLeave=1]="ButtonLeave",e[e.Snap=2]="Snap",e[e.Sliding=3]="Sliding",e[e.SlidingEdge=4]="SlidingEdge"}(i||(i={}));const s=Object.values(i).filter((e=>"number"==typeof e));function r(e,t){return new Set([...e,...t])}class a{constructor(){this.m_mapSuppressedHaptics=new Map}static get Instance(){return a.s_Instance||(a.s_Instance=new a),a.s_Instance}suppressHaptics(e,t){const n=new Set(t);this.m_mapSuppressedHaptics.has(e)?this.m_mapSuppressedHaptics.set(e,r(this.m_mapSuppressedHaptics.get(e),n)):this.m_mapSuppressedHaptics.set(e,n)}suppressHapticsExcept(e,t){const n=new Set(t),i=new Set(s.filter((e=>!n.has(e))));this.m_mapSuppressedHaptics.has(e)?this.m_mapSuppressedHaptics.set(e,r(this.m_mapSuppressedHaptics.get(e),i)):this.m_mapSuppressedHaptics.set(e,i)}unsuppressHaptics(e,t){const n=new Set(t);var i,o;void 0===t?this.m_mapSuppressedHaptics.delete(e):this.m_mapSuppressedHaptics.has(e)||this.m_mapSuppressedHaptics.set(e,(i=this.m_mapSuppressedHaptics.get(e),o=n,new Set([...i].filter((e=>!o.has(e))))))}isHapticSuppressed(e){return Array.from(this.m_mapSuppressedHaptics.values()).some((t=>t.has(e)))}triggerHaptic(e){if((0,o.Op)()!=o.qA.Overlay||this.isHapticSuppressed(e))return;if(e==i.ButtonLeave)return;let t=0,n=0,s=0;switch(e){case i.ButtonEnter:t=0,n=1,s=.16;break;case i.Snap:t=0,n=1,s=.2;break;case i.Sliding:t=0,n=1,s=.08;break;case i.SlidingEdge:t=0,n=1,s=1.8}"Oculus Rift CV1"==(null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRProperties.GetStringProperty("/user/head",o.Uk.ModelNumber_String))&&(s*=1.8),s>0&&(null===VRHTML||void 0===VRHTML||VRHTML.VROverlay.TriggerLaserMouseHapticVibration(VRHTML.VROverlay.ThisOverlayHandle(),t,n,s))}}a.s_Instance=null},8697:(e,t,n)=>{n.d(t,{R:()=>r});var i=n(7294),o=n(3935);const s=e=>i.createElement("div",{style:{position:"fixed",left:e.x,top:e.y,width:e.width,height:e.height,zIndex:90019001}});class r extends i.Component{render(){const e=document.body.getBoundingClientRect();let t=null;if(this.props.element){const n=this.props.element.getBoundingClientRect();t=i.createElement(i.Fragment,null,i.createElement(s,{x:0,y:0,width:e.width,height:n.y}),i.createElement(s,{x:0,y:n.y+n.height,width:e.width,height:e.height-n.height-n.y}),i.createElement(s,{x:0,y:n.y,width:n.x,height:n.height}),i.createElement(s,{x:n.x+n.width,y:n.y,width:e.width-n.width-n.x,height:n.height}))}else t=i.createElement(i.Fragment,null,i.createElement(s,{x:0,y:0,width:e.width,height:e.height}));return o.createPortal(t,document.body)}}},1415:(e,t,n)=>{n.d(t,{u:()=>d});var i,o=n(655),s=n(7294),r=n(1058),a=n(7062),l=n(6547),c=n(6882);let d=i=class extends s.Component{constructor(e){super(e),this.m_refParentPortal=s.createRef(),this.state={elemBoundingParent:window.document.body,bInDOM:!1}}componentDidMount(){var e,t;this.setState({elemBoundingParent:(0,r.gZ)(["body","[vsg-type=panel]",...null!==(e=this.props.allowableParentSelectors)&&void 0!==e?e:[]],null===(t=this.m_refParentPortal.current)||void 0===t?void 0:t.anchorElement),bInDOM:!0})}render(){var e;const t=this.state.elemBoundingParent.getBoundingClientRect();let n=Object.assign({},this.props);return delete n.onDismissRequested,delete n.backdropClassName,delete n.allowableParentSelectors,s.createElement(c.R,{ref:this.m_refParentPortal,allowableParentSelectors:["body","vsg-app","vsg-mountable","[vsg-type=panel]",...null!==(e=this.props.allowableParentSelectors)&&void 0!==e?e:[]]},s.createElement(l.og,Object.assign({},n,{shouldDismissOnClickAnywhere:!1,shouldDismissOnClickInViewStack:!0,fadesViewsBelow:!0,onDismissRequested:this.props.onDismissRequested,className:(0,r.LJ)("Modal",this.props.className),style:{maxWidth:t.width-2*i.MODAL_BOUNDS_MARGIN,maxHeight:t.height-2*i.MODAL_BOUNDS_MARGIN}}),this.state.bInDOM&&this.props.children))}};d.MODAL_BOUNDS_MARGIN=10,d=i=(0,o.gn)([a.Pi],d)},9392:(e,t,n)=>{n.d(t,{I:()=>i,P:()=>m});var i,o,s=n(655),r=n(7294),a=n(7056),l=n(6321),c=n(1307),d=n(1058),p=n(2188),u=n(1818),h=n(8697);!function(e){e[e.None=0]="None",e[e.Vertical=1]="Vertical",e[e.Horizontal=2]="Horizontal"}(i||(i={})),function(e){e[e.Default=0]="Default",e[e.MouseDown=1]="MouseDown",e[e.Dragging=2]="Dragging",e[e.Thrown=3]="Thrown"}(o||(o={}));class m extends r.Component{constructor(e){super(e),this.m_ref=r.createRef(),this.m_initialMousePosition=null,this.m_initialScrollPosition=null,this.m_mostRecentScrollSamples=[],this.m_thrownVelocityPerSecond=null,this.m_animationFrameRequestHandle=0,this.state={eScrollState:o.Default,bAtEdge:null}}static get isScrollingSuppressed(){return m.s_setScrollingSuppressors.size>0}static get userIsDragging(){return!!m.s_CurrentlyDraggingPanel}static suppressScrolling(e){m.s_setScrollingSuppressors.add(e)}static unsuppressScrolling(e){m.s_setScrollingSuppressors.delete(e)}componentWillUnmount(){this.stopMouseTracking(),window.cancelAnimationFrame(this.m_animationFrameRequestHandle)}componentDidMount(){this.setState({bAtEdge:this.currentlyAtEdge})}componentDidUpdate(e,t){this.state.bAtEdge&&!1===t.bAtEdge&&c.LJ.Instance.triggerHaptic(c.Kf.SlidingEdge)}onWindowMouseMove(e){this.updateMouseTracking({x:e.clientX,y:e.clientY})}onWindowMouseUp(e){this.stopMouseTracking()}onMouseDown(e){var t,n;null===(n=(t=this.props).onMouseDown)||void 0===n||n.call(t,e),this.startMouseTracking({x:e.clientX,y:e.clientY})}onMouseUp(e){var t,n;null===(n=(t=this.props).onMouseUp)||void 0===n||n.call(t,e),e.stopPropagation()}onScroll(e){var t,n;null===(n=(t=this.props).onScroll)||void 0===n||n.call(t,e),this.setState({bAtEdge:this.currentlyAtEdge})}get div(){return this.m_ref.current}get currentlyAtEdge(){const e=this.m_ref.current;return e?this.scrollsVertically?0==e.scrollTop||e.scrollTop+e.clientHeight==e.scrollHeight:0==e.scrollLeft||e.scrollLeft+e.clientWidth==e.scrollWidth:null}startMouseTracking(e){this.setState({eScrollState:o.MouseDown}),this.m_initialMousePosition=e,window.document.addEventListener("mousemove",this.onWindowMouseMove),window.document.addEventListener("mouseup",this.onWindowMouseUp)}updateMouseTracking(e){const t=(0,l.Zj)(this.m_initialMousePosition,e);switch(this.state.eScrollState){case o.MouseDown:if(this.props.scrollDirection==i.None)break;Math.abs(this.scrollsHorizontally?t.x:t.y)>(this.scrollsHorizontally?m.MIN_HORIZONTAL_DRAG_DISTANCE:m.MIN_VERTICAL_DRAG_DISTANCE)&&this.startDragging(e);break;case o.Dragging:if(this.logScrollSample(),m.s_CurrentlyDraggingPanel){if(m.s_CurrentlyDraggingPanel!=this)break}else m.s_CurrentlyDraggingPanel=this;this.scrollsHorizontally?this.m_ref.current.scrollLeft=this.m_initialScrollPosition.x+t.x:this.m_ref.current.scrollTop=this.m_initialScrollPosition.y+t.y}}requestNextAnimationFrame(){this.m_animationFrameRequestHandle=window.requestAnimationFrame(this.onAnimationFrame),this.m_lastAnimationFrameTimeMs=performance.now()}onAnimationFrame(){if(this.state.eScrollState!=o.Thrown)return;const e=(performance.now()-this.m_lastAnimationFrameTimeMs)/1e3;this.m_ref.current.scrollLeft+=this.m_thrownVelocityPerSecond.x*e,this.m_ref.current.scrollTop+=this.m_thrownVelocityPerSecond.y*e;const t=Math.sign(this.m_thrownVelocityPerSecond.x),n=Math.sign(this.m_thrownVelocityPerSecond.y),i=850+((0,l.JR)(this.m_thrownVelocityPerSecond)-500)/1e4*49150,s=Math.min(5e4,Math.max(850,i));this.m_thrownVelocityPerSecond={x:this.m_thrownVelocityPerSecond.x-t*s*e,y:this.m_thrownVelocityPerSecond.y-n*s*e},Math.sign(this.m_thrownVelocityPerSecond.x)!=t||Math.sign(this.m_thrownVelocityPerSecond.y)!=n||(0,l.JR)(this.m_thrownVelocityPerSecond)<=1?this.setState({eScrollState:o.Default}):this.requestNextAnimationFrame()}startDragging(e){m.isScrollingSuppressed||(0,l.Op)()==l.qA.Overlay&&(this.setState({eScrollState:o.Dragging}),this.m_initialMousePosition=e,this.m_initialScrollPosition={x:this.m_ref.current.scrollLeft,y:this.m_ref.current.scrollTop},this.logScrollSample())}startThrowing(){this.m_thrownVelocityPerSecond=this.calculateThrowStartVelocity(),this.setState({eScrollState:o.Thrown}),this.requestNextAnimationFrame()}cancelThrowing(e){this.setState(((e,t)=>e.eScrollState==o.Thrown?(window.cancelAnimationFrame(this.m_animationFrameRequestHandle),{eScrollState:o.Default}):null),e)}get isThrown(){return this.state.eScrollState==o.Thrown}calculateThrowStartVelocity(){let e=null,t=0;for(let n=1;n<this.m_mostRecentScrollSamples.length;n++){const i=this.m_mostRecentScrollSamples[n-1],o=this.m_mostRecentScrollSamples[n],s=(o.timeMs-i.timeMs)/1e3,r={x:(o.scrollPosition.x-i.scrollPosition.x)/s,y:(o.scrollPosition.y-i.scrollPosition.y)/s};e?(e.x=(e.x*t+r.x)/(t+1),e.y=(e.y*t+r.y)/(t+1)):e=r,t++}const n=(0,l.JR)(e);return n>m.MAX_PIXELS_PER_SECOND&&(e=(0,l.Fs)(e,m.MAX_PIXELS_PER_SECOND/n)),n<m.MIN_THROW_VELOCITY_PER_SECOND&&(e=null),null!=e?e:{x:0,y:0}}logScrollSample(){for(this.m_mostRecentScrollSamples.push({scrollPosition:{x:this.m_ref.current.scrollLeft,y:this.m_ref.current.scrollTop},timeMs:performance.now()});this.m_mostRecentScrollSamples.length>m.MAX_SCROLL_SAMPLES;)this.m_mostRecentScrollSamples.shift()}clearScrollSamples(){this.m_mostRecentScrollSamples=[]}stopMouseTracking(){m.s_CurrentlyDraggingPanel==this?(this.startThrowing(),u.q.temporarilySuppressSoundEffect(),setTimeout((()=>{m.s_CurrentlyDraggingPanel=null}),0)):this.setState({eScrollState:o.Default}),this.clearScrollSamples(),this.m_initialMousePosition=null,this.m_initialScrollPosition=null,window.document.removeEventListener("mousemove",this.onWindowMouseMove),window.document.removeEventListener("mouseup",this.onWindowMouseUp)}get scrollsHorizontally(){return this.props.scrollDirection==i.Horizontal}get scrollsVertically(){return this.props.scrollDirection==i.Vertical}render(){let e=Object.assign({},this.props);delete e.scrollDirection,delete e.alwaysShowScrollbars;const t=this.props.alwaysShowScrollbars?"scroll":"auto";return r.createElement(r.Fragment,null,this.state.eScrollState==o.Dragging&&r.createElement(h.R,null),r.createElement("div",Object.assign({},e,{className:(0,d.LJ)("ScrollPanel",e.className),style:Object.assign(Object.assign({},e.style),{overflowX:this.props.scrollDirection==i.Horizontal?t:"hidden",overflowY:this.props.scrollDirection==i.Vertical?t:"hidden"}),onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onScroll:this.onScroll,ref:this.m_ref}),this.props.children))}get scrollTop(){var e;return null===(e=this.m_ref.current)||void 0===e?void 0:e.scrollTop}set scrollTop(e){this.m_ref.current&&(this.m_ref.current.scrollTop=e,this.cancelThrowing())}get scrollLeft(){var e;return null===(e=this.m_ref.current)||void 0===e?void 0:e.scrollLeft}set scrollLeft(e){this.m_ref.current&&(this.m_ref.current.scrollLeft=e,this.cancelThrowing())}scrollTo(e){const t=()=>{var t;null===(t=this.m_ref.current)||void 0===t||t.scrollTo(e)};this.state.eScrollState==o.Thrown?this.cancelThrowing(t):t()}get children(){var e;return null===(e=this.m_ref.current)||void 0===e?void 0:e.children}getBoundingClientRect(){var e;return null===(e=this.m_ref.current)||void 0===e?void 0:e.getBoundingClientRect()}get clientWidth(){var e;return null===(e=this.m_ref.current)||void 0===e?void 0:e.clientWidth}get clientHeight(){var e;return null===(e=this.m_ref.current)||void 0===e?void 0:e.clientHeight}get scrollWidth(){var e;return null===(e=this.m_ref.current)||void 0===e?void 0:e.scrollWidth}get scrollHeight(){var e;return null===(e=this.m_ref.current)||void 0===e?void 0:e.scrollHeight}get style(){var e;return null===(e=this.m_ref.current)||void 0===e?void 0:e.style}contains(e){var t;return null===(t=this.m_ref.current)||void 0===t?void 0:t.contains(e)}}m.s_CurrentlyDraggingPanel=null,m.s_setScrollingSuppressors=p.LO.set(),m.MAX_SCROLL_SAMPLES=4,m.MAX_PIXELS_PER_SECOND=1e4,m.MIN_THROW_VELOCITY_PER_SECOND=1e3,m.MIN_VERTICAL_DRAG_DISTANCE=80,m.MIN_HORIZONTAL_DRAG_DISTANCE=40,(0,s.gn)([a.ak],m.prototype,"onWindowMouseMove",null),(0,s.gn)([a.ak],m.prototype,"onWindowMouseUp",null),(0,s.gn)([a.ak],m.prototype,"onMouseDown",null),(0,s.gn)([a.ak],m.prototype,"onMouseUp",null),(0,s.gn)([a.ak],m.prototype,"onScroll",null),(0,s.gn)([a.ak],m.prototype,"onAnimationFrame",null),(0,s.gn)([p.LO],m,"s_CurrentlyDraggingPanel",void 0),(0,s.gn)([p.Fl],m,"isScrollingSuppressed",null),(0,s.gn)([p.Fl],m,"userIsDragging",null),(0,s.gn)([p.aD],m,"suppressScrolling",null),(0,s.gn)([p.aD],m,"unsuppressScrolling",null)},1219:(e,t,n)=>{n.d(t,{iR:()=>v,px:()=>s,uz:()=>o});var i,o,s,r=n(655),a=n(7294),l=n(7056),c=n(2188),d=n(7062),p=n(6321),u=n(7264),h=n(1818),m=n(1058),g=n(1307),S=n(9392),_=n(8697);!function(e){e[e.Value=0]="Value",e[e.Color=1]="Color"}(o||(o={})),function(e){e[e.Below=0]="Below",e[e.OnHandle=1]="OnHandle"}(s||(s={}));let v=i=class extends a.Component{constructor(e){super(e),this.m_sScrollSuppressedIdentifier=Math.round(1e6*Math.random()).toString(),this.m_refSlider=a.createRef(),this.m_refSliderDefaultHandle=a.createRef(),this.m_nAnimationFrameCallback=0,this.m_dragStartTime=null,this.m_setDetentsToIgnore=new Set,this.m_nCurrentNearestSnappableDetent=null,this.m_nValueOffset=0,this.state={m_bSliding:!1}}get isSliding(){return this.state.m_bSliding}get isVertical(){var e;return null!==(e=this.props.vertical)&&void 0!==e&&e}componentDidMount(){window.document.addEventListener("mousemove",this.onWindowMouseMove),window.document.addEventListener("mouseup",this.onWindowMouseUp),this.setDragElapsedSecondsCSSProperty(0)}componentWillUnmount(){window.document.removeEventListener("mousemove",this.onWindowMouseMove),window.document.removeEventListener("mouseup",this.onWindowMouseUp),window.cancelAnimationFrame(this.m_nAnimationFrameCallback),g.LJ.Instance.unsuppressHaptics(this),S.P.unsuppressScrolling(this.m_sScrollSuppressedIdentifier)}get sliderHandleElement(){var e,t;return null!==(t=null===(e=this.props.customHandleComponentRef)||void 0===e?void 0:e.current)&&void 0!==t?t:this.m_refSliderDefaultHandle.current}onSliderMouseDown(e){this.m_refSlider.current&&this.sliderHandleElement&&(this.m_nValueOffset=0,this.startSliding({x:e.clientX,y:e.clientY}))}onWindowMouseMove(e){if(!this.state.m_bSliding||!this.m_refSlider.current||!this.sliderHandleElement)return;const t=this.isVertical?e.clientY:e.clientX;this.updateValueForMousePosition(t,!1)}onSliderMouseEnter(e){var t,n;null===(n=(t=this.props).onMouseEnter)||void 0===n||n.call(t,e),(0,p.Op)()!=p.qA.Overlay||this.state.m_bSliding||g.LJ.Instance.triggerHaptic(g.Kf.ButtonEnter)}onSliderMouseLeave(e){var t,n;null===(n=(t=this.props).onMouseLeave)||void 0===n||n.call(t,e),(0,p.Op)()!=p.qA.Overlay||this.state.m_bSliding||g.LJ.Instance.triggerHaptic(g.Kf.ButtonLeave)}getNormalizedValueForMousePosition(e){const t=this.m_refSlider.current.getBoundingClientRect(),n=this.sliderHandleElement.getBoundingClientRect(),i=this.isVertical?t.bottom:t.left,o=this.isVertical?n.height:n.width,s=this.isVertical?t.height:t.width;return((this.isVertical?i-e+i:e)-(i+o/2))/(s-o)}updateValueForMousePosition(e,t){const n=this.normalizedValue;let o=this.getNormalizedValueForMousePosition(e)+this.m_nValueOffset;const s=this.getClosestSnappableDetent(o),r=this.normalizedDetents;for(let e=0;e<r.length;e++){const t=r[e];Math.abs(o-t)>i.DETENT_UNIGNORE_DISTANCE&&this.m_setDetentsToIgnore.delete(t)}t&&s===n&&this.m_setDetentsToIgnore.add(s),null===s||this.m_setDetentsToIgnore.has(s)||(o=s),this.m_nCurrentNearestSnappableDetent!==s&&(this.m_dragStartTime=new Date,null!==this.m_nCurrentNearestSnappableDetent&&this.m_setDetentsToIgnore.add(this.m_nCurrentNearestSnappableDetent),null===s||this.m_setDetentsToIgnore.has(s)||g.LJ.Instance.triggerHaptic(g.Kf.Snap)),this.m_nCurrentNearestSnappableDetent=s,this.setNormalizedValue(o)}get isSnappedToDetent(){return null!==this.m_nCurrentNearestSnappableDetent&&!this.m_setDetentsToIgnore.has(this.m_nCurrentNearestSnappableDetent)}onWindowMouseUp(e){this.stopSliding()}startExternalSliding(e){if(!this.m_refSlider.current||!this.sliderHandleElement)return;const t=this.isVertical?e.y:e.x;this.m_nValueOffset=-this.getNormalizedValueForMousePosition(t)+this.normalizedValue,this.startSliding(e)}stopExternalSliding(){this.stopSliding()}startSliding(e){var t,n,i;const o=this.isVertical?e.y:e.x;this.setState({m_bSliding:!0}),this.updateValueForMousePosition(o,!0),this.setDragElapsedSecondsCSSProperty(0),g.LJ.Instance.suppressHapticsExcept(this,[g.Kf.Sliding,g.Kf.SlidingEdge,g.Kf.Snap]),this.m_dragStartTime=new Date,this.m_nAnimationFrameCallback=window.requestAnimationFrame(this.onDragAnimationFrame),S.P.suppressScrolling(this.m_sScrollSuppressedIdentifier),u.G.Instance.playSound(null!==(t=this.props.interactionStartSoundEffect)&&void 0!==t?t:u.y.Grab),null===(i=(n=this.props).onInteractionStart)||void 0===i||i.call(n)}stopSliding(){var e,t,n,i,o;this.state.m_bSliding&&(this.setState({m_bSliding:!1}),window.cancelAnimationFrame(this.m_nAnimationFrameCallback),this.setDragElapsedSecondsCSSProperty(0),this.m_setDetentsToIgnore.clear(),g.LJ.Instance.unsuppressHaptics(this),null===(t=(e=this.props).onInteractionEnd)||void 0===t||t.call(e),null===(i=(n=this.props).onFinalChange)||void 0===i||i.call(n,this.normalizedToExternal(this.normalizedValue)),h.q.temporarilySuppressSoundEffect(),u.G.Instance.playSound(null!==(o=this.props.interactionEndSoundEffect)&&void 0!==o?o:u.y.GrabRelease),S.P.unsuppressScrolling(this.m_sScrollSuppressedIdentifier))}getClosestSnappableDetent(e){const t=this.normalizedDetents;t.sort(((t,n)=>Math.abs(e-t)>Math.abs(e-n)?1:-1));for(let n=0;n<t.length;n++){const o=t[n];if(Math.abs(e-o)<i.DETENT_SNAP_DISTANCE)return o}return null}get styleVariant(){return void 0===this.props.styleVariant?o.Value:this.props.styleVariant}get valueStyleVariant(){return void 0===this.props.valueStyleVariant?s.Below:this.props.valueStyleVariant}get externalRangeMin(){return void 0===this.props.min?0:this.props.min}get externalRangeMax(){return void 0===this.props.max?1:this.props.max}get normalizedStep(){if(void 0!==this.props.step)return this.props.step/(this.externalRangeMax-this.externalRangeMin)}get exponent(){return void 0===this.props.exponent?1:this.props.exponent}get normalizedDetents(){let e=this.props.detents||[];if(this.props.showDetentsForSnaps&&this.props.step)for(let t=this.externalRangeMin;t<=this.externalRangeMax;t+=this.props.step)e.push(t);return e.map(this.externalToNormalized)}externalToNormalized(e){return e===this.props.specialMaxValue?1:e===this.props.specialMinValue?0:Math.pow((e-this.externalRangeMin)/(this.externalRangeMax-this.externalRangeMin),1/this.exponent)}normalizedToExternal(e){return 0==e&&void 0!==this.props.specialMinValue?this.props.specialMinValue:1==e&&void 0!==this.props.specialMaxValue?this.props.specialMaxValue:this.externalRangeMin+Math.pow(e,this.exponent)*(this.externalRangeMax-this.externalRangeMin)}get normalizedValue(){return this.externalToNormalized(this.externalValue)}get externalValue(){return this.props.value}get shouldTriggerHapticOnSnap(){const e=this.normalizedStep;return e>0&&e>=1/40}setNormalizedValue(e){e<0&&(e=0),e>1&&(e=1);let t=!1;const n=this.normalizedStep,i=this.normalizedValue;if(n&&(e=Math.round(e/n)*n,Math.abs(e-i)>1e-4)){const i=1%n,o=Math.abs(i-n)<1e-5?1:1-1%n;(0==e||Math.abs(e-o)<.001)&&!t&&(g.LJ.Instance.triggerHaptic(g.Kf.SlidingEdge),t=!0),!this.shouldTriggerHapticOnSnap||this.isSnappedToDetent||(0,p.Op)()!=p.qA.Overlay||t||(g.LJ.Instance.triggerHaptic(g.Kf.Snap),t=!0)}if(!this.shouldTriggerHapticOnSnap&&i>=0&&i<=1&&!this.isSnappedToDetent){(0==e||1==e)&&i>0&&i<1&&!t&&(g.LJ.Instance.triggerHaptic(g.Kf.SlidingEdge),t=!0);const n=40;Math.floor(i*n)==Math.floor(e*n)||t||(g.LJ.Instance.triggerHaptic(g.Kf.Sliding),t=!0)}const o=this.normalizedToExternal(e);this.props.onChange&&this.props.onChange(o)}setDragElapsedSecondsCSSProperty(e){this.m_refSlider.current&&this.m_refSlider.current.style.setProperty("--drag-elapsed-seconds",e.toString())}onDragAnimationFrame(){let e=((new Date).getTime()-this.m_dragStartTime.getTime())/1e3;this.normalizedStep>.1&&(e=0),this.setDragElapsedSecondsCSSProperty(e),this.m_nAnimationFrameCallback=window.requestAnimationFrame(this.onDragAnimationFrame)}render(){var e;const t=void 0!==this.props.renderValue?this.props.renderValue(this.externalValue):null,n=this.styleVariant==o.Value&&t,i=n&&this.valueStyleVariant==s.OnHandle,r=n&&this.valueStyleVariant==s.Below,l=this.styleVariant==o.Value&&!i,c=this.normalizedValue,d=i&&t.length>=4,p=null!==(e=this.props.customHandleComponent)&&void 0!==e?e:a.createElement("div",{className:"HandleContainer"},a.createElement("div",{className:(0,m.LJ)("Handle",["SmallerText",d]),ref:this.m_refSliderDefaultHandle,style:{backgroundColor:this.props.styleVariant==o.Color?t:null}},l&&a.createElement("div",{className:"HandleCircle"}),i&&a.createElement("div",{className:"RangeLabel"},t)));return a.createElement(a.Fragment,null,this.state.m_bSliding&&a.createElement(_.R,{element:this.m_refSlider.current}),a.createElement("div",{className:(0,m.LJ)("SliderControl",["Vertical",this.isVertical],["Color",this.styleVariant==o.Color],["Sliding",this.state.m_bSliding],["Disabled",!1===this.props.enabled],["ValueOnHandle",i],this.props.additionalClassName),style:{"--slider-value":c,"--slider-color":this.props.styleVariant==o.Color?this.props.sliderColor:null},ref:this.m_refSlider,onMouseDown:this.onSliderMouseDown,onMouseEnter:this.onSliderMouseEnter,onMouseLeave:this.onSliderMouseLeave},a.createElement("div",{className:"Track"},this.normalizedDetents.map((e=>a.createElement("div",{key:"detent-"+e,className:"Detent",style:{"--detent-value":e.toString()}})))),p),r&&a.createElement("div",{className:"RangeLabel"},t))}};v.DETENT_SNAP_DISTANCE=.05,v.DETENT_UNIGNORE_DISTANCE=.15,(0,r.gn)([l.ak],v.prototype,"onSliderMouseDown",null),(0,r.gn)([l.ak],v.prototype,"onWindowMouseMove",null),(0,r.gn)([l.ak],v.prototype,"onSliderMouseEnter",null),(0,r.gn)([l.ak],v.prototype,"onSliderMouseLeave",null),(0,r.gn)([c.Fl],v.prototype,"isSnappedToDetent",null),(0,r.gn)([l.ak],v.prototype,"onWindowMouseUp",null),(0,r.gn)([c.Fl],v.prototype,"styleVariant",null),(0,r.gn)([c.Fl],v.prototype,"valueStyleVariant",null),(0,r.gn)([c.Fl],v.prototype,"externalRangeMin",null),(0,r.gn)([c.Fl],v.prototype,"externalRangeMax",null),(0,r.gn)([c.Fl],v.prototype,"normalizedStep",null),(0,r.gn)([c.Fl],v.prototype,"exponent",null),(0,r.gn)([c.Fl],v.prototype,"normalizedDetents",null),(0,r.gn)([l.ak],v.prototype,"externalToNormalized",null),(0,r.gn)([l.ak],v.prototype,"normalizedToExternal",null),(0,r.gn)([c.Fl],v.prototype,"normalizedValue",null),(0,r.gn)([c.Fl],v.prototype,"externalValue",null),(0,r.gn)([c.Fl],v.prototype,"shouldTriggerHapticOnSnap",null),(0,r.gn)([l.ak],v.prototype,"onDragAnimationFrame",null),v=i=(0,r.gn)([d.Pi],v)},7264:(e,t,n)=>{n.d(t,{G:()=>r,y:()=>i});var i,o=n(655),s=n(6321);!function(e){e[e.DashboardLoaded=0]="DashboardLoaded",e[e.DashboardLoading=1]="DashboardLoading",e[e.DashboardOpen=2]="DashboardOpen",e[e.DashboardClose=3]="DashboardClose",e[e.DashboardIdle=4]="DashboardIdle",e[e.DashboardLaunch=5]="DashboardLaunch",e[e.DashboardKill=6]="DashboardKill",e[e.DashboardFailure=7]="DashboardFailure",e[e.ControlBarButtonPress=8]="ControlBarButtonPress",e[e.ControlBarButtonRelease=9]="ControlBarButtonRelease",e[e.KeyboardClick=10]="KeyboardClick",e[e.WindowTransition=11]="WindowTransition",e[e.WindowAppear=12]="WindowAppear",e[e.WindowDisappear=13]="WindowDisappear",e[e.MajorTransition=14]="MajorTransition",e[e.Notification=15]="Notification",e[e.ButtonClick=16]="ButtonClick",e[e.Fiddle_03=17]="Fiddle_03",e[e.Fiddle_04=18]="Fiddle_04",e[e.SurfaceClick=19]="SurfaceClick",e[e.VolumePreview=20]="VolumePreview",e[e.Grab=21]="Grab",e[e.GrabRelease=22]="GrabRelease",e[e.ThemeStore=23]="ThemeStore",e[e.ThemeDesktop=24]="ThemeDesktop",e[e.ThemeLibrary=25]="ThemeLibrary",e[e.ThemeSettings=26]="ThemeSettings",e[e.ThemeNowPlaying=27]="ThemeNowPlaying",e[e.TraySlideOut=28]="TraySlideOut",e[e.TraySlideIn=29]="TraySlideIn"}(i||(i={}));class r{constructor(){this.m_mapSoundElems=new Map}static get Instance(){return r.s_Instance||(r.s_Instance=new r),r.s_Instance}preloadSounds(){if(!((0,s.Op)()!=s.qA.Overlay||this.m_mapSoundElems.size>0))for(let e in i)isNaN(Number(e))||this.loadSounds(Number(e))}playSound(e){return(0,o.mG)(this,void 0,void 0,(function*(){if((0,s.Op)()!=s.qA.Overlay)return;if(null==e)return;const t=this.getAudioElems(e);if(!t||0==t.length)return;const n=t[Math.floor(Math.random()*t.length)];n.pause(),n.currentTime=0;try{yield n.play()}catch(t){console.error(`Failed to play sound effect "${i[e]}" (${n.src}, networkState=${n.networkState}, readyState=${n.readyState})`)}}))}loadSounds(e){const t=r.Sources[e],n=t.source;if(!n)return void this.m_mapSoundElems.set(e,[]);const i=("string"==typeof n?[n]:n).map((e=>{var n,i;let o=document.createElement("audio");return o.src=`${e}?t=${(new Date).getTime()}`,o.preload="auto",o.volume=null!==(n=t.volume)&&void 0!==n?n:1,(null===(i=t.bRespectsGlobalVolume)||void 0===i||i)&&(o.volume*=1),o}));this.m_mapSoundElems.set(e,i)}getAudioElems(e){return this.m_mapSoundElems.has(e)||(console.warn("Playing a sound which was not preloaded. Consider calling SoundEffects.Instance.preloadSounds()."),this.loadSounds(e)),this.m_mapSoundElems.get(e)}}r.Sources={[i.DashboardLoaded]:{source:""},[i.DashboardLoading]:{source:""},[i.DashboardOpen]:{source:"",volume:.5},[i.DashboardClose]:{source:"",volume:.2},[i.DashboardIdle]:{source:""},[i.DashboardLaunch]:{source:""},[i.DashboardKill]:{source:""},[i.DashboardFailure]:{source:""},[i.ControlBarButtonPress]:{source:"",volume:1},[i.ControlBarButtonRelease]:{source:"/dashboard/sounds/activation.wav"},[i.KeyboardClick]:{source:""},[i.WindowTransition]:{source:""},[i.WindowAppear]:{source:""},[i.WindowDisappear]:{source:""},[i.MajorTransition]:{source:""},[i.Notification]:{source:""},[i.ButtonClick]:{source:"/dashboard/sounds/activation.wav"},[i.Fiddle_03]:{source:""},[i.Fiddle_04]:{source:""},[i.SurfaceClick]:{source:"/dashboard/sounds/activation_change_fail.wav"},[i.VolumePreview]:{source:"/dashboard/sounds/volume_change.wav",bRespectsGlobalVolume:!1},[i.Grab]:{source:""},[i.GrabRelease]:{source:"/dashboard/sounds/activation.wav"},[i.ThemeStore]:{source:""},[i.ThemeDesktop]:{source:""},[i.ThemeLibrary]:{source:""},[i.ThemeSettings]:{source:""},[i.ThemeNowPlaying]:{source:""},[i.TraySlideOut]:{source:""},[i.TraySlideIn]:{source:""}},r.s_Instance=null},9981:(e,t,n)=>{n.d(t,{Ti:()=>c});var i,o,s=n(655),r=n(7294),a=n(1058),l=n(7056);!function(e){e[e.Fade=0]="Fade"}(i||(i={})),function(e){e[e.Hidden=0]="Hidden",e[e.Showing=1]="Showing",e[e.Shown=2]="Shown",e[e.Hiding=3]="Hiding"}(o||(o={}));class c extends r.Component{constructor(e){super(e),this.m_nNextStateTimeoutHandle=0,this.state={eAnimationState:e.visible?o.Shown:o.Hidden}}componentDidMount(){this.emitStateCallback()}componentWillUnmount(){this.cancelTimeout()}cancelTimeout(){clearTimeout(this.m_nNextStateTimeoutHandle)}emitStateCallback(){var e,t,n,i,s,r,a,l;switch(this.state.eAnimationState){case o.Showing:null===(t=(e=this.props).onStartShowing)||void 0===t||t.call(e);break;case o.Shown:null===(i=(n=this.props).onShown)||void 0===i||i.call(n);break;case o.Hiding:null===(r=(s=this.props).onStartHiding)||void 0===r||r.call(s);break;case o.Hidden:null===(l=(a=this.props).onHidden)||void 0===l||l.call(a)}}componentDidUpdate(e,t){this.state.eAnimationState!=t.eAnimationState&&this.emitStateCallback(),this.props.visible!=e.visible&&(this.cancelTimeout(),this.m_nNextStateTimeoutHandle=setTimeout(this.finishAnimation,1e3*this.props.duration),this.setState({eAnimationState:this.props.visible?o.Showing:o.Hiding}))}static getDerivedStateFromProps(e,t){return{}}finishAnimation(){this.setState((e=>{switch(e.eAnimationState){case o.Showing:return{eAnimationState:o.Shown};case o.Hiding:return{eAnimationState:o.Hidden}}return null}))}render(){return this.state.eAnimationState==o.Hidden?null:r.createElement("div",{className:(0,a.LJ)("ShowHideAnimation",o[this.state.eAnimationState],["Preset-"+i[this.props.preset],void 0!==this.props.preset],this.props.additionalClassName),style:{"--show-hide-duration":this.props.duration+"s"}},this.props.children)}}(0,s.gn)([l.ZP],c.prototype,"cancelTimeout",null),(0,s.gn)([l.ZP],c.prototype,"finishAnimation",null)},9670:(e,t,n)=>{n.d(t,{S:()=>c});var i=n(655),o=n(7056),s=n(9669),r=n.n(s),a=n(2188);class l{constructor(){this.m_Applications=a.LO.map(),this.m_sceneApplicationStateChangedEventHandle=null}Init(){return(0,i.mG)(this,void 0,void 0,(function*(){this.m_sceneApplicationStateChangedEventHandle=null===VRHTML||void 0===VRHTML?void 0:VRHTML.RegisterForSceneApplicationStateChangedEvents(this.onSceneApplicationStateChanged),yield this.UpdateApplications()}))}onSceneApplicationStateChanged(){this.UpdateApplications()}SetApplicationMap(e){this.m_Applications.clear(),e.apps.forEach((e=>{this.m_Applications.set(e.key,e)}))}UpdateApplications(){return(0,i.mG)(this,void 0,void 0,(function*(){yield this.QueryApplications().then((e=>{this.SetApplicationMap(e)}))}))}QueryApplications(){return new Promise((function(e,t){r().get("/app/list.json").then((t=>{e(t.data)})).catch((e=>{t(e)}))}))}GetAppImageURL(e){var t;return"/app/image?app_key="+e+"&version="+(null!==(t=null===VRHTML||void 0===VRHTML?void 0:VRHTML.SteamVRVersion())&&void 0!==t?t:"0")}GetApp(e){return this.m_Applications.has(e)?this.m_Applications.get(e):void 0}GetRecentApps(){let e=[];return this.m_Applications.forEach((t=>{t.is_internal||e.push(t)})),e.sort(((e,t)=>e.last_launch<t.last_launch?1:e.last_launch>t.last_launch?-1:e.name<t.name?1:e.name>t.name?-1:0)),e}GetCurrentSceneProcess(){let e;return this.m_Applications.forEach((t=>{t.current_scene_process&&!t.is_internal&&(e=t)})),e}GetRunningApps(){let e=[];for(let t of this.m_Applications.values())t.pid&&e.push(t);return e}FindAppByPid(e){for(let t of this.m_Applications.values())if(t.pid==e)return t}IsAppAllowedPrivateInputs(e){return"openvr.component.vrcompositor"==e}ShouldShowBindingFailureForApp(e){if(null==e||""==e)return!1;if("openvr.component.vrcompositor"==e)return!0;if(null==this.GetApp(e))return!1;let t=this.GetCurrentSceneProcess();return null!=t&&t.key==e}}(0,i.gn)([a.LO],l.prototype,"m_Applications",void 0),(0,i.gn)([o.ak],l.prototype,"onSceneApplicationStateChanged",null),(0,i.gn)([a.aD],l.prototype,"SetApplicationMap",null),(0,i.gn)([o.ak],l.prototype,"QueryApplications",null),(0,i.gn)([o.ak],l.prototype,"GetAppImageURL",null),(0,i.gn)([o.ak],l.prototype,"GetApp",null),(0,i.gn)([o.ak],l.prototype,"GetRecentApps",null),(0,i.gn)([o.ak],l.prototype,"GetCurrentSceneProcess",null),(0,i.gn)([o.ak],l.prototype,"IsAppAllowedPrivateInputs",null),(0,i.gn)([o.ak],l.prototype,"ShouldShowBindingFailureForApp",null);const c=new l;window.applications=c},197:(e,t,n)=>{n.d(t,{A4:()=>g,Av:()=>U,Az:()=>m,BW:()=>x,EL:()=>E,Ek:()=>F,FM:()=>X,GN:()=>h,MI:()=>a,MZ:()=>A,Ml:()=>q,O5:()=>l,PF:()=>d,Pt:()=>w,Pv:()=>o,RD:()=>L,RM:()=>v,Us:()=>u,Vq:()=>b,W4:()=>s,Xl:()=>_,Y8:()=>S,aT:()=>T,bp:()=>D,bt:()=>M,eW:()=>R,f8:()=>f,fY:()=>O,fj:()=>W,gB:()=>p,hK:()=>i,jW:()=>r,je:()=>k,k_:()=>H,ml:()=>C,nf:()=>B,o1:()=>G,oh:()=>P,r4:()=>y,wB:()=>c,y3:()=>V,yQ:()=>N,zL:()=>I});const i="openvr.tool.steamvr_environments",o="system.generated.steam.exe",s="steam.app.250820",r="steam.app.330050",a="system.dashboard.",l=a+"quicklaunch",c=a+"quickstore",d=a+"nowplaying",p=a+"desktop",u="current.scene.app.binding.list",h="system.standalone",m="system.systemui",g="system.settings",S="valve.steam.bigpicture",_="valve.steam.desktop",v="system.vrwebhelper.controllerbinding",f="system.messageoverlay",y="system.desktop",b="system.window",A="valve.steam",C="DashboardCurvatureOrigin",w=m+"::"+C,k="/settings/steamvr/enableHomeApp",M="/settings/steamvr/supersampleManualOverride",R="/settings/steamvr/supersampleScale",T="/settings/GpuSpeed/gpuSpeedRenderTargetScale",P="/settings/camera/roomViewStyle",E="/settings/steamvr/backgroundCameraHeight",L="/settings/steamvr/backgroundDomeRadius",D="/settings/steamvr/analogGain",I="/settings/driver_lighthouse/indexHmdColumnCorrection",O="/settings/steamvr/showAdvancedSettings",B="/settings/dashboard/lastAccessedExternalOverlayKey",V="/settings/internal/dashboardInitialOverlay",G="/settings/dashboard/position_2",x="/settings/dashboard/disableAnimations",F="/settings/steamvr/overlayRenderQuality_2",N="/settings/collisionBounds/CollisionBoundsFadeDistance",H="/settings/camera/roomView",U="/settings/camera/enableCamera",W="/settings/dashboard/enableWindowView",X="/settings/dashboard/maxInlineTabs",q="binding_callouts/main"},1428:(e,t,n)=>{n.d(t,{Cl:()=>M,E9:()=>R,Fv:()=>A,NK:()=>o,_l:()=>k,c6:()=>L,ik:()=>i});var i,o,s,r=n(655),a=n(7056),l=n(9669),c=n.n(l),d=n(2188),p=n(3868),u=n(6321),h=n(6477),m=n(9670),g=n(3947);class S{}(0,r.gn)([d.LO],S.prototype,"path",void 0),(0,r.gn)([d.LO],S.prototype,"mode",void 0),(0,r.gn)([d.LO],S.prototype,"parameters",void 0),(0,r.gn)([d.LO],S.prototype,"inputs",void 0);class _{}(0,r.gn)([d.LO],_.prototype,"path",void 0),(0,r.gn)([d.LO],_.prototype,"output",void 0);class v{}(0,r.gn)([d.LO],v.prototype,"path",void 0),(0,r.gn)([d.LO],v.prototype,"output",void 0);class f{}(0,r.gn)([d.LO],f.prototype,"path",void 0),(0,r.gn)([d.LO],f.prototype,"output",void 0);class y{}(0,r.gn)([d.LO],y.prototype,"output",void 0),(0,r.gn)([d.LO],y.prototype,"inputs",void 0);class b{}(0,r.gn)([d.LO],b.prototype,"chords",void 0),(0,r.gn)([d.LO],b.prototype,"poses",void 0),(0,r.gn)([d.LO],b.prototype,"haptics",void 0),(0,r.gn)([d.LO],b.prototype,"sources",void 0),(0,r.gn)([d.LO],b.prototype,"skeleton",void 0),function(e){e[e.eButtonSide_None=0]="eButtonSide_None",e[e.eButtonSide_Left=1]="eButtonSide_Left",e[e.eButtonSide_Right=2]="eButtonSide_Right"}(i||(i={})),function(e){e.eTrackPadInvert_None="",e.eTrackPadInvert_X="x",e.eTrackPadInvert_Y="y",e.eTrackPadInvert_XY="xy"}(o||(o={}));class A{constructor(){this.vecRequired=[],this.vecSuggested=[]}}class C{}(0,r.gn)([d.LO],C.prototype,"device_path_string",void 0),(0,r.gn)([d.LO],C.prototype,"device_path_handle",void 0),(0,r.gn)([d.LO],C.prototype,"role",void 0),(0,r.gn)([d.LO],C.prototype,"controller_role",void 0);class w{}function k(e){return new Promise((function(t,n){c().get("/input/getactions.json?app_key="+e).then((n=>{console.log("Loaded action manifest for ",e),t(n.data)})).catch((e=>{n(e)}))}))}function M(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){let i=(yield c().get("/input/loadbindingfromurl.json?binding_url="+encodeURI(n)+"&controller_type="+encodeURI(t)+"&app_key="+encodeURI(e))).data;if(i.success)return i;throw new Error(i.error)}))}(0,r.gn)([d.LO],w.prototype,"trackers",void 0),(0,r.gn)([d.LO],w.prototype,"valid_roles",void 0);class R{constructor(e,t){this.x=e,this.y=t,this.toString.bind(this)}toString(){return this.x+","+this.y}}class T{constructor(e,t,n,i,o){this.m_BindingUISource=void 0,this.m_ControllerProfile=void 0,this.m_sDeviceInputPath=void 0,this.m_eButtonSide=void 0,this.m_sInputPath=void 0,this.m_sActionSet=void 0,this.m_BindingStoreObserverDisposer=void 0,this.m_iNewSourceEntry=-1,this.m_sDeviceInputPath=e,this.m_ControllerProfile=t,this.m_eButtonSide=n,this.m_sInputPath=i,this.m_sActionSet=o,this.m_BindingStoreObserverDisposer=(0,d.N7)(L,(e=>{"m_LoadedBinding"==e.name&&this.UpdateBindingSource()})),this.UpdateBindingSource(),L.RegisterBindingWatcher(this.UpdateBindingSource.bind(this))}cancelWatcher(){this.m_BindingStoreObserverDisposer(),L.UnregisterBindingWatcher(this.UpdateBindingSource)}UpdateBindingSource(){this.m_BindingUISource=L.GetActionBinding(this.GetFullInputPath,this.m_sActionSet)}get GetFullInputPath(){let e=this.m_sDeviceInputPath+this.m_sInputPath;return e=e.replace(/([^:]\/)\/+/g,"$1"),e}GetSVGEndPoint(){return new R(this.m_ControllerProfile.input_source[this.m_sInputPath].binding_image_point[0],this.m_ControllerProfile.input_source[this.m_sInputPath].binding_image_point[1])}get GetButtonSide(){return this.m_eButtonSide}get GetNumModes(){return this.m_BindingUISource?this.m_BindingUISource.length:0}GetActionForInputType(e,t){if(this.m_BindingUISource&&this.m_BindingUISource[e].inputs&&this.m_BindingUISource[e].inputs.has(t)){let n=this.m_BindingUISource[e].inputs.get(t).output,i=L.GetActionByName(n);if(!i){let e=L.GetSimulatedActionByPath(n);e&&(i=L.CreateActionDefinitionForSimulatedAction(e))}let o=L.GetAliasInfo(n);return i&&o&&o.alias_name&&(i=Object.assign({},i),i.localized_name=o.alias_name),i}}GetClickAction(e){return this.GetActionForInputType(e,"click")}GetTouchAction(e){return this.GetActionForInputType(e,"touch")}GetPositionAction(e){return this.GetActionForInputType(e,"position")}GetHeldAction(e){return this.GetActionForInputType(e,"held")}GetLongAction(e){return this.GetActionForInputType(e,"long")}GetSingleAction(e){return this.GetActionForInputType(e,"single")}GetDoubleAction(e){return this.GetActionForInputType(e,"double")}GetNorthAction(e){return this.GetActionForInputType(e,"north")}GetEastAction(e){return this.GetActionForInputType(e,"east")}GetSouthAction(e){return this.GetActionForInputType(e,"south")}GetWestAction(e){return this.GetActionForInputType(e,"west")}GetCenterAction(e){return this.GetActionForInputType(e,"center")}GetScrollAction(e){return this.GetActionForInputType(e,"scroll")}GetPullAction(e){return this.GetActionForInputType(e,"pull")}GetForceAction(e){return this.GetActionForInputType(e,"force")}GetGrabAction(e){return this.GetActionForInputType(e,"grab")}GetValueAction(e){return this.GetActionForInputType(e,"value")}get GetControllerInputName(){return g.I.LocalizeDriverString(this.m_ControllerProfile.resource_root,this.m_sInputPath)}get GetModes(){return this.m_BindingUISource?this.m_BindingUISource:[]}GetMode(e){return this.m_BindingUISource&&e>=0&&e<this.m_BindingUISource.length?this.m_BindingUISource[e].mode:"none"}get GetInputSourceType(){return this.m_ControllerProfile.input_source[this.m_sInputPath].type}get GetInputSource(){return this.m_ControllerProfile.input_source[this.m_sInputPath]}get GetInputSourceClickSupport(){return!(this.m_ControllerProfile.input_source[this.m_sInputPath].force&&!this.m_ControllerProfile.input_source[this.m_sInputPath].click)&&("knuckles"!=this.m_ControllerProfile.controller_type||"/input/trackpad"!=this.m_sInputPath)&&!(!this.m_ControllerProfile.input_source[this.m_sInputPath].click&&!this.m_ControllerProfile.input_source[this.m_sInputPath].touch)&&(this.m_ControllerProfile.input_source[this.m_sInputPath].click||this.m_ControllerProfile.input_source[this.m_sInputPath].touch)}get GetInputSourceTouchSupport(){return!(!this.m_ControllerProfile.input_source[this.m_sInputPath].touch&&!this.m_ControllerProfile.input_source[this.m_sInputPath].proximity)&&(this.m_ControllerProfile.input_source[this.m_sInputPath].touch||this.m_ControllerProfile.input_source[this.m_sInputPath].proximity)}get GetInputSourceForceSupport(){return!!this.m_ControllerProfile.input_source[this.m_sInputPath].force&&this.m_ControllerProfile.input_source[this.m_sInputPath].force}get GetInputSourceDefaultDeadzone(){return this.m_ControllerProfile.input_source[this.m_sInputPath].default_dead_zone_pct?this.m_ControllerProfile.input_source[this.m_sInputPath].default_dead_zone_pct:0}SetInputMode(e,t){!this.m_BindingUISource||t<0||t>=this.m_BindingUISource.length?console.error("SetInputMode: Invalid mode index for new mode"):(this.ClearNewModeIfSet(t),L.SetInputModeForInputSource(this.GetFullInputPath,t,e))}AddInputMode(e){this.m_iNewSourceEntry=L.AddInputModeForSource(this.GetFullInputPath,e)}DeleteInputMode(e){!this.m_BindingUISource||e<0||e>=this.m_BindingUISource.length?console.error("SetInputMode: Invalid mode index for new mode"):L.DeleteInputModeForSource(this.GetFullInputPath,e)}ClearNewModeIfSet(e){-1!=this.m_iNewSourceEntry&&this.m_iNewSourceEntry==e&&(this.m_iNewSourceEntry=-1)}BHasModeSelectionPending(e){return-1!=this.m_iNewSourceEntry&&this.m_iNewSourceEntry==e}SetClickAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"click",t,["button","trackpad","joystick","trigger","toggle_button","complex_button"])}SetTouchAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"touch",t,["button","trackpad","joystick","trigger","toggle_button","complex_button"])}SetHeldAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"held",t,["button","complex_button"])}SetLongAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"long",t,["button","complex_button"])}SetSingleAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"single",t,["button","complex_button"])}SetDoubleAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"double",t,["button","complex_button"])}SetPositionAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"position",t,["trackpad","joystick"])}SetNorthAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"north",t,["dpad","dpad_click","dpad_touch"])}SetEastAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"east",t,["dpad","dpad_click","dpad_touch"])}SetSouthAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"south",t,["dpad","dpad_click","dpad_touch"])}SetWestAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"west",t,["dpad","dpad_click","dpad_touch"])}SetCenterAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"center",t,["dpad","dpad_click","dpad_touch"])}SetScrollAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"scroll",t,["scroll"])}SetPullAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"pull",t,["trigger"])}SetForceAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"force",t,["force_sensor"])}SetGrabAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"grab",t,["grab"])}SetValueAction(e,t){L.SetActionForInputModeType(this.GetFullInputPath,e,"value",t,["scalar_constant"])}CopyActions(e){L.ClearModesForInputPath(this.GetFullInputPath),e.GetModes.map(((e,t)=>{L.AddInputModeForSource(this.GetFullInputPath,e.mode),e.inputs.forEach(((e,n)=>{L.SetActionForInputModeType(this.GetFullInputPath,t,n,e.output,[])}))}))}BindingsMatch(e){let t=e.GetModes;if(this.GetModes.length!=t.length)return!1;for(let e=0;e<t.length;e++){let n=t[e],i=this.GetModes.filter((e=>e.mode==n.mode));if(i.length>0){let e=!0;return i[0].inputs.forEach(((t,i)=>{n.inputs.has(i)&&n.inputs.get(i).output==t.output||(e=!1)})),e}return!1}return!0}SetClickParameter(e,t,n){L.SetParameterForInputModeType(this.GetFullInputPath,e,"click",t,n)}SetTouchParameter(e,t,n){L.SetParameterForInputModeType(this.GetFullInputPath,e,"touch",t,n)}SetParameter(e,t,n,i){L.SetParameterForInputModeType(this.GetFullInputPath,e,t,n,i)}GetClickParameter(e,t){return L.GetParameterForInputModeType(this.GetFullInputPath,e,"click",t)}GetTouchParameter(e,t){return L.GetParameterForInputModeType(this.GetFullInputPath,e,"touch",t)}GetParameter(e,t,n){return L.GetParameterForInputModeType(this.GetFullInputPath,e,t,n)}GetTrackpadInvertState(e){switch(L.GetParameterForInputModeType(this.GetFullInputPath,e,"trackpad","invert")){case"x":return o.eTrackPadInvert_X;case"y":return o.eTrackPadInvert_Y;case"xy":return o.eTrackPadInvert_XY;default:return o.eTrackPadInvert_None}}SetTrackpadInvertState(e,t){let n="";switch(t){case o.eTrackPadInvert_X:n="x";break;case o.eTrackPadInvert_Y:n="y";break;case o.eTrackPadInvert_XY:n="xy"}L.SetParameterForInputModeType(this.GetFullInputPath,e,"trackpad","invert",n)}}(0,r.gn)([d.LO],T.prototype,"m_BindingUISource",void 0),(0,r.gn)([d.LO],T.prototype,"m_ControllerProfile",void 0),(0,r.gn)([d.LO],T.prototype,"m_sDeviceInputPath",void 0),(0,r.gn)([d.LO],T.prototype,"m_eButtonSide",void 0),(0,r.gn)([d.LO],T.prototype,"m_sInputPath",void 0),(0,r.gn)([d.LO],T.prototype,"m_sActionSet",void 0),(0,r.gn)([a.ak],T.prototype,"cancelWatcher",null),(0,r.gn)([d.aD],T.prototype,"UpdateBindingSource",null),(0,r.gn)([d.Fl],T.prototype,"GetFullInputPath",null),(0,r.gn)([a.ak],T.prototype,"GetSVGEndPoint",null),(0,r.gn)([d.Fl],T.prototype,"GetButtonSide",null),(0,r.gn)([d.Fl],T.prototype,"GetNumModes",null),(0,r.gn)([a.ak],T.prototype,"GetActionForInputType",null),(0,r.gn)([a.ak],T.prototype,"GetClickAction",null),(0,r.gn)([a.ak],T.prototype,"GetTouchAction",null),(0,r.gn)([a.ak],T.prototype,"GetPositionAction",null),(0,r.gn)([a.ak],T.prototype,"GetHeldAction",null),(0,r.gn)([a.ak],T.prototype,"GetLongAction",null),(0,r.gn)([a.ak],T.prototype,"GetSingleAction",null),(0,r.gn)([a.ak],T.prototype,"GetDoubleAction",null),(0,r.gn)([a.ak],T.prototype,"GetNorthAction",null),(0,r.gn)([a.ak],T.prototype,"GetEastAction",null),(0,r.gn)([a.ak],T.prototype,"GetSouthAction",null),(0,r.gn)([a.ak],T.prototype,"GetWestAction",null),(0,r.gn)([a.ak],T.prototype,"GetCenterAction",null),(0,r.gn)([a.ak],T.prototype,"GetScrollAction",null),(0,r.gn)([a.ak],T.prototype,"GetPullAction",null),(0,r.gn)([a.ak],T.prototype,"GetForceAction",null),(0,r.gn)([a.ak],T.prototype,"GetGrabAction",null),(0,r.gn)([a.ak],T.prototype,"GetValueAction",null),(0,r.gn)([d.Fl],T.prototype,"GetControllerInputName",null),(0,r.gn)([d.Fl],T.prototype,"GetModes",null),(0,r.gn)([a.ak],T.prototype,"GetMode",null),(0,r.gn)([d.Fl],T.prototype,"GetInputSourceType",null),(0,r.gn)([d.Fl],T.prototype,"GetInputSource",null),(0,r.gn)([d.Fl],T.prototype,"GetInputSourceClickSupport",null),(0,r.gn)([d.Fl],T.prototype,"GetInputSourceTouchSupport",null),(0,r.gn)([d.Fl],T.prototype,"GetInputSourceForceSupport",null),(0,r.gn)([d.Fl],T.prototype,"GetInputSourceDefaultDeadzone",null),(0,r.gn)([d.aD],T.prototype,"SetInputMode",null),(0,r.gn)([d.aD],T.prototype,"AddInputMode",null),(0,r.gn)([d.aD],T.prototype,"DeleteInputMode",null),(0,r.gn)([a.ak],T.prototype,"ClearNewModeIfSet",null),(0,r.gn)([a.ak],T.prototype,"BHasModeSelectionPending",null),(0,r.gn)([d.aD],T.prototype,"SetClickAction",null),(0,r.gn)([d.aD],T.prototype,"SetTouchAction",null),(0,r.gn)([d.aD],T.prototype,"SetHeldAction",null),(0,r.gn)([d.aD],T.prototype,"SetLongAction",null),(0,r.gn)([d.aD],T.prototype,"SetSingleAction",null),(0,r.gn)([d.aD],T.prototype,"SetDoubleAction",null),(0,r.gn)([d.aD],T.prototype,"SetPositionAction",null),(0,r.gn)([d.aD],T.prototype,"SetNorthAction",null),(0,r.gn)([d.aD],T.prototype,"SetEastAction",null),(0,r.gn)([d.aD],T.prototype,"SetSouthAction",null),(0,r.gn)([d.aD],T.prototype,"SetWestAction",null),(0,r.gn)([d.aD],T.prototype,"SetCenterAction",null),(0,r.gn)([d.aD],T.prototype,"SetScrollAction",null),(0,r.gn)([d.aD],T.prototype,"SetPullAction",null),(0,r.gn)([d.aD],T.prototype,"SetForceAction",null),(0,r.gn)([d.aD],T.prototype,"SetGrabAction",null),(0,r.gn)([d.aD],T.prototype,"SetValueAction",null),(0,r.gn)([d.aD],T.prototype,"CopyActions",null),(0,r.gn)([a.ak],T.prototype,"BindingsMatch",null),(0,r.gn)([d.aD],T.prototype,"SetClickParameter",null),(0,r.gn)([d.aD],T.prototype,"SetTouchParameter",null),(0,r.gn)([d.aD],T.prototype,"SetParameter",null),(0,r.gn)([d.aD],T.prototype,"GetClickParameter",null),(0,r.gn)([d.aD],T.prototype,"GetTouchParameter",null),(0,r.gn)([d.aD],T.prototype,"GetParameter",null),(0,r.gn)([a.ak],T.prototype,"GetTrackpadInvertState",null),(0,r.gn)([d.aD],T.prototype,"SetTrackpadInvertState",null);class P{constructor(e,t,n){this.m_sSaveType=e,this.m_OutstandingSaveBindingResolve=t,this.m_OutstandingSaveBindingReject=n}resolve(e){this.m_OutstandingSaveBindingResolve(e)}reject(e){this.m_OutstandingSaveBindingReject(e)}get SaveType(){return this.m_sSaveType}}(0,r.gn)([a.ak],P.prototype,"resolve",null),(0,r.gn)([a.ak],P.prototype,"reject",null),function(e){e[e.eWebSocketState_Unknown=0]="eWebSocketState_Unknown",e[e.eWebSocketState_Disconnected=1]="eWebSocketState_Disconnected",e[e.eWebSocketState_Connecting=2]="eWebSocketState_Connecting",e[e.eWebSocketState_Connected=3]="eWebSocketState_Connected"}(s||(s={}));class E{constructor(){this.m_wsWebSocketToServer=void 0,this.m_eWebSocketState=s.eWebSocketState_Unknown,this.m_timerWebSocket=void 0,this.m_dateStartTime=new Date,this.m_sLoadedBindingURI=void 0,this.m_LoadedBinding=void 0,this.m_ModifiedBindingSet=d.LO.map(),this.m_ModifiedOptions=d.LO.map(),this.m_ModifiedAliases=d.LO.map(),this.m_sName=void 0,this.m_sDescription=void 0,this.m_sInteractionProfile=void 0,this.m_SelectedApp=void 0,this.m_SelectedAppActions=void 0,this.m_sSelectedActionSet=void 0,this.m_sSelectedControllerType=void 0,this.m_TrackerBindingSetup=void 0,this.m_bControllerTypeSelectedByUser=!1,this.m_OutstandingSaveBindingCalls=[],this.m_vecBindingSetWatchers=Array(),this.m_mapUnoundActions=new Map,this.m_bIsMissingRequiredActions=!1,this.m_rKnownFailedBindingUris=[],this.m_ControllerWatchers=new Map,this.m_ModifiedSimulatedActions=d.LO.map(),this.m_nNextSimulatedActionId=1,this.m_nBindingSubscriptionChangedCanary=1}OpenWebSocketToHost(){return new Promise(((e,t)=>{this.m_eWebSocketState!=s.eWebSocketState_Connecting&&this.m_eWebSocketState!=s.eWebSocketState_Connected&&(this.m_wsWebSocketToServer&&delete this.m_wsWebSocketToServer,this.m_wsWebSocketToServer=new WebSocket("ws://"+window.location.host),this.m_wsWebSocketToServer.addEventListener("open",(t=>{this.OnWebSocketOpen(t),e()})),this.m_wsWebSocketToServer.addEventListener("message",(e=>{this.OnWebSocketMessage(e)})),this.m_wsWebSocketToServer.addEventListener("close",(e=>{this.OnWebSocketClose(e)})),this.m_eWebSocketState=s.eWebSocketState_Connecting),this.m_timerWebSocket||(this.m_timerWebSocket=window.setTimeout(this.OpenWebSocketToHost,1e3))}))}Init(){return(0,r.mG)(this,void 0,void 0,(function*(){yield this.OpenWebSocketToHost(),yield this.RefreshInputState()}))}CountDevicesWithControllerType(e){let t=0;return g.I.ConnectedDevices.forEach((n=>{n.controller_type==e&&t++})),t}ComputeControllerTypeScore(e){let t=this.CountDevicesWithControllerType(e.controller_type),n=((null===u.ZP||void 0===u.ZP?void 0:u.ZP.HasHMD())?null===u.ZP||void 0===u.ZP?void 0:u.ZP.VRProperties.GetStringProperty("/user/head",u.Uk.Prop_ExpectedControllerType_String):void 0)==e.controller_type?2:1;return 1e3*(999-e.priority)+10*t+n}GetBestControllerType(){let e,t=0;return g.I.ControllerTypes.forEach((n=>{let i=this.ComputeControllerTypeScore(n);i>t&&(e=n,t=i)})),e}RefreshInputState(){return(0,r.mG)(this,void 0,void 0,(function*(){let e=g.I.KnownControllerTypes.size;return g.I.GetInputState().then((()=>{this.m_SelectedApp&&e!=g.I.KnownControllerTypes.size&&this.ReloadCurrentApp();let t=!1;const n=this.GetBestControllerType();let i=g.I.FindDeviceClassForControllerType(this.m_sSelectedControllerType);if(null!=n&&this.m_sSelectedControllerType!=n.controller_type&&!this.m_bControllerTypeSelectedByUser){let e=g.I.FindDeviceClassForControllerType(n.controller_type);h.w.IsSafeToResetControllerType(i,e)&&(this.m_sSelectedControllerType=n.controller_type,t=!0,null!=i&&h.w.RefreshBindingList())}return t?this.ReloadControllerConfiguration():null}))}))}get SteamVRUnavailable(){return this.m_eWebSocketState==s.eWebSocketState_Connecting||this.m_eWebSocketState==s.eWebSocketState_Unknown?Date.now()-this.m_dateStartTime.getTime()>1e4:this.m_eWebSocketState!=s.eWebSocketState_Connected}get ActionSets(){if(null==this.m_SelectedAppActions||null==this.m_SelectedAppActions.action_sets)return[];let e=[];return this.m_SelectedAppActions.action_sets.forEach((t=>{if("hidden"!=t.usage){let n=!0;t.required_options&&t.required_options.forEach((e=>{this.GetOptionValue(e)||(n=!1)}));let i=!1;t.forbidden_options&&t.forbidden_options.forEach((e=>{this.GetOptionValue(e)&&(i=!0)})),n&&!i&&e.push(t)}})),e}get ManifestOptions(){return null==this.m_SelectedAppActions||null==this.m_SelectedAppActions.action_sets||null==this.m_SelectedAppActions.options?[]:this.m_SelectedAppActions.options}get SecondaryControllerOptions(){return[{name:"returnBindingsWithLeftHand",localized_name:(0,p.Xx)("#SecondaryController_ReturnWithLeftHand"),type:"bool",default:!1},{name:"returnBindingsWithRightHand",localized_name:(0,p.Xx)("#SecondaryController_ReturnWithRightHand"),type:"bool",default:!1},{name:"returnBindingsWithHead",localized_name:(0,p.Xx)("#SecondaryController_ReturnWithHead"),type:"bool",default:!1}]}GetOptionDefault(e){let t=!1;return this.ManifestOptions.forEach((n=>{n.name==e&&(t=n.default)})),t}GetOptionValue(e){return this.m_ModifiedOptions.has(e)?this.m_ModifiedOptions.get(e):void 0}HasOptionValue(e){return this.m_ModifiedOptions.has(e)}SetOptionValue(e,t){this.m_ModifiedOptions.set(e,t),this.NotifyWatchersOfChange()}GetAliasInfo(e){return this.m_ModifiedAliases.has(e)?this.m_ModifiedAliases.get(e):null}SetAliasName(e,t){if(this.m_ModifiedAliases.has(e)){let n=this.m_ModifiedAliases.get(e);n.alias_name=t,this.m_ModifiedAliases.set(e,n),this.NotifyWatchersOfChange()}else{let n={alias_name:t,hidden:!1};this.m_ModifiedAliases.set(e,n),this.NotifyWatchersOfChange()}}SetAliasHidden(e,t){if(this.m_ModifiedAliases.has(e)){let n=this.m_ModifiedAliases.get(e);n.hidden=t,this.m_ModifiedAliases.set(e,n),this.NotifyWatchersOfChange()}else{let n={alias_name:"",hidden:t};this.m_ModifiedAliases.set(e,n),this.NotifyWatchersOfChange()}}ComputeSimulatedActionPathFromId(e){return"/simactions/"+e}GetSimulatedActionByPath(e){return this.m_ModifiedSimulatedActions.has(e)?this.m_ModifiedSimulatedActions.get(e):void 0}SetSimulatedActionByPath(e,t){this.m_ModifiedSimulatedActions.set(e,t),this.NotifyWatchersOfChange()}AddSimulatedAction(e){let t={name:"",type:e,id:this.m_nNextSimulatedActionId++,output:""},n=this.ComputeSimulatedActionPathFromId(t.id);this.m_ModifiedSimulatedActions.set(n,t),this.NotifyWatchersOfChange()}DeleteSimulatedActionByPath(e){this.m_ModifiedSimulatedActions.delete(e),this.NotifyWatchersOfChange()}get SimulatedActions(){return Array.from(this.m_ModifiedSimulatedActions.values())}get SelectedApp(){return this.m_SelectedApp?this.m_SelectedApp.key:void 0}get SelectedAppActions(){return this.m_SelectedAppActions}get CurrentAppCanAccessPrivateInputs(){return m.S.IsAppAllowedPrivateInputs(this.m_SelectedApp.key)||g.I.ShouldSendSystemButtonToAllApps}get SelectedControllerTypeInfo(){if(g.I.IsValid&&null!=this.m_sSelectedControllerType)return g.I.GetControllerTypeInfo(this.m_sSelectedControllerType)}DeviceForControllerType(e,t){let n=g.I.GetControllerTypeInfo(e);if(!n)return;let o=!1;return g.I.ConnectedDevices.find((s=>{if(s.controller_type==e){if(o=!0,!t)return!0;if("controller_handed"!=n.input_bindingui_mode)return!0;let e=t==i.eButtonSide_Left?"/left":"/right";if(s.root_path&&s.root_path.indexOf(e)>=0)return!0}return!1}))||(o?g.I.ConnectedDevices.find((t=>t.controller_type==e)):void 0)}get CurrentBindingSaveType(){if(null!=this.m_LoadedBinding)return"developer"==this.m_LoadedBinding.save_type&&L.SelectedBindingIsLegacy?"developer_legacy":this.m_LoadedBinding.save_type}get CurrentBindingActionManifestVersion(){return this.m_LoadedBinding&&this.m_LoadedBinding.binding_config&&this.m_LoadedBinding.binding_config.action_manifest_version?this.m_LoadedBinding.binding_config.action_manifest_version:0}get SelectedActionSet(){return this.m_sSelectedActionSet}get SelectedActionSetDetails(){if(null!=this.m_SelectedAppActions&&null!=this.m_sSelectedActionSet)return this.m_SelectedAppActions.action_sets.find((e=>e.name==this.m_sSelectedActionSet))}get SelectedActionSetActions(){return this.GetActionSetActions(this.m_sSelectedActionSet)}GetSelectedAppDefaultBinding(e){if(null!=this.m_SelectedAppActions)return this.m_SelectedAppActions.default_bindings&&this.m_SelectedAppActions.default_bindings.hasOwnProperty(e)?this.m_SelectedAppActions.default_bindings[e]:void 0}GetActionSetActions(e){if(null==this.m_SelectedAppActions||null==e)return[];let t=this.m_SelectedAppActions.action_sets.find((t=>t.name==e));return t?t.actions:[]}GetActionByName(e){if(null==this.m_SelectedApp||!this.m_SelectedAppActions.action_sets)return;let t,n=e.toLowerCase();return this.m_SelectedAppActions.action_sets.forEach((e=>{if(!e.actions)return;let i=e.actions.find((e=>e.name.toLowerCase()==n));i&&(t=i)})),t}get UnboundActions(){this.m_bIsMissingRequiredActions=!1;for(let e of this.ActionSets){let t=[],n=[];if(!e.actions)break;for(let i of e.actions)if("optional"!=i.requirement&&!this.IsActionBound(e,i.name)){let e=this.GetAliasInfo(i.name);if(e){if(e.hidden)continue;e.alias_name&&(i=Object.assign({},i),i.localized_name=e.alias_name)}"mandatory"==i.requirement?t.push(i):n.push(i)}if(t.length>0&&(this.m_bIsMissingRequiredActions=!0),this.m_mapUnoundActions.has(e.name)){let i=this.m_mapUnoundActions.get(e.name);i.vecRequired=t,i.vecSuggested=n}else this.m_mapUnoundActions.set(e.name,{vecRequired:t,vecSuggested:n})}let e=this.SelectedControllerTypeInfo;return e&&"TrackedDeviceClass_HMD"==e.device_class&&(this.m_bIsMissingRequiredActions=!1),this.IsSecondaryController&&(this.m_bIsMissingRequiredActions=!1),this.m_mapUnoundActions}get HasUnboundActions(){return this.UnboundActions,this.m_bIsMissingRequiredActions}IsActionBound(e,t){t=t.toLowerCase();let n=this.GetActionSetSources(e.name);if(n)for(let e of n){let n=!1;if(e.inputs.forEach((e=>{e.output.toLowerCase()==t&&(n=!0)})),n)return!0}let i=this.GetActionSetChords(e.name);if(i)for(let e of i)if(e.output&&e.output.toLowerCase()==t)return!0;let o=this.GetActionSetPoses(e.name);if(o)for(let e of o)if(e.output&&e.output.toLowerCase()==t)return!0;let s=this.GetActionSetHaptics(e.name);if(s)for(let e of s)if(e.output&&e.output.toLowerCase()==t)return!0;let r=this.GetActionSetSkeleton(e.name);if(r)for(let e of r)if(e.output&&e.output.toLowerCase()==t)return!0;return!1}GetActionSetPoses(e){return this.m_ModifiedBindingSet.has(e)?this.m_ModifiedBindingSet.get(e).poses:[]}get SelectedActionSetPoses(){return this.GetActionSetPoses(this.m_sSelectedActionSet)}GetActionSetHaptics(e){return this.m_ModifiedBindingSet.has(e)?this.m_ModifiedBindingSet.get(e).haptics:[]}get SelectedActionSetHaptics(){return this.GetActionSetHaptics(this.m_sSelectedActionSet)}GetActionSetSkeleton(e){return this.m_ModifiedBindingSet.has(e)?this.m_ModifiedBindingSet.get(e).skeleton:[]}get SelectedActionSetSkeletons(){return this.GetActionSetSkeleton(this.m_sSelectedActionSet)}GetActionSetChords(e){return this.m_ModifiedBindingSet.has(e)?this.m_ModifiedBindingSet.get(e).chords:[]}get SelectedActionSetChords(){return this.GetActionSetChords(this.m_sSelectedActionSet)}get SelectedActionSetChordCount(){let e=this.SelectedActionSetChords;return e?e.length:0}GetActionSetSources(e){if(null==this.m_ModifiedBindingSet||null==e)return;let t=this.m_ModifiedBindingSet;return t.has(e)?t.get(e).sources:void 0}get SelectedActionSetSources(){return this.GetActionSetSources(this.m_sSelectedActionSet)}get BSelectedActionSetHasPoses(){return null!=this.m_LoadedBinding&&null!=this.m_sSelectedActionSet&&null!=this.SelectedActionSetActions&&this.SelectedActionSetActions.filter((e=>"pose"==e.type)).length>0}get BSelectedActionSetHasBoundPoses(){if(!this.BSelectedActionSetHasPoses||!this.SelectedActionSetPoses||null==this.SelectedActionSetActions)return!1;for(let e of this.SelectedActionSetPoses)if(e.output&&"none"!=e.output)return!0;return!1}get BSelectedActionSetHasHaptics(){return null!=this.m_LoadedBinding&&null!=this.m_sSelectedActionSet&&null!=this.SelectedActionSetActions&&this.SelectedActionSetActions.filter((e=>"vibration"==e.type)).length>0}get BSelectedActionSetHasBoundHaptics(){if(!this.BSelectedActionSetHasHaptics||!this.SelectedActionSetHaptics||null==this.SelectedActionSetActions)return!1;for(let e of this.SelectedActionSetHaptics)if(e.output&&"none"!=e.output)return!0;return!1}get BSelectedActionSetHasSkeletons(){return null!=this.m_LoadedBinding&&null!=this.m_sSelectedActionSet&&null!=this.SelectedActionSetActions&&(0!=this.SelectedActionSetActions.filter((e=>"skeleton"==e.type)).length&&(null!=this.SelectedControllerTypeInfo&&!!this.GetFirstInputSourceOfType("skeleton")))}get BSelectedActionSetHasBoundSkeletons(){if(!this.BSelectedActionSetHasSkeletons||!this.SelectedActionSetSkeletons||null==this.SelectedActionSetActions)return!1;for(let e of this.SelectedActionSetSkeletons)if(e.output&&"none"!=e.output)return!0;return!1}SetSelectedApp(e,t){if(console.log(`Setting selected app to app key: ${e}.`),null==this.m_SelectedApp||e!=this.m_SelectedApp.key){this.m_rKnownFailedBindingUris=[],this.m_ControllerWatchers.clear();let n=m.S.GetApp(e);n&&(this.m_SelectedApp=n,console.log(`Successfully set selected app to app key: ${e}.`),t||this.ReloadCurrentApp())}}ReloadCurrentApp(){return(0,r.mG)(this,void 0,void 0,(function*(){this.m_sLoadedBindingURI=void 0,this.m_sSelectedActionSet=void 0,yield this.LoadActionManifest();let e=this.ActionSets;e.length>0&&(null==this.m_sSelectedActionSet||!this.m_SelectedAppActions.action_sets.hasOwnProperty(this.m_sSelectedActionSet))&&(this.m_sSelectedActionSet=e[0].name),yield this.ReloadControllerConfiguration()}))}SetSelectedController(e,t){if(e!=this.m_sSelectedControllerType){let n=g.I.GetControllerTypeInfo(e);n&&(this.m_ControllerWatchers.clear(),this.m_sSelectedControllerType=n.controller_type,this.m_bControllerTypeSelectedByUser=!0,this.m_sLoadedBindingURI=void 0,t||this.ReloadControllerConfiguration())}}SetSelectedActionSet(e){e!=this.m_sSelectedActionSet&&(this.m_sSelectedActionSet=e)}LocalizeStringForSelectedControllerType(e){let t=this.SelectedControllerTypeInfo;return t&&t.resource_root?g.I.LocalizeDriverString(t.resource_root,e):e}LocalizePathNameForSelectedControllerType(e){let t;return["/user/hand/secondary","/user/hand/primary","/user/hand/left","/user/hand/right","/user/head"].forEach((n=>{0!=e.indexOf(n)||(t=n)})),t?(0,p.Xx)("#"+t)+" "+this.LocalizeStringForSelectedControllerType(e.replace(t,"")):e}get SelectedControllerTypeLocalizedName(){let e=this.SelectedControllerTypeInfo;return e?e.resource_root?g.I.LocalizeDriverString(e.resource_root,e.controller_type):e.controller_type:""}RegisterBindingWatcher(e){null==this.m_vecBindingSetWatchers.find((t=>t==e))&&this.m_vecBindingSetWatchers.push(e)}UnregisterBindingWatcher(e){let t=this.m_vecBindingSetWatchers.indexOf(e);t>=0&&this.m_vecBindingSetWatchers.splice(t,1)}GetActionBinding(e,t){if(null==this.m_ModifiedBindingSet)return;let n=this.m_ModifiedBindingSet;if(n.has(t)){let i=n.get(t).sources;if(i){let t=i.filter((t=>t.path==e));if(t)return t}}}GetInputModesForSourceType(e,t){let n=[];switch(e){case"button":n=["button","-","toggle_button","scalar_constant"];break;case"trackpad":n=["trackpad","dpad","-","scroll","radial","button","toggle_button"];break;case"trigger":n=["trigger","button","-","toggle_button","scalar_constant"];break;case"joystick":n=["joystick","dpad","-","scroll","radial","button","toggle_button"];break;case"pinch":n=["grab"];break;default:n=[]}return t&&(n.push("force_sensor"),"trigger"==e&&n.push("grab")),n}GetBooleanInputOptionsForMode(e){switch(e){case"button":case"toggle_button":case"trackpad":case"trigger":return["click","touch"];case"button":return["single","double","held","long","click","touch"];case"dpad_click":case"dpad_touch":case"dpad":return["west","east","north","south","center"];case"trackpad_scroll":case"force_sensor":default:return[];case"grab":return["grab"]}}GetActionBindingsOfType(e,t){if(null==this.m_SelectedApp||null==this.m_sSelectedActionSet||null==this.m_SelectedAppActions.action_sets)return[];let n=this.SelectedActionSetDetails;if(!n)return[];if(null==n.actions)return[];let i=[];return n.actions.forEach((n=>{let o=this.m_ModifiedAliases.get(n.name);if(n.type==e&&(!o||!o.hidden||t))if(o&&o.alias_name){let e=Object.assign({},n);e.localized_name=o.alias_name,i.push(e)}else i.push(n)})),t||this.m_ModifiedSimulatedActions.forEach((t=>{this.GetActionTypeFromSimulatedActionType(t.type)==e&&(this.ComputeSimulatedActionPathFromId(t.id),t.name?t.name:((0,p.Xx)("UnnamedSimAction"),t.id),i.push(this.CreateActionDefinitionForSimulatedAction(t)))})),i}GetActionTypeFromSimulatedActionType(e){switch(e){case"fake_trigger":case"fake_trackpad_click":return"boolean";default:return"unknown"}}CreateActionDefinitionForSimulatedAction(e){return{name:this.ComputeSimulatedActionPathFromId(e.id),localized_name:e.name?e.name:(0,p.Xx)("UnnamedSimAction")+e.id,type:this.GetActionTypeFromSimulatedActionType(e.type)}}get GetBooleanActionBindings(){return this.GetActionBindingsOfType("boolean")}get GetVector1ActionBindings(){return this.GetActionBindingsOfType("vector1")}get GetLiteralVector1ActionBindings(){return this.GetActionBindingsOfType("vector1",!0)}get GetVector2ActionBindings(){return this.GetActionBindingsOfType("vector2")}get GetVector3ActionBindings(){return this.GetActionBindingsOfType("vector3")}get GetPoseActionBindings(){return this.GetActionBindingsOfType("pose")}get GetHapticsActionBindings(){return this.GetActionBindingsOfType("vibration")}get GetSkeletonActionBindings(){return this.GetActionBindingsOfType("skeleton")}get ConfigName(){return this.m_sName}get ConfigDescription(){return this.m_sDescription}GetPoseAction(e){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return;let t=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses;if(null==t)return;let n=t.filter((t=>t.output.toLowerCase()==e.toLowerCase()));return n.length?n:void 0}GetPoseActionByPath(e){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return;let t=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses;if(null==t)return;let n=t.filter((t=>t.path.toLowerCase()==e.toLowerCase()));return n.length?n:void 0}GetHapticsAction(e){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return;let t=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics;if(null==t)return;let n=t.filter((t=>t.output.toLowerCase()==e.toLowerCase()));return n.length?n:void 0}GetHapticsActionByPath(e){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return;let t=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics;if(null==t)return;let n=t.filter((t=>t.path.toLowerCase()==e.toLowerCase()));return n.length?n:void 0}GetSkeletonAction(e){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return;let t=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton;if(null==t)return;let n=t.filter((t=>t.output.toLowerCase()==e.toLowerCase()));return n.length?n:void 0}GetSkeletonActionByPath(e){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return;let t=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton;if(null==t)return;let n=t.filter((t=>t.path.toLowerCase()==e.toLowerCase()));return n.length?n:void 0}NotifyWatchersOfChange(){console.log("Binding file changed"),this.m_vecBindingSetWatchers.forEach((e=>{e()})),this.AutosaveBinding()}SetActionForInputModeType(e,t,n,i,o){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetActionForInputModeType: Invalid action set specified");class s{constructor(e,t){this.mode=e,this.sourceIdx=t}}let r=[];if(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources.filter(((t,n)=>{t.path==e&&r.push(new s(t,n))})),r.length<=t)return void console.warn("Invalid mode index (",t,") for path ",e);let a=r[t].sourceIdx;if(a>=0){let e=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources[a];if(e.inputs&&e.inputs.has(n)&&e.inputs.get(n).output==i)return void console.log("Trying to set new action to old action for type",n," action is ",i);if(o.length>0&&!o.find((t=>t==e.mode)))return void console.log("Trying to set invalid input type of ",n," for current mode ",e.mode);e.inputs||(e.inputs=d.LO.map()),"none"==i?e.inputs.has(n)&&e.inputs.delete(n):e.inputs.has(n)?e.inputs.get(n).output=i:e.inputs.set(n,{output:i}),this.NotifyWatchersOfChange()}}SetParameterForInputModeType(e,t,n,i,o){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetParameterForInputModeType: Invalid action set specified");let s=[];if(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources.filter(((t,n)=>{t.path==e&&s.push(n)})),s.length<=t)return void console.warn("Invalid mode index (",t,") for path ",e);let r=s[t];if(r>=0){let e=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources[r];if(!e.inputs)return void console.log("SetParameterForInputModeType: Trying to set parameter for missing input type of ",n," for current mode ",e.mode);e.parameters||(e.parameters=d.LO.map()),e.parameters.get(i)!=o&&(null==o?e.parameters.delete(i):e.parameters.set(i,o),this.NotifyWatchersOfChange())}}GetParameterForInputModeType(e,t,n,i){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return console.error("SetParameterForInputModeType: Invalid action set specified"),null;let o=[];if(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources.filter(((t,n)=>{t.path==e&&o.push(n)})),o.length<=t)return console.warn("Invalid mode index (",t,") for path ",e),null;let s=o[t];if(s>=0){let e=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources[s];return e.inputs?e.parameters&&e.parameters.has(i)?e.parameters.get(i):null:(console.log("GetParameterForInputModeType: Trying to get parameter for missing input type of ",n," for current mode ",e.mode),null)}return null}AddActionSetIfRequired(){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet)){let e=new b;e.sources=[],this.m_ModifiedBindingSet.set(this.m_sSelectedActionSet,e)}}AddInputModeForSource(e,t){this.AddActionSetIfRequired();let n=new S;return n.mode=t,n.path=e,n.inputs=d.LO.map(),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources.push(n),this.NotifyWatchersOfChange(),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources.filter((t=>t.path.toLowerCase()==e.toLowerCase())).length-1}DeleteInputModeForSource(e,t){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("AddInputModeForType: Invalid action set specified");let n=[];if(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources.filter(((t,i)=>{t.path.toLowerCase()==e.toLowerCase()&&n.push(i)})),n.length<=t)return void console.warn("Invalid mode index (",t,") for path ",e);let i=n[t];-1!=i?(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources.splice(i,1),this.NotifyWatchersOfChange()):console.error("DeleteInputModeForSource: Mode not found for source")}SetInputModeForInputSource(e,t,n){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetActionForInputModeType: Invalid action set specified");let i=[];if(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources.filter(((t,n)=>{t.path.toLowerCase()==e.toLowerCase()&&i.push(n)})),i.length<=t)return void console.warn("Invalid mode index (",t,") for path ",e);let o=i[t];if(-1!=o){let t=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources[o];if(t.path==e){if(t.mode==n)return void console.log("Trying to set new input mode to old mode!");let i=JSON.parse(JSON.stringify(t)),s=new S;switch(s.mode=n,s.path=e,s.inputs=d.LO.map(),n){case"button":case"toggle_button":switch(i.mode){case"complex_button":i.inputs.single&&(s.inputs.set("single",i.inputs.single),s.inputs.set("click",i.inputs.single)),i.inputs.long&&s.inputs.set("long",i.inputs.long),i.inputs.press&&s.inputs.set("press",i.inputs.press),i.inputs.double&&s.inputs.set("double",i.inputs.double),i.inputs.touch&&s.inputs.set("touch",i.inputs.touch);break;case"button":case"toggle_button":case"trackpad":case"trigger":i.inputs.click&&s.inputs.set("click",i.inputs.click),i.inputs.touch&&s.inputs.set("touch",i.inputs.touch)}break;case"complex_button":switch(i.mode){case"toggle_button":case"button":case"trackpad":case"trigger":i.inputs.click&&s.inputs.set("single",i.inputs.click)}break;case"trackpad":switch(i.mode){case"complex_button":i.inputs.single&&s.inputs.set("click",i.inputs.single);break;case"toggle_button":case"button":case"trigger":i.inputs.click&&s.inputs.set("click",i.inputs.click),i.inputs.touch&&s.inputs.set("touch",i.inputs.touch)}break;case"trigger":switch(i.mode){case"complex_button":i.inputs.single&&s.inputs.set("click",i.inputs.single);break;case"toggle_button":case"trackpad":case"button":i.inputs.click&&s.inputs.set("click",i.inputs.click),i.inputs.touch&&s.inputs.set("touch",i.inputs.touch)}}return this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources[o]=s,void this.NotifyWatchersOfChange()}}else console.error("SetActionForInputModeType: trying to change a mode for a source that we don't have already")}ClearModesForInputPath(e){this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet)?this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).sources.filter((t=>t.path.toLowerCase()!=e.toLowerCase())):console.error("ClearModesForInputPath: Invalid action set specified")}SetInputPathForPose(e,t){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetActionForPose: Invalid action set specified");this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses||(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses=new Array);let n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses.findIndex((t=>t.path.toLowerCase()==e.path.toLowerCase()&&t.output.toLowerCase()==e.output.toLowerCase()));-1==n&&(n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses.push(new _)-1,this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses[n].output=e.output),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses[n].path!=t?(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses[n].path=t,this.NotifyWatchersOfChange()):console.log("Trying to set new pose action path to old action path!")}SetPoseForInputPath(e,t){if(this.AddActionSetIfRequired(),!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetActionForPose: Invalid action set specified");this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses||(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses=new Array);let n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses.findIndex((t=>t.path.toLowerCase()==e.toLowerCase()));-1==n&&(n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses.push(new _)-1,this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses[n].path=e),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses[n].output!=t?(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses[n].output=t,this.NotifyWatchersOfChange()):console.log("Trying to set new pose action path to old action path!")}GetFirstInputSourceOfType(e){let t=this.SelectedControllerTypeInfo;if(null!=t)for(let n of Object.keys(t.input_source))if(t.input_source[n].type==e)return n}AddDefaultPose(e,t){if(this.AddActionSetIfRequired(),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses||(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).poses=new Array),null==this.SelectedControllerTypeInfo)return;let n=this.GetFirstInputSourceOfType("pose");if(!n)return;let i=new class{};i.output=e,i.path=n,this.SetInputPathForPose(i,n)}SetInputPathForHaptics(e,t){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetInputPathForHaptics: Invalid action set specified");this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics||(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics=new Array);let n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics.findIndex((t=>t.path.toLowerCase()==e.path.toLowerCase()&&t.output.toLowerCase()==e.output.toLowerCase()));-1==n&&(n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics.push(new v)-1,this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics[n].output=e.output),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics[n].path!=t?(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics[n].path=t,this.NotifyWatchersOfChange()):console.log("Trying to set new haptics action path to old action path!")}SetHapticsForInputPath(e,t){if(this.AddActionSetIfRequired(),!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetHapticsForInputPath: Invalid action set specified");this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics||(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics=new Array);let n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics.findIndex((t=>t.path.toLowerCase()==e.toLowerCase()));-1==n&&(n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics.push(new _)-1,this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics[n].path=e),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics[n].output!=t?(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics[n].output=t,this.NotifyWatchersOfChange()):console.log("Trying to set new haptic action path to old action path!")}AddDefaultHaptics(e,t){this.AddActionSetIfRequired(),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics||(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).haptics=new Array);let n=this.GetFirstInputSourceOfType("haptic");if(!n)return;let i=t+n,o=new class{};o.output=e,o.path=i,this.SetInputPathForHaptics(o,i)}SetInputPathForSkeleton(e,t){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetInputPathForSkeleton: Invalid action set specified");this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton||(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton=new Array);let n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton.findIndex((t=>t.path.toLowerCase()==e.path.toLowerCase()&&t.output.toLowerCase()==e.output.toLowerCase()));-1==n&&(n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton.push(new f)-1,this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton[n].output=e.output),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton[n].path!=t?(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton[n].path=t,this.NotifyWatchersOfChange()):console.log("Trying to set new skeleton action path to old action path!")}SetSkeletonForInputPath(e,t){if(this.AddActionSetIfRequired(),!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetSkeletonForInputPath: Invalid action set specified");this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton||(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton=new Array);let n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton.findIndex((t=>t.path.toLowerCase()==e.toLowerCase()));-1==n&&(n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton.push(new _)-1,this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton[n].path=e),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton[n].output!=t?(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton[n].output=t,this.NotifyWatchersOfChange()):console.log("Trying to set new skeleton action path to old action path!")}AddDefaultSkeleton(e,t){this.AddActionSetIfRequired(),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton||(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).skeleton=new Array);let n=this.GetFirstInputSourceOfType("skeleton");if(!n)return;let i=t+n,o=new class{};o.output=e,o.path=i,this.SetInputPathForSkeleton(o,i)}SetActionForChord(e,t){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetActionForChord: Invalid action set specified");let n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords.findIndex((t=>t==e));-1!=n?this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[n].output!=t?(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[n].output=t,this.NotifyWatchersOfChange()):console.log("Trying to set new chord action to old action!"):console.error("SetActionForChord: Invalid chord  specified ",e)}DeleteChord(e){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("DeleteChordForSource: Invalid action set specified");let t=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords.findIndex((t=>t==e));-1!=t?(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords.splice(t,1),this.NotifyWatchersOfChange()):console.error("DeleteChordForSource: Invalid chord  specified ",e)}AddChord(){this.AddActionSetIfRequired(),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords||(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords=new Array),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords.push(new y),this.NotifyWatchersOfChange()}DeleteSourceFromChord(e,t){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("DeleteSourceFromChord: Invalid action set specified");let n=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords.findIndex((t=>t==e));if(-1!=n){let e=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[n].inputs.findIndex((e=>e[0]==t));-1!=e&&(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[n].inputs.splice(e,1),this.NotifyWatchersOfChange())}else console.error("DeleteSourceFromChord: Invalid chord  specified ",e)}SetInputTypeForChord(e,t,n){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetInputsForChord: Invalid action set specified");let i=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords.findIndex((t=>t==e));if(-1!=i){let e=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[i].inputs.findIndex((e=>e[0]==t));if(-1==e)return void console.log("Invalid bounds for new input chord, trying to add type without source");if(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[i].inputs[e][1]==n)return void console.log("Trying to set new chord inputs to old inputs!");this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[i].inputs[e][1]=n,this.NotifyWatchersOfChange()}else console.error("SetInputsForChord: Invalid chord  specified ",e)}SetInputSourceForChord(e,t,n){if(!this.m_ModifiedBindingSet.has(this.m_sSelectedActionSet))return void console.error("SetInputsForChord: Invalid action set specified");let i=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords.findIndex((t=>t==e));if(-1!=i){let e=this.GetActionBinding(t,this.SelectedActionSet);if(!e)return void console.log("Failed to find action binding for path");let o="click";if(e.length&&(o=this.GetBooleanInputOptionsForMode(e[0].mode)[0]),null==n)this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[i].inputs||(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[i].inputs=new Array),this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[i].inputs.push([t,o]);else{let e=this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[i].inputs.findIndex((e=>e[0]==n));if(-1==e)return void console.log("Trying to set replace chord input path when we didn't have that path!");if(this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[i].inputs[e][0]==t)return void console.log("Trying to set new chord inputs to old inputs!");this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[i].inputs[e][0]=t,this.m_ModifiedBindingSet.get(this.m_sSelectedActionSet).chords[i].inputs[e][1]=o}this.NotifyWatchersOfChange()}else console.error("SetInputsForChord: Invalid chord  specified ",e)}LoadActionManifest(){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise(((e,t)=>{k(this.m_SelectedApp.key).then((t=>{null==t.error?(this.m_SelectedAppActions=t,null==this.m_sLoadedBindingURI&&t.current_binding_url.hasOwnProperty(this.m_sSelectedControllerType)&&(this.m_sLoadedBindingURI=t.current_binding_url[this.m_sSelectedControllerType])):(this.m_SelectedAppActions=void 0,this.m_sLoadedBindingURI=void 0),e()}))}))}))}get SelectedBindingURL(){return null!=this.m_sSelectedControllerType&&null!=this.m_SelectedAppActions&&null!=this.m_SelectedAppActions.current_binding_url&&this.m_SelectedAppActions.current_binding_url.hasOwnProperty(this.m_sSelectedControllerType)?this.m_SelectedAppActions.current_binding_url[this.m_sSelectedControllerType]:void 0}get LoadedBindingURL(){return this.m_sLoadedBindingURI}get SelectedBindingIsLegacy(){return!this.m_SelectedAppActions||"legacy"==this.m_SelectedAppActions.category}get IsSecondaryController(){if(!this.m_sSelectedControllerType)return!1;let e=g.I.FindRootPathForControllerType(this.m_sSelectedControllerType);return"/user/treadmill"==e||"/user/gamepad"==e||"/user/stylus"==e}ReloadControllerConfiguration(){return(0,r.mG)(this,void 0,void 0,(function*(){if(!(this.m_SelectedAppActions&&this.m_sLoadedBindingURI&&this.SelectedApp&&this.SelectedControllerTypeInfo))return;let e=yield M(this.m_SelectedApp.key,this.SelectedControllerTypeInfo.controller_type,this.m_sLoadedBindingURI);this.OnBindingConfigLoaded(e)}))}UpdateTrackerBindings(){return(0,r.mG)(this,void 0,void 0,(function*(){let e=yield this.GetTrackerBindings();this.m_TrackerBindingSetup=e}))}get TrackerBindings(){return null==this.m_TrackerBindingSetup&&this.UpdateTrackerBindings(),this.m_TrackerBindingSetup}GetTrackerBindings(){return(0,r.mG)(this,void 0,void 0,(function*(){return new Promise((function(e,t){c().get("/input/gettrackerbindings.json").then((t=>{e(t.data)})).catch((e=>{t(e)}))}))}))}GetTrackerBinding(e){for(let t of this.m_TrackerBindingSetup.trackers)if(t.device_path_string==e)return t;return null}SetTrackerBinding(e,t,n){let i={device_path:e,role:t,controller_role:n},o=JSON.stringify(i);console.log("Saving tracker binding "+e),c().post("/input/settrackerbinding.action",o).then((e=>{console.log("SetTrackerBinding response: ",e.data),this.UpdateTrackerBindings()})).catch((e=>{}))}PulseHaptics(e){let t={path_handle:e},n=JSON.stringify(t);c().post("/input/pulsehaptics.action",n).then((e=>{console.log("PulseHaptics response: ",e.data)})).catch((e=>{}))}get KnownControllerTypes(){let e=[];return g.I.KnownControllerTypes.forEach((t=>{e.push(t)})),e}PreserveCurrentBindingForUpgrade(){let e=h.w.CurrentBinding;return e&&"autosave"==e.type?this.SaveCurrentBinding((0,p.Xx)("#PreservedAutosaveName"),"","personal"):Promise.resolve(null)}GetDefaultBindingNameForSaveType(e){let t=L.SelectedControllerTypeInfo,n=g.I.LocalizeControllerString(t,t?t.controller_type:"");switch(e){default:case"autosave":return(0,p.Xx)("#BindingUI_SaveDefaultName",this.m_SelectedApp.name,n);case"personal":return(0,p.Xx)("#BindingUI_SaveDefaultName_Personal",this.m_SelectedApp.name,n);case"public":return(0,p.Xx)("#BindingUI_SaveDefaultName_Public",g.I.CurrentUserPersonaName);case"replace_default":return L.ConfigName}}AutosaveBinding(){this.m_sName||(this.m_sName=this.GetDefaultBindingNameForSaveType("autosave")),this.SaveCurrentBinding(this.m_sName,this.m_sDescription,"autosave").then((e=>{L.SetBindingURL(e.uri)}))}SaveCurrentBinding(e,t,n){return(0,r.mG)(this,void 0,void 0,(function*(){if(this.HasUnboundActions)return console.log("Aborting save: Missing at least one required action"),new Promise(((e,t)=>{t()}));this.m_sName=e,this.m_sDescription=t;let i=this.m_sInteractionProfile.trim(),o={app_key:this.SelectedApp,controller_type:this.SelectedControllerTypeInfo.controller_type,save_type:n};o.binding={name:e,description:t,action_manifest_version:this.m_SelectedAppActions.version,interaction_profile:i,category:this.m_SelectedAppActions.category,controller_type:this.SelectedControllerTypeInfo.controller_type,bindings:this.m_ModifiedBindingSet,options:this.m_ModifiedOptions,alias_info:this.m_ModifiedAliases,simulated_actions:Array.from(this.m_ModifiedSimulatedActions.values()),app_key:this.SelectedApp};let s=JSON.stringify(o);return console.log("Saving binding "+e+" for app '"+this.SelectedApp+"'."),new Promise(((e,t)=>{let i=new P(n,e,t);this.m_OutstandingSaveBindingCalls.push(i),c().post("/input/savebinding.action",s).then((e=>{e.data.error?(console.log("SaveCurrentBinding failed:",e.data.error),t(e.data.error)):console.log("SaveCurrentBinding Successful")})).catch((e=>{t(e)}))}))}))}PublishBindingToWorkshop(e){return(0,r.mG)(this,void 0,void 0,(function*(){let t={app_key:this.SelectedApp,description:e};t.binding={bindings:this.m_ModifiedBindingSet,controller_type:this.SelectedControllerTypeInfo.controller_type};let n=JSON.stringify(t);yield new Promise((function(e,t){c().post("/input/submitworkshopbinding.action",n).then((t=>{console.log("PublishBindingToWorkshop response: ",t),e()})).catch((e=>{t(e)}))}))}))}OnWebSocketOpen(e){console.log("Websocket connected"),this.m_eWebSocketState=s.eWebSocketState_Connected,this.WebSocketSend("input_open"),this.m_timerWebSocket&&clearTimeout(this.m_timerWebSocket),window.addEventListener("beforeunload",(()=>{this.WebSocketSend("input_close")}))}OnWebSocketClose(e){console.log("Websocket closed ",e),this.m_eWebSocketState=s.eWebSocketState_Disconnected,this.OpenWebSocketToHost()}WebSocketSend(e){null!=this.m_wsWebSocketToServer&&1==this.m_wsWebSocketToServer.readyState&&this.m_wsWebSocketToServer.send(e)}OnWorkshopUploadComplete(e){if(console.log("OnWorkshopUploadComplete: ",e),e.app_key!=L.SelectedApp)return void console.log(`Ignoring binding load for an app we aren't viewing. Pending: ${e.app_key}. Current: ${L.SelectedApp}.`);if(this.m_OutstandingSaveBindingCalls.length<=0)return void console.log("Got workshop upload result without pending resolve");let t=this.m_OutstandingSaveBindingCalls.shift();e.success?(t.resolve(e),this.LoadActionManifest()):t.reject(e)}OnPendingFileSaved(e){let t=e.success?"Success":e.error;console.log(`OnPendingFileSaved: ${t}. ${e}`),e.app_key==L.SelectedApp||console.log(`Ignoring pending file saved for an app we aren't viewing. Pending: ${e.app_key}. Current: ${L.SelectedApp}.`)}get SaveNoticeText(){if(this.m_OutstandingSaveBindingCalls.length>0){let e=!1;return this.m_OutstandingSaveBindingCalls.forEach((t=>{"personal"!=t.SaveType&&"public"!=t.SaveType||(e=!0)})),e?"#SaveNotice_Uploading":"#SaveNotice_Saving"}}OnBindingConfigLoaded(e){if(console.log("OnBindingConfigLoaded: ",e," selected action set:",this.m_sSelectedActionSet),e.app_key!=L.SelectedApp)return void console.log(`Ignoring binding load for an app we aren't viewing. Pending: ${e.app_key}. Current: ${L.SelectedApp}.`);if(e.uri!=this.m_sLoadedBindingURI)return void console.log(`Ignoring binding load for an config url ${e.uri} we aren't viewing ${this.m_sLoadedBindingURI}`);this.m_ControllerWatchers.clear(),this.m_LoadedBinding=e,this.m_ModifiedBindingSet=d.LO.map();let t=(0,p.Xx)("#unknown_application"),n=m.S.GetApp(L.SelectedApp);if(n&&(t=n.name),this.m_sName="",this.m_sDescription="",this.m_sInteractionProfile=" ",e.binding_config&&(e.binding_config.hasOwnProperty("name")&&(this.m_sName=e.binding_config.name),e.binding_config.hasOwnProperty("description")&&(this.m_sDescription=e.binding_config.description),e.binding_config.hasOwnProperty("interaction_profile")&&(this.m_sInteractionProfile=e.binding_config.interaction_profile)),""==this.m_sName){let e=L.SelectedControllerTypeInfo,n=g.I.LocalizeControllerString(e,e?e.controller_type:"");this.m_sName=(0,p.Xx)("#BindingUI_SaveDefaultName",t,n)}e.binding_config&&e.binding_config.bindings&&(Object.keys(e.binding_config.bindings).forEach((t=>{let n=new b;n.chords=e.binding_config.bindings[t].chords,n.poses=e.binding_config.bindings[t].poses,n.haptics=e.binding_config.bindings[t].haptics,n.skeleton=e.binding_config.bindings[t].skeleton,n.sources=new Array,e.binding_config.bindings[t].sources.forEach((e=>{let t=new S;t.mode=e.mode,t.path=e.path,t.inputs=d.LO.map(),e.hasOwnProperty("inputs")&&Object.keys(e.inputs).forEach((n=>{t.inputs.set(n,e.inputs[n])})),null!=e.parameters&&Object.keys(e.parameters).length>0&&(t.parameters=d.LO.map(),e.hasOwnProperty("parameters")&&Object.keys(e.parameters).forEach((n=>{t.parameters.set(n,e.parameters[n])}))),n.sources.push(t)})),this.m_ModifiedBindingSet.set(t,n)})),this.m_ModifiedOptions.clear(),e.binding_config.options&&(Object.keys(e.binding_config.options).forEach((t=>{this.m_ModifiedOptions.set(t,e.binding_config.options[t])})),this.ManifestOptions.forEach((e=>{this.m_ModifiedOptions.has(e.name)||this.m_ModifiedOptions.set(e.name,e.default)}))),this.m_ModifiedAliases.clear(),e.binding_config.alias_info&&Object.keys(e.binding_config.alias_info).forEach((t=>{this.m_ModifiedAliases.set(t,e.binding_config.alias_info[t])})),this.m_ModifiedSimulatedActions.clear(),e.binding_config.simulated_actions&&e.binding_config.simulated_actions.forEach((e=>{let t=this.ComputeSimulatedActionPathFromId(e.id);this.m_ModifiedSimulatedActions.set(t,e),e.id>=this.m_nNextSimulatedActionId&&(this.m_nNextSimulatedActionId=e.id+1)}))),this.m_vecBindingSetWatchers.forEach((e=>{e()}))}QueryBindingList(e,t){return null!=this.m_OutstandingQueryResolve&&console.warn("About to start second binding list query when one is already pending",this.m_OutstandingQueryResolve),new Promise(((n,i)=>{this.m_OutstandingQueryResolve=n,c().get(`/input/queryworkshopbindings.json?app_key=${e}&controller_type=${t}`).then((e=>{console.log("QueryBindingList: ajax request successful")})).catch((e=>{i(e)}))}))}DeleteBinding(e){null!=this.m_OutstandingDeleteResolve&&console.warn("About to start second binding delete when one is already pending",this.m_OutstandingDeleteResolve);let t={url:e},n=JSON.stringify(t);return new Promise(((t,i)=>{this.m_OutstandingDeleteResolve=t,this.m_sOutstandingDeleteURL=e,c().post("/input/deleteconfig.action",n).then((e=>{console.log("Delete ajax request successful")})).catch((e=>{i(e)}))}))}OnBindingDeleteComplete(e){null!=this.m_OutstandingDeleteResolve?e.url==this.m_sOutstandingDeleteURL&&(this.m_sOutstandingDeleteURL=void 0,this.m_OutstandingDeleteResolve(e),this.m_OutstandingDeleteResolve=void 0,console.log("OnDeleteComplete: ",e)):console.warn("Missing outstanding query resolve for binding delete")}ShouldShowBindingFailureForControllerType(e){if(null==e||""==e)return!1;let t=g.I.GetControllerTypeInfo(e);return!!t&&!!t.should_show_binding_errors}HasBindingUriFailedToLoad(e){return-1!=this.m_rKnownFailedBindingUris.indexOf(e)}RememberFailedLoadUri(e){this.m_rKnownFailedBindingUris.push(e)}OnQueryResults(e){console.log("OnQueryResults: ",e),null!=this.m_OutstandingQueryResolve?(this.m_OutstandingQueryResolve(e),this.m_OutstandingQueryResolve=void 0):console.warn("Missing outstanding query resolve for binding query")}SelectConfig(e,t,n){if(this.m_sLoadedBindingURI=n,console.log("Selecting config "+n+" for app "+e),this.SelectedBindingURL==n)return console.debug("Selecting the config we already have set",n),new Promise(((e,t)=>{e()}));let i={app_key:e,controller_type:t,url:n},o=JSON.stringify(i);return null!=this.m_OutstandingSelectConfigResolve&&console.warn("About to start second select config when one is already pending",this.m_OutstandingSelectConfigResolve),new Promise(((e,t)=>{this.m_OutstandingSelectConfigResolve=e,c().post("/input/selectconfig.action",o).then((e=>{console.log("selectconfig ajax request successful")})).catch((e=>{t(e)}))}))}OnSelectConfigComplete(e){null!=this.m_OutstandingSelectConfigResolve?(this.m_OutstandingSelectConfigResolve(),this.m_OutstandingSelectConfigResolve=void 0,console.log("OnSelectConfigComplete: ",e)):e.error_to_show?h.w.ShowBindingList(e.error_to_show):console.warn("Missing outstanding query resolve for select config")}OnTrackersBindingChanged(e){this.GetTrackerBindings().then((e=>{this.m_TrackerBindingSetup=e}))}OnActionManifestReloaded(e){e.app_key==L.SelectedApp&&this.ReloadCurrentApp()}SetBindingURL(e){this.m_sLoadedBindingURI=e}OnActionBindingsReloaded(e){this.RefreshInputState()}GetControllerWatcherForSourceFromControllerType(e,t,n,o){let s=""+e.controller_type+t+n+o;if(!this.m_ControllerWatchers.has(s)){let r="";if("controller_handed"==e.input_bindingui_mode)switch(t){case i.eButtonSide_Left:r="/user/hand/left";break;case i.eButtonSide_Right:r="/user/hand/right"}else{let t=g.I.ConnectedDevices.find((t=>t.controller_type==e.controller_type));t&&t.root_path?r=t.root_path:console.log("Unable to find device path for controller type ",e)}this.m_ControllerWatchers.set(s,new T(r,e,t,n,o))}return this.m_ControllerWatchers.get(s)}OnWebSocketMessage(e){let t=JSON.parse(e.data);if("jsonid"in t&&"vr_input_get_notifications"==t.jsonid)for(let e in t.notifications){let n=t.notifications[e];switch(n.type){case"pending_file_saved":this.OnPendingFileSaved(n);break;case"workshop_upload_complete":this.OnWorkshopUploadComplete(n);break;case"query_results":this.OnQueryResults(n);break;case"action_bindings_reloaded":this.OnActionBindingsReloaded(n);break;case"delete_binding_complete":this.OnBindingDeleteComplete(n);break;case"select_config_complete":this.OnSelectConfigComplete(n);break;case"trackers_binding_changed":this.OnTrackersBindingChanged(n);break;case"action_manifest_reloaded":this.OnActionManifestReloaded(n);break;case"refresh_input_state":this.RefreshInputState();break;case"binding_subscription_changed":this.m_nBindingSubscriptionChangedCanary++}}}get BindingConfig(){return null==this.m_ModifiedBindingSet?"":JSON.stringify(this.m_ModifiedBindingSet,null,"\t")}get BindingSubscriptionChangedCanary(){return this.m_nBindingSubscriptionChangedCanary}GetInteractionProfile(){return this.m_sInteractionProfile}SetInteractionProfile(e){let t=this.m_sInteractionProfile!=e;this.m_sInteractionProfile=e,t&&this.NotifyWatchersOfChange()}GetInteractionProfiles(){return this.m_SelectedAppActions.interaction_profiles}}(0,r.gn)([d.LO],E.prototype,"m_eWebSocketState",void 0),(0,r.gn)([d.LO],E.prototype,"m_sLoadedBindingURI",void 0),(0,r.gn)([d.LO],E.prototype,"m_LoadedBinding",void 0),(0,r.gn)([d.LO],E.prototype,"m_ModifiedBindingSet",void 0),(0,r.gn)([d.LO],E.prototype,"m_ModifiedOptions",void 0),(0,r.gn)([d.LO],E.prototype,"m_ModifiedAliases",void 0),(0,r.gn)([d.LO],E.prototype,"m_sName",void 0),(0,r.gn)([d.LO],E.prototype,"m_sDescription",void 0),(0,r.gn)([d.LO],E.prototype,"m_sInteractionProfile",void 0),(0,r.gn)([d.LO],E.prototype,"m_SelectedApp",void 0),(0,r.gn)([d.LO],E.prototype,"m_SelectedAppActions",void 0),(0,r.gn)([d.LO],E.prototype,"m_sSelectedActionSet",void 0),(0,r.gn)([d.LO],E.prototype,"m_sSelectedControllerType",void 0),(0,r.gn)([d.LO],E.prototype,"m_TrackerBindingSetup",void 0),(0,r.gn)([d.LO],E.prototype,"m_OutstandingSaveBindingCalls",void 0),(0,r.gn)([d.LO],E.prototype,"m_ModifiedSimulatedActions",void 0),(0,r.gn)([d.LO],E.prototype,"m_nBindingSubscriptionChangedCanary",void 0),(0,r.gn)([a.ak],E.prototype,"OpenWebSocketToHost",null),(0,r.gn)([d.Fl],E.prototype,"SteamVRUnavailable",null),(0,r.gn)([d.Fl],E.prototype,"ActionSets",null),(0,r.gn)([d.Fl],E.prototype,"ManifestOptions",null),(0,r.gn)([d.Fl],E.prototype,"SecondaryControllerOptions",null),(0,r.gn)([d.aD],E.prototype,"SetOptionValue",null),(0,r.gn)([d.aD],E.prototype,"AddSimulatedAction",null),(0,r.gn)([d.aD],E.prototype,"DeleteSimulatedActionByPath",null),(0,r.gn)([d.Fl],E.prototype,"SelectedApp",null),(0,r.gn)([d.Fl],E.prototype,"SelectedAppActions",null),(0,r.gn)([d.Fl],E.prototype,"CurrentAppCanAccessPrivateInputs",null),(0,r.gn)([d.Fl],E.prototype,"SelectedControllerTypeInfo",null),(0,r.gn)([d.Fl],E.prototype,"CurrentBindingSaveType",null),(0,r.gn)([d.Fl],E.prototype,"CurrentBindingActionManifestVersion",null),(0,r.gn)([d.Fl],E.prototype,"SelectedActionSet",null),(0,r.gn)([d.Fl],E.prototype,"SelectedActionSetDetails",null),(0,r.gn)([d.Fl],E.prototype,"SelectedActionSetActions",null),(0,r.gn)([a.ak],E.prototype,"GetSelectedAppDefaultBinding",null),(0,r.gn)([a.ak],E.prototype,"GetActionByName",null),(0,r.gn)([d.Fl],E.prototype,"SelectedActionSetPoses",null),(0,r.gn)([d.Fl],E.prototype,"SelectedActionSetHaptics",null),(0,r.gn)([d.Fl],E.prototype,"SelectedActionSetSkeletons",null),(0,r.gn)([d.Fl],E.prototype,"SelectedActionSetChords",null),(0,r.gn)([d.Fl],E.prototype,"SelectedActionSetChordCount",null),(0,r.gn)([d.Fl],E.prototype,"SelectedActionSetSources",null),(0,r.gn)([d.Fl],E.prototype,"BSelectedActionSetHasPoses",null),(0,r.gn)([d.Fl],E.prototype,"BSelectedActionSetHasBoundPoses",null),(0,r.gn)([d.Fl],E.prototype,"BSelectedActionSetHasHaptics",null),(0,r.gn)([d.Fl],E.prototype,"BSelectedActionSetHasBoundHaptics",null),(0,r.gn)([d.Fl],E.prototype,"BSelectedActionSetHasSkeletons",null),(0,r.gn)([d.Fl],E.prototype,"BSelectedActionSetHasBoundSkeletons",null),(0,r.gn)([d.aD],E.prototype,"SetSelectedApp",null),(0,r.gn)([d.aD],E.prototype,"SetSelectedController",null),(0,r.gn)([d.aD],E.prototype,"SetSelectedActionSet",null),(0,r.gn)([a.ak],E.prototype,"LocalizeStringForSelectedControllerType",null),(0,r.gn)([a.ak],E.prototype,"LocalizePathNameForSelectedControllerType",null),(0,r.gn)([d.Fl],E.prototype,"SelectedControllerTypeLocalizedName",null),(0,r.gn)([d.aD],E.prototype,"RegisterBindingWatcher",null),(0,r.gn)([d.aD],E.prototype,"UnregisterBindingWatcher",null),(0,r.gn)([d.aD],E.prototype,"GetActionBinding",null),(0,r.gn)([a.ak],E.prototype,"GetInputModesForSourceType",null),(0,r.gn)([a.ak],E.prototype,"GetBooleanInputOptionsForMode",null),(0,r.gn)([a.ak],E.prototype,"GetActionBindingsOfType",null),(0,r.gn)([d.Fl],E.prototype,"GetBooleanActionBindings",null),(0,r.gn)([d.Fl],E.prototype,"GetVector1ActionBindings",null),(0,r.gn)([d.Fl],E.prototype,"GetLiteralVector1ActionBindings",null),(0,r.gn)([d.Fl],E.prototype,"GetVector2ActionBindings",null),(0,r.gn)([d.Fl],E.prototype,"GetVector3ActionBindings",null),(0,r.gn)([d.Fl],E.prototype,"GetPoseActionBindings",null),(0,r.gn)([d.Fl],E.prototype,"GetHapticsActionBindings",null),(0,r.gn)([d.Fl],E.prototype,"GetSkeletonActionBindings",null),(0,r.gn)([d.Fl],E.prototype,"ConfigName",null),(0,r.gn)([d.Fl],E.prototype,"ConfigDescription",null),(0,r.gn)([a.ak],E.prototype,"GetPoseAction",null),(0,r.gn)([a.ak],E.prototype,"GetPoseActionByPath",null),(0,r.gn)([a.ak],E.prototype,"GetHapticsAction",null),(0,r.gn)([a.ak],E.prototype,"GetHapticsActionByPath",null),(0,r.gn)([a.ak],E.prototype,"GetSkeletonAction",null),(0,r.gn)([a.ak],E.prototype,"GetSkeletonActionByPath",null),(0,r.gn)([a.ak],E.prototype,"NotifyWatchersOfChange",null),(0,r.gn)([d.aD],E.prototype,"SetActionForInputModeType",null),(0,r.gn)([d.aD],E.prototype,"SetParameterForInputModeType",null),(0,r.gn)([a.ak],E.prototype,"AddActionSetIfRequired",null),(0,r.gn)([d.aD],E.prototype,"AddInputModeForSource",null),(0,r.gn)([d.aD],E.prototype,"DeleteInputModeForSource",null),(0,r.gn)([d.aD],E.prototype,"SetInputModeForInputSource",null),(0,r.gn)([d.aD],E.prototype,"ClearModesForInputPath",null),(0,r.gn)([d.aD],E.prototype,"SetInputPathForPose",null),(0,r.gn)([d.aD],E.prototype,"SetPoseForInputPath",null),(0,r.gn)([d.aD],E.prototype,"AddDefaultPose",null),(0,r.gn)([d.aD],E.prototype,"SetInputPathForHaptics",null),(0,r.gn)([d.aD],E.prototype,"SetHapticsForInputPath",null),(0,r.gn)([d.aD],E.prototype,"AddDefaultHaptics",null),(0,r.gn)([d.aD],E.prototype,"SetInputPathForSkeleton",null),(0,r.gn)([d.aD],E.prototype,"SetSkeletonForInputPath",null),(0,r.gn)([d.aD],E.prototype,"AddDefaultSkeleton",null),(0,r.gn)([d.aD],E.prototype,"SetActionForChord",null),(0,r.gn)([d.aD],E.prototype,"DeleteChord",null),(0,r.gn)([d.aD],E.prototype,"AddChord",null),(0,r.gn)([d.aD],E.prototype,"DeleteSourceFromChord",null),(0,r.gn)([d.aD],E.prototype,"SetInputTypeForChord",null),(0,r.gn)([d.aD],E.prototype,"SetInputSourceForChord",null),(0,r.gn)([d.aD],E.prototype,"LoadActionManifest",null),(0,r.gn)([d.Fl],E.prototype,"SelectedBindingURL",null),(0,r.gn)([d.Fl],E.prototype,"LoadedBindingURL",null),(0,r.gn)([d.Fl],E.prototype,"SelectedBindingIsLegacy",null),(0,r.gn)([d.Fl],E.prototype,"IsSecondaryController",null),(0,r.gn)([d.Fl],E.prototype,"TrackerBindings",null),(0,r.gn)([d.aD],E.prototype,"GetTrackerBindings",null),(0,r.gn)([a.ak],E.prototype,"SetTrackerBinding",null),(0,r.gn)([a.ak],E.prototype,"PulseHaptics",null),(0,r.gn)([d.Fl],E.prototype,"KnownControllerTypes",null),(0,r.gn)([a.ak],E.prototype,"AutosaveBinding",null),(0,r.gn)([a.ak],E.prototype,"OnWebSocketOpen",null),(0,r.gn)([a.ak],E.prototype,"OnWebSocketClose",null),(0,r.gn)([a.ak],E.prototype,"WebSocketSend",null),(0,r.gn)([a.ak],E.prototype,"OnWorkshopUploadComplete",null),(0,r.gn)([a.ak],E.prototype,"OnPendingFileSaved",null),(0,r.gn)([d.Fl],E.prototype,"SaveNoticeText",null),(0,r.gn)([a.ak],E.prototype,"QueryBindingList",null),(0,r.gn)([a.ak],E.prototype,"DeleteBinding",null),(0,r.gn)([a.ak],E.prototype,"OnBindingDeleteComplete",null),(0,r.gn)([a.ak],E.prototype,"ShouldShowBindingFailureForControllerType",null),(0,r.gn)([a.ak],E.prototype,"OnQueryResults",null),(0,r.gn)([a.ak],E.prototype,"SelectConfig",null),(0,r.gn)([a.ak],E.prototype,"OnSelectConfigComplete",null),(0,r.gn)([a.ak],E.prototype,"OnTrackersBindingChanged",null),(0,r.gn)([a.ak],E.prototype,"OnActionManifestReloaded",null),(0,r.gn)([a.ak],E.prototype,"SetBindingURL",null),(0,r.gn)([a.ak],E.prototype,"OnActionBindingsReloaded",null),(0,r.gn)([a.ak],E.prototype,"GetControllerWatcherForSourceFromControllerType",null),(0,r.gn)([a.ak],E.prototype,"OnWebSocketMessage",null),(0,r.gn)([d.Fl],E.prototype,"BindingConfig",null),(0,r.gn)([d.Fl],E.prototype,"BindingSubscriptionChangedCanary",null);const L=new E;window.controllerBindingStore=L},1790:(e,t,n)=>{n.d(t,{GZ:()=>l,vs:()=>c});var i=n(655),o=n(7294),s=n(3365),r=(n(1783),n(7056)),a=n(355);n(6592);class l{constructor(e,t,n,i){this.sValue=e,this.sLocalized=t,this.sRequiredLocalized=n,this.sLocalizedDescription=i}}class c extends o.Component{constructor(e){super(e),this.state={sSelectedOption:this.props.sValueSelectedItem,bVisible:!1}}componentWillMount(){null!=this.props.bShowOptionsOnStart&&this.setState({bVisible:this.props.bShowOptionsOnStart})}componentWillReceiveProps(e){null!=e.bShowOptionsOnStart&&e.bShowOptionsOnStart!=this.props.bShowOptionsOnStart&&this.setState({bVisible:e.bShowOptionsOnStart})}Show(e){this.setState({bVisible:!0}),e.stopPropagation()}Hide(e){this.setState({bVisible:!1}),e&&e.stopPropagation()}OnOptionChanged(e,t){this.setState({sSelectedOption:t}),this.props.fnOptionSelected(t),this.Hide(e)}render(){let e=this.props.vecOptions.map(((e,t)=>{if("-"==e.sValue)return o.createElement("div",{key:t,className:"InlineSeparator"});if("-blank"==e.sValue)return o.createElement("div",{key:t,className:"InlineBlankSeparator"},e.sLocalized);if("-nonitem"==e.sValue)return o.createElement("div",{key:t,className:"InlineNonItemSeparator"},e.sLocalized);if("-subHeader"==e.sValue)return o.createElement("div",{key:t,className:"InlineSubHeaderSeparator"},e.sLocalized);{let n,i,s="InlineDropdownItem";return this.props.sValueSelectedItem==e.sValue&&(s+=" Selected"),null!=e.sRequiredLocalized&&(n=o.createElement("span",{className:"BindingLabelActionRequirement"},e.sRequiredLocalized)),null!=e.sLocalizedDescription&&(i=o.createElement(a.ZP,{content:e.sLocalizedDescription,theme:"SourceModes"},o.createElement("span",{className:"SourceModeHelp"},"?"))),o.createElement("div",{key:t,className:s,onClick:t=>{this.OnOptionChanged(t,e.sValue)}},e.sLocalized,n,i)}})),t="InlineDropdownLabel "+(null==this.props.sHeaderClass?"":this.props.sHeaderClass),n="InlineOptionsDropDownRodal "+(null==this.props.sModalClass?"":this.props.sModalClass),i=this.props.sLocalizedSelectedItem;!i&&this.state.sSelectedOption&&this.props.vecOptions.forEach((e=>{e.sValue==this.state.sSelectedOption&&(i=e.sLocalized)}));let r=this.props.bReadOnly?()=>{}:this.Show;return o.createElement("div",{className:t,onClick:r},i&&o.createElement("div",{className:this.props.sMainButtonClass},i),o.createElement(s.Z,{visible:this.state.bVisible,onClose:this.Hide,customStyles:{width:"60%",height:"fit-content",maxHeight:"90%",display:"flex"},showCloseButton:!1,animation:"fade",className:n,closeOnEsc:!0},this.state.bVisible&&o.createElement("div",{className:"FlexColumn InlineDropdownModalWrapper"},this.props.sModalTitleString&&o.createElement("div",{className:"Label ModalHeader"},this.props.sModalTitleString),o.createElement("div",{className:"FlexColumn InlineDropdownItemWrapper"},e))))}}(0,i.gn)([r.ak],c.prototype,"Show",null),(0,i.gn)([r.ak],c.prototype,"Hide",null),(0,i.gn)([r.ak],c.prototype,"OnOptionChanged",null)},6477:(e,t,n)=>{n.d(t,{g:()=>i,w:()=>m});var i,o=n(655),s=n(3947),r=n(7056),a=n(2188),l=n(6321),c=n(3868),d=n(1428),p=n(9670),u=n(6828);!function(e){e[e.None=0]="None",e[e.List=1]="List",e[e.ViewBinding=2]="ViewBinding",e[e.EditBinding=3]="EditBinding",e[e.AppSelect=4]="AppSelect",e[e.Debugger=5]="Debugger"}(i||(i={}));class h{constructor(){this.m_State=i.None,this.m_bLoading=!1,this.m_rBindingList=void 0,this.m_bShowBindingListError=!1,this.m_sBindingListError=void 0,this.m_timeoutLoading=void 0,this.m_pathUpdateTimer=void 0,this.m_bShowManifestError=!1,this.m_sManifestError=void 0,this.m_sManifestErrorPath=void 0,this.m_bStandaloneSettingsPage=!1,this.m_bDesktopMode=!1}Init(){window.addEventListener("popstate",this.OnPopState),history.pushState({direction:"back"},"back"),history.pushState({direction:"current"},"current"),history.pushState({direction:"forward"},"forward"),history.back();let e="bindingui/"+l.qA[(0,l.Op)()];this.m_mailbox=new l.Nv,this.m_mailbox.Init(e),this.m_mailbox.RegisterHandler("show_app_select",this.OnShowAppSelect),this.m_mailbox.RegisterHandler("show_app_binding",this.OnShowAppBinding),this.m_mailbox.RegisterHandler("show_input_debugger",this.OnShowInputDebugger),this.m_mailbox.RegisterHandler("binding_load_failed",this.OnBindingLoadFailed),this.m_mailbox.RegisterHandler("action_manifest_load_failed",this.OnActionManifestLoadFailed),(0,a.EH)(this.UpdateWindowTitle)}ShowOverlayInDashboard(){null===l.ZP||void 0===l.ZP||l.ZP.VROverlay.ShowDashboard("system.vrwebhelper.controllerbinding")}OnShowAppSelect(e){this.m_bStandaloneSettingsPage=!1,this.ShowAppSelect()}OnShowInputDebugger(e){this.m_bStandaloneSettingsPage=!1,this.ShowDebugger()}OnShowAppBinding(e){this.m_bStandaloneSettingsPage=!1,this.Loading=!0,p.S.UpdateApplications().then((()=>{if((0,l.Op)()==l.qA.Overlay?this.ShowOverlayInDashboard():(0,l.Op)()==l.qA.Desktop&&l.ZP.ShowBindingUI(!0),!p.S.GetApp(e.app_key))return console.log("Warning: Could not find app key: "+e.app_key+" showing app select."),void this.ShowAppSelect();d.c6.SetSelectedApp(e.app_key,!0),d.c6.ReloadCurrentApp().then((()=>{if(e.controller_type)return d.c6.SetSelectedController(e.controller_type,!0),void d.c6.ReloadControllerConfiguration().then((()=>{e.action_set&&d.c6.SetSelectedActionSet(e.action_set),this.Loading=!1,this.EditCurrentBinding()}));this.Loading=!1,this.ShowBindingList()}))}))}OnBindingLoadFailed(e){console.log("OnBindingLoadFailed: "+e.app_key+" "+e.controller_type+" "+e.error),p.S.UpdateApplications().then((()=>{if(!p.S.ShouldShowBindingFailureForApp(e.app_key))return;if(!d.c6.ShouldShowBindingFailureForControllerType(e.controller_type))return;d.c6.RememberFailedLoadUri(e.uri),d.c6.SetSelectedApp(e.app_key),d.c6.SetSelectedController(e.controller_type);let t=p.S.GetApp(e.app_key),n=s.I.GetControllerTypeInfo(e.controller_type);if(!n)return;let i=s.I.LocalizeControllerString(n,e.controller_type);this.ShowBindingList((0,c.Xx)(e.error,t?t.name:(0,c.Xx)("#unknown_application"),i)),null===l.ZP||void 0===l.ZP||l.ZP.ShowBindingUI(!1)}))}OnActionManifestLoadFailed(e){this.ShowActionManifestLoadFailed(e.app_key,e.error,e.error_param,e.path)}SetStandaloneSettingsPage(e){this.m_bStandaloneSettingsPage=e}SetDesktopMode(e){this.m_bDesktopMode=e}get DesktopMode(){return this.m_bDesktopMode}SetBindingListError(e){this.m_bShowBindingListError=null!=e,this.m_sBindingListError=e}get ShowBindingListError(){return this.m_bShowBindingListError}get BindingListError(){return this.m_sBindingListError}OnPopState(e){let t="";e.state&&e.state.direction&&(t=e.state.direction),"back"==t?(this.m_bStandaloneSettingsPage&&(this.SetStandaloneSettingsPage(!1),this.ReturnToSettingsUI()),this.GoBackPage(),history.forward()):"forward"==t&&(history.back(),this.GoForwardPage())}GoBackPage(){switch(this.m_State){default:case i.None:case i.AppSelect:break;case i.Debugger:case i.List:this.ShowAppSelect();break;case i.EditBinding:case i.ViewBinding:this.ShowBindingList()}}GoForwardPage(){switch(this.m_State){default:case i.None:case i.AppSelect:this.ShowBindingList();break;case i.List:this.CurrentBinding.url==d.c6.LoadedBindingURL?this.EditCurrentBinding():this.ViewCurrentBinding();case i.EditBinding:case i.ViewBinding:}}get GetUIState(){return this.m_State}get BindingQueryResults(){return this.m_rBindingList}get Loading(){return this.m_bLoading}set Loading(e){this.m_bLoading=e,e?(this.m_timeoutLoading&&clearTimeout(this.m_timeoutLoading),this.m_timeoutLoading=window.setTimeout((()=>{this.Loading=!1}),1e4)):this.m_timeoutLoading&&clearTimeout(this.m_timeoutLoading)}IsSafeToResetControllerType(e,t){return this.m_State==i.AppSelect||this.m_State==i.None||"TrackedDeviceClass_HMD"==e&&"TrackedDeviceClass_Controller"==t}EditCurrentBinding(){this.m_State=i.EditBinding}ViewCurrentBinding(){this.m_State=i.ViewBinding}ShowBindingList(e){this.m_bStandaloneSettingsPage=!1,this.Loading=!0,this.RefreshBindingList().then((()=>{this.SetBindingListError(e),this.Loading=!1,this.m_State=i.List})).catch((()=>{this.Loading=!1}))}get CurrentBinding(){if(this.BindingQueryResults)return m.BindingQueryResults.find((e=>e.url==d.c6.SelectedBindingURL))}ReturnToSettingsUI(){this.ShowAppSelect(),null===l.ZP||void 0===l.ZP||l.ZP.ShowSettingsUI()}ShowAppSelect(){this.m_bStandaloneSettingsPage=!1,this.Loading=!0,p.S.UpdateApplications().then((()=>{this.Loading=!1,this.m_State=i.AppSelect})).catch((()=>{this.Loading=!1}))}UpdatePathsTimeout(){try{u.n.UpdatePaths().then((()=>{this.m_State==i.Debugger?this.m_pathUpdateTimer=window.setTimeout(this.UpdatePathsTimeout,500):this.m_pathUpdateTimer=void 0}))}catch(e){console.log("Stopping debugger timer because",e)}}ShowDebugger(){this.Loading=!0,p.S.UpdateApplications().then((()=>{this.Loading=!1;let e=p.S.GetApp(d.c6.SelectedApp);e&&e.client_container_handle&&u.n.AddSubscribedContainer(e.client_container_handle),this.m_State=i.Debugger,this.m_pathUpdateTimer=window.setTimeout(this.UpdatePathsTimeout,500),l.ZP.ShowBindingUI((0,l.Op)()==l.qA.Desktop)})).catch((()=>{this.Loading=!1}))}RefreshBindingList(){return(0,o.mG)(this,void 0,void 0,(function*(){this.Loading=!0,yield new Promise(((e,t)=>{let n=d.c6.SelectedControllerTypeInfo;d.c6.QueryBindingList(d.c6.SelectedApp,n?n.controller_type:"").then((t=>{t.success&&(this.m_rBindingList=t.results,this.Loading=!1,e())})).catch((()=>{this.Loading=!1}))}))}))}ShowActionManifestLoadFailed(e,t,n,i){let o=p.S.GetApp(e);this.m_sManifestError=(0,c.Xx)(t,o?o.name:e,n),this.m_sManifestErrorPath=i,this.m_bShowManifestError=!0,this.ShowAppSelect(),null===l.ZP||void 0===l.ZP||l.ZP.ShowBindingUI(!1)}ManifestLoadErrorClose(){this.m_sManifestError=void 0,this.m_sManifestErrorPath=void 0,this.m_bShowManifestError=!1}get ShowManifestError(){return this.m_bShowManifestError}get ManifestError(){return this.m_sManifestError}get ManifestErrorPath(){return this.m_sManifestErrorPath}UpdateWindowTitle(){setTimeout((()=>{switch(this.GetUIState){case i.AppSelect:case i.Debugger:case i.EditBinding:case i.List:case i.None:case i.ViewBinding:document.title=(0,c.Xx)("#BindingUI_WindowTitle_ControllerBinding")}}),0)}}(0,o.gn)([a.LO],h.prototype,"m_State",void 0),(0,o.gn)([a.LO],h.prototype,"m_bLoading",void 0),(0,o.gn)([a.LO],h.prototype,"m_rBindingList",void 0),(0,o.gn)([a.LO],h.prototype,"m_bShowBindingListError",void 0),(0,o.gn)([a.LO],h.prototype,"m_sBindingListError",void 0),(0,o.gn)([a.LO],h.prototype,"m_bShowManifestError",void 0),(0,o.gn)([a.LO],h.prototype,"m_sManifestError",void 0),(0,o.gn)([a.LO],h.prototype,"m_sManifestErrorPath",void 0),(0,o.gn)([a.LO],h.prototype,"m_bDesktopMode",void 0),(0,o.gn)([r.ak],h.prototype,"OnShowAppSelect",null),(0,o.gn)([r.ak],h.prototype,"OnShowInputDebugger",null),(0,o.gn)([r.ak],h.prototype,"OnShowAppBinding",null),(0,o.gn)([r.ak],h.prototype,"OnBindingLoadFailed",null),(0,o.gn)([r.ak],h.prototype,"OnActionManifestLoadFailed",null),(0,o.gn)([a.Fl],h.prototype,"DesktopMode",null),(0,o.gn)([r.ak],h.prototype,"SetBindingListError",null),(0,o.gn)([a.Fl],h.prototype,"ShowBindingListError",null),(0,o.gn)([a.Fl],h.prototype,"BindingListError",null),(0,o.gn)([r.ak],h.prototype,"OnPopState",null),(0,o.gn)([r.ak],h.prototype,"GoBackPage",null),(0,o.gn)([r.ak],h.prototype,"GoForwardPage",null),(0,o.gn)([a.Fl],h.prototype,"GetUIState",null),(0,o.gn)([a.Fl],h.prototype,"BindingQueryResults",null),(0,o.gn)([a.Fl],h.prototype,"Loading",null),(0,o.gn)([r.ak],h.prototype,"IsSafeToResetControllerType",null),(0,o.gn)([r.ak],h.prototype,"EditCurrentBinding",null),(0,o.gn)([r.ak],h.prototype,"ViewCurrentBinding",null),(0,o.gn)([r.ak],h.prototype,"ShowBindingList",null),(0,o.gn)([a.Fl],h.prototype,"CurrentBinding",null),(0,o.gn)([r.ak],h.prototype,"ReturnToSettingsUI",null),(0,o.gn)([r.ak],h.prototype,"ShowAppSelect",null),(0,o.gn)([r.ak],h.prototype,"UpdatePathsTimeout",null),(0,o.gn)([r.ak],h.prototype,"ShowDebugger",null),(0,o.gn)([r.ak],h.prototype,"RefreshBindingList",null),(0,o.gn)([a.aD],h.prototype,"ShowActionManifestLoadFailed",null),(0,o.gn)([a.aD],h.prototype,"ManifestLoadErrorClose",null),(0,o.gn)([a.Fl],h.prototype,"ShowManifestError",null),(0,o.gn)([a.Fl],h.prototype,"ManifestError",null),(0,o.gn)([a.Fl],h.prototype,"ManifestErrorPath",null),(0,o.gn)([r.ak],h.prototype,"UpdateWindowTitle",null);const m=new h;window.inputUI=m},3947:(e,t,n)=>{n.d(t,{I:()=>p});var i=n(655),o=n(2188),s=n(9669),r=n.n(s),a=n(7056),l=n(3868),c=n(6321);class d{constructor(){this.m_InputState=void 0,this.m_KnownControllerTypes=o.LO.map(),this.m_mailbox=new c.Nv,this.m_bUpdateInputStateOnControllerTypChange=!1}Init(e){return this.m_mailbox.Init("input_state"),this.m_mailbox.RegisterHandler("controller_type_changed",this.OnControllerTypeChanged),this.m_mailbox.RegisterHandler("action_bindings_reloaded",this.OnActionBindingsReloaded),null!=e&&(this.m_bUpdateInputStateOnControllerTypChange=e),this.GetInputState()}OnActionBindingsReloaded(){this.GetInputState()}OnControllerTypeChanged(e){this.UpdateControllerTypes(e.controller_types),this.m_InputState.controller_types=e.controller_types,this.m_bUpdateInputStateOnControllerTypChange&&this.GetInputState()}get ConnectedDevices(){return null==this.m_InputState?Array():this.m_InputState.devices.filter((e=>"TrackedDeviceClass_Controller"==e.class||"TrackedDeviceClass_HMD"==e.class||"TrackedDeviceClass_GenericTracker"==e.class))}get ControllerTypes(){return this.m_InputState.controller_types}get ShouldSendSystemButtonToAllApps(){return this.m_InputState.send_system_button_to_all_apps}get ShowHiddenInputs(){return this.m_InputState.show_hidden_inputs}get IsSteamAvailable(){return!this.m_InputState||this.m_InputState.is_steam_available}get BDevMode(){return this.m_InputState.dev_mode}get IsValid(){return null!=this.m_InputState}get CurrentUserPersonaName(){return this.m_InputState.current_user_persona_name?this.m_InputState.current_user_persona_name:null}GetControllerTypeInfo(e){return this.m_InputState.controller_types.find((t=>t.controller_type==e))}GetDeviceInfo(e){for(let t of this.m_InputState.devices)if(t.root_path==e||t.device_path==e)return t;return null}LocalizeControllerString(e,t){let n=(0,l.Xx)("#"+t);return n!="#"+t?n:e&&this.m_InputState&&this.m_InputState.localization.hasOwnProperty(e.resource_root)&&this.m_InputState.localization[e.resource_root].hasOwnProperty(t.toLowerCase())?this.m_InputState.localization[e.resource_root][t.toLowerCase()]:t}LocalizeDriverString(e,t){let n=(0,l.Xx)("#"+t);return n!="#"+t?n:this.m_InputState&&this.m_InputState.localization.hasOwnProperty(e)&&this.m_InputState.localization[e].hasOwnProperty(t.toLowerCase())?this.m_InputState.localization[e][t.toLowerCase()]:t}UpdateControllerTypes(e){this.m_KnownControllerTypes.clear();for(let t of e)this.m_KnownControllerTypes.set(t.controller_type,t)}GetInputState(){return(0,i.mG)(this,void 0,void 0,(function*(){yield new Promise((function(e,t){r().get("/input/getstate.json").then((t=>{e(t.data)})).catch((e=>{t(e)}))})).then((e=>{for(let t of e.controller_types)t.controller_type=t.controller_type.toLowerCase();for(let t of e.devices)t.controller_type=t.controller_type.toLowerCase();this.UpdateControllerTypes(e.controller_types),this.m_InputState=e}))}))}get KnownControllerTypes(){return this.m_KnownControllerTypes}FindDeviceClassForControllerType(e){let t=this.GetControllerTypeInfo(e);return null==t?void 0:t.device_class}FindRootPathForControllerType(e){for(let t of this.m_InputState.devices)if(t.controller_type==e)return t.root_path;return null}}(0,i.gn)([o.LO],d.prototype,"m_InputState",void 0),(0,i.gn)([o.LO],d.prototype,"m_KnownControllerTypes",void 0),(0,i.gn)([a.ak],d.prototype,"OnActionBindingsReloaded",null),(0,i.gn)([a.ak],d.prototype,"OnControllerTypeChanged",null),(0,i.gn)([o.Fl],d.prototype,"ConnectedDevices",null),(0,i.gn)([o.Fl],d.prototype,"ControllerTypes",null),(0,i.gn)([o.Fl],d.prototype,"ShouldSendSystemButtonToAllApps",null),(0,i.gn)([o.Fl],d.prototype,"ShowHiddenInputs",null),(0,i.gn)([o.Fl],d.prototype,"IsSteamAvailable",null),(0,i.gn)([o.Fl],d.prototype,"BDevMode",null),(0,i.gn)([o.Fl],d.prototype,"IsValid",null),(0,i.gn)([o.Fl],d.prototype,"CurrentUserPersonaName",null),(0,i.gn)([a.ak],d.prototype,"GetControllerTypeInfo",null),(0,i.gn)([a.ak],d.prototype,"LocalizeControllerString",null),(0,i.gn)([a.ak],d.prototype,"LocalizeDriverString",null),(0,i.gn)([o.aD],d.prototype,"UpdateControllerTypes",null),(0,i.gn)([o.aD],d.prototype,"GetInputState",null),(0,i.gn)([o.Fl],d.prototype,"KnownControllerTypes",null),(0,i.gn)([a.ak],d.prototype,"FindDeviceClassForControllerType",null);const p=new d;window.inputState=p},3868:(e,t,n)=>{n.d(t,{CK:()=>l,LJ:()=>s,Xx:()=>r}),n(7294);var i=n(9669),o=n.n(i);class s{constructor(){this.m_mapTokens=new Map,this.m_mapFallbackTokens=new Map}InitFromObjects(e,t,n,i){this.m_mapTokens.clear();let o=[t,e,i,n];for(let e in o){let t=o[e];for(let e in t){let n=t[e];for(let e in n){let t=e.toLowerCase();this.m_mapTokens.has(t)||this.m_mapTokens.set(t,n[e])}}}}LocalizeString(e){if(!e||0==e.length||"#"!=e.charAt(0))return"";let t=this.m_mapTokens.get(e.substring(1).toLowerCase());return void 0===t?"":t}LocalizeStringFromFallback(e){if(!e||0==e.length||"#"!=e.charAt(0))return"";let t=this.m_mapFallbackTokens.get(e.substring(1).toLowerCase());return void 0===t?"":t}static GetLocale(){const e=navigator.languages[0];try{const t=null===VRHTML||void 0===VRHTML?void 0:VRHTML.GetSystemLocale();return t?(s.s_Date.toLocaleTimeString(t),t):e}catch(t){return e}}}function r(e,...t){let n=a.LocalizeString(e);return n?(t.length>0&&(n=n.replace(/%(\d+)\$s/g,(function(e,n){return void 0!==t[n-1]?String(t[n-1]):e}))),n):e}s.s_Date=new Date;const a=new s;function l(e,t){t||(t=function(){let e=new Map([["en","english"],["de","german"],["fr","french"],["it","italian"],["ko","korean"],["es-419","latam"],["es","spanish"],["zh-CN","schinese"],["zh-TW","tchinese"],["ru","russian"],["th","thai"],["ja","japanese"],["pt","portuguese"],["pl","polish"],["da","danish"],["nl","dutch"],["fi","finnish"],["no","norwegian"],["sv","swedish"],["hu","hungarian"],["cs","czech"],["ro","romanian"],["tr","turkish"],["pt-BR","brazilian"],["bg","bulgarian"],["el","greek"],["uk","ukranian"],["vi","vietnamese"]]);for(let t of navigator.languages){let n=t.split("-");if(e.has(t))return e.get(t);if(e.has(n[0]))return e.get(n[0])}return"english"}());let n=[],i=(e,t,n)=>{let i,s=Date.now().toString();return i="webhelper"==e?`/dashboard/localization/${e}_${t}.json?t=${s}`:`localization/${e}_${t}.json?t=${s}`,o().get(i).then((e=>{n(e.data)})).catch((()=>{}))},s=[],r=[],l=[],c=[];for(let o of e)n.push(i(o,t,(e=>{s.push(e)}))),"english"!=t&&n.push(i(o,"english",(e=>{l.push(e)})));for(let e of["webhelper"])n.push(i(e,t,(e=>{r.push(e)}))),"english"!=t&&n.push(i(e,"english",(e=>{c.push(e)})));return Promise.all(n).then((()=>{a.InitFromObjects(s,r,l,c)}))}window.LocalizationManager=a},4916:(e,t,n)=>{n.d(t,{e:()=>c});var i=n(655),o=n(6321),s=n(7056),r=n(197),a=n(3446),l=n(8546);class c{constructor(){var e;this.m_mailbox=new o.Nv,this.m_dashboardSession=null,this.m_dashboardSessionCount=0,this.m_lastDashboardSessionId=0,this.m_mailbox.Init(null!==(e="ogs_client/"+(null===VRHTML||void 0===VRHTML?void 0:VRHTML.VROverlay.ThisOverlayKey()))&&void 0!==e?e:"unknown"),this.m_mailbox.RegisterHandler("set_dashboard_session_id",this.onSetDashboardSessionId)}static get instance(){return d||(d=new c),d}onSetDashboardSessionId(e){(null===VRHTML||void 0===VRHTML?void 0:VRHTML.VROverlay.ThisOverlayKey())!=r.Az&&(this.m_lastDashboardSessionId=e.id)}AddRow(e,t){if("object"!=typeof t)throw new Error("COGS.AddRow requires an object for its fields argument");let n={type:"add_ogs_row",table:e,fields:t};this.m_mailbox.SendMessage("ogs",n)}GetSource(){switch(null===VRHTML||void 0===VRHTML?void 0:VRHTML.Environment()){case o.qA.Desktop:return"desktop";case o.qA.Overlay:return VRHTML.VROverlay.ThisOverlayKey();default:return"unknown"}}RecordUIEvent(e,t,n){this.AddRow("SteamVRUIEvent",{Source:this.GetSource(),DashboardSessionId:this.m_lastDashboardSessionId,EventNameID:e,Cause:t,Param:n})}StartDashboardSession(e){this.m_dashboardSession&&this.CommitDashboardSession();const t=a.G3.settings.get(r.o1);this.m_lastDashboardSessionId=++this.m_dashboardSessionCount,this.m_dashboardSession={dashboardSessionId:this.m_lastDashboardSessionId,summonedBy:e,appAtStart:null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRApplications.GetSceneApplicationKey(),position:null!=t?l._[t]:void 0},this.m_dashboardStartTime=(new Date).getTime(),this.BroadcastDashboardSessionId()}EndDashboardSession(e){this.m_dashboardSession?this.m_dashboardEndTimer?console.log("Somebody called EndDashboardSession twice"):(this.RecordDashboardSessionDuration(),this.m_dashboardSession.dismissedBy=e,this.m_dashboardEndTimer=setTimeout((()=>{this.CommitDashboardSession()}),5e3)):console.log("Somebody called EndDashboardSession when one wasn't running")}RecordDashboardSessionDuration(){this.m_dashboardSession.duration||(this.m_dashboardSession.duration=Math.round(((new Date).getTime()-this.m_dashboardStartTime)/1e3))}CommitDashboardSession(){this.m_dashboardEndTimer&&(clearTimeout(this.m_dashboardEndTimer),this.m_dashboardEndTimer=null),this.m_dashboardSession.appAtEnd=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRApplications.GetSceneApplicationKey(),this.AddRow("SteamVRDashboardSession",this.m_dashboardSession),this.m_dashboardSession=null,this.m_dashboardStartTime=null,this.m_lastDashboardSessionId=0}BroadcastDashboardSessionId(){let e={type:"set_dashboard_session_id",id:this.m_dashboardSession?this.m_dashboardSession.dashboardSessionId:0};this.m_mailbox.SendMessage("ogs_client",e)}}(0,i.gn)([s.ZP],c.prototype,"onSetDashboardSessionId",null);let d=null},6882:(e,t,n)=>{n.d(t,{R:()=>a,d:()=>l});var i=n(7294),o=n(3935),s=n(1058),r=n(6321);class a extends i.Component{constructor(e){super(e),this.m_elemPortalContainer=null,this.m_elemPortal=null,this.m_refAnchor=i.createRef(),this.state={bInDOM:!1},this.m_elemPortal=document.createElement("div"),this.m_elemPortal.classList.add(a.ELEM_CLASS)}get anchorElement(){return this.m_refAnchor.current}get portalContainer(){var e;return this.m_refAnchor.current?(null===this.m_elemPortalContainer&&(this.m_elemPortalContainer=(0,s.gZ)(["body","vsg-app","vsg-mountable",...null!==(e=this.props.allowableParentSelectors)&&void 0!==e?e:[]],this.m_refAnchor.current)),this.m_elemPortalContainer):null}componentDidMount(){this.portalContainer.appendChild(this.m_elemPortal),this.setState({bInDOM:!0},this.props.onPortalDidMount)}componentWillUnmount(){this.portalContainer.removeChild(this.m_elemPortal)}render(){return this.props.children?(delete Object.assign({},this.props).allowableParentSelectors,i.createElement(i.Fragment,null,i.createElement("div",{className:"ParentPortalAnchor",ref:this.m_refAnchor}),this.m_elemPortal&&this.state.bInDOM&&this.props.children&&o.createPortal(this.props.children,this.m_elemPortal))):null}}a.ELEM_CLASS="v-parent-portal";class l extends i.Component{constructor(e){var t;super(e),this.m_refPanelAnchor=i.createRef(),this.m_sPanelAnchorID=null!==(t=e.panelAnchorID)&&void 0!==t?t:Math.random().toString().substring(2)}get panelAnchor(){return this.m_refPanelAnchor.current}render(){return i.createElement(r.at,{ref:this.m_refPanelAnchor,latched:this.props.latched},i.createElement(r.wx,{id:this.m_sPanelAnchorID}),i.createElement(a,Object.assign({},this.props),i.createElement(r.wx,{parent_id:this.m_sPanelAnchorID},this.props.children)))}}},6828:(e,t,n)=>{n.d(t,{n:()=>d});var i=n(655),o=n(7056),s=n(9669),r=n.n(s),a=n(2188);class l{constructor(){this.contents=a.LO.map()}}(0,i.gn)([a.LO],l.prototype,"contents",void 0);class c{constructor(){this.m_Containers=a.LO.map()}Init(){return(0,i.mG)(this,void 0,void 0,(function*(){this.AddSubscribedContainer("25769803776"),yield this.UpdatePaths()}))}AddSubscribedContainer(e){if(!this.m_Containers.has(e)){let t=new l;t.handle=e,this.m_Containers.set(e,t)}}UpdateContainer(e,t){this.AddSubscribedContainer(e);let n=this.m_Containers.get(e);n.contents.clear(),t.entries.forEach((e=>{null!=e.path&&n.contents.set(e.path,e)}))}QueryContainer(e){return(0,i.mG)(this,void 0,void 0,(function*(){return new Promise((function(t,n){r().get("/properties.json?container="+e).then((n=>{t([e,n.data])})).catch((t=>{n([e,t])}))}))}))}UpdatePaths(){return(0,i.mG)(this,void 0,void 0,(function*(){let e=[];this.m_Containers.forEach((t=>{e.push(this.QueryContainer(t.handle))}));try{(yield Promise.all(e)).forEach((e=>{2!=e.length?console.log("Failed to update container. ",e.length,"entries in array"):"string"==typeof e[1]?console.log("Failed to update container ",e[0],":",e[1]):this.UpdateContainer(e[0],e[1])}))}catch(e){throw console.log(e),e}}))}GetAllActions(e){if(!this.m_Containers.has(e))return;let t=[];return this.m_Containers.get(e).contents.forEach((e=>{"k_unActionPropertyTag"==e.type&&null!=e.path&&t.push(e.path)})),t}GetActionValue(e,t){if(!this.m_Containers.has(e))return;let n=this.m_Containers.get(e);if(!n.contents.has(t))return;let i=n.contents.get(t);return"k_unActionPropertyTag"==i.type?i.value:void 0}GetAllInputValues(e){if(!this.m_Containers.has(e))return;let t=[];return this.m_Containers.get(e).contents.forEach((e=>{"k_unInputValuePropertyTag"==e.type&&null!=e.path&&t.push(e.path)})),t}GetInputValue(e,t){if(!this.m_Containers.has(e))return;let n=this.m_Containers.get(e);if(!n.contents.has(t))return;let i=n.contents.get(t);if("k_unInputValuePropertyTag"!=i.type)return;let o=i.value;return o.length<1?void 0:o[0]}GetScalarInputValue(e,t){let n=this.GetInputValue(e,t);return null==n||"scalar"!=n.type?0:n.value}GetBooleanInputValue(e,t){let n=this.GetInputValue(e,t);return null!=n&&"boolean"==n.type&&n.value}}(0,i.gn)([a.LO],c.prototype,"m_Containers",void 0),(0,i.gn)([o.ak],c.prototype,"AddSubscribedContainer",null),(0,i.gn)([a.aD],c.prototype,"UpdateContainer",null),(0,i.gn)([o.ak],c.prototype,"GetAllActions",null),(0,i.gn)([o.ak],c.prototype,"GetActionValue",null),(0,i.gn)([o.ak],c.prototype,"GetAllInputValues",null),(0,i.gn)([o.ak],c.prototype,"GetInputValue",null),(0,i.gn)([o.ak],c.prototype,"GetScalarInputValue",null),(0,i.gn)([o.ak],c.prototype,"GetBooleanInputValue",null);const d=new c;window.paths=d},1058:(e,t,n)=>{n.d(t,{Fc:()=>c,LJ:()=>d,cB:()=>u,gZ:()=>p,kB:()=>h});var i=n(655),o=(n(7294),n(7056)),s=n(2188),r=n(3446),a=n(197),l=n(6321);function c(e){let t=window.location.search.substring(1).split("&");for(let n=0;n<t.length;n++){let i=t[n].split("=");if(decodeURIComponent(i[0]).toUpperCase()==e.toUpperCase())return decodeURIComponent(i[1])}return""}function d(...e){return e.filter((e=>null!=e&&("string"==typeof e||e[1]))).map((e=>"string"==typeof e?e:e[0])).join(" ")}function p(e,t){let n=t;for(;n.parentElement&&!e.some((e=>n.matches(e)));)n=n.parentElement;return n}class u{constructor(){this.onScroll=null,this.onScrollStop=null,this.m_elem=null,this.m_rScrollableParents=[],this.m_bScrolling=!1,this.m_scrollStopTimeoutHandle=0}ref(e){this.m_elem&&this.cleanup(),this.m_elem=e,this.updateScrollableParents()}get isScrolling(){return this.m_bScrolling}updateScrollableParents(){for(let e of this.m_rScrollableParents)e.removeEventListener("scroll",this.onParentScroll);this.m_rScrollableParents=function(e){let t=[];if(!e)return t;let n=e.parentElement;for(;n;){const e=n.scrollWidth>n.clientWidth,i=n.scrollHeight>n.clientHeight;(e||i)&&t.push(n),n=n.parentElement}return t}(this.m_elem);for(let e of this.m_rScrollableParents)e.addEventListener("scroll",this.onParentScroll)}cleanup(){for(let e of this.m_rScrollableParents)e.removeEventListener("scroll",this.onParentScroll);this.m_rScrollableParents=[],this.m_elem=null,this.clearScrollStopTimeout()}onParentScroll(){var e;this.clearScrollStopTimeout(),this.m_bScrolling=!0,this.m_scrollStopTimeoutHandle=setTimeout(this.onScrollStopTimeout,50),null===(e=this.onScroll)||void 0===e||e.call(this)}clearScrollStopTimeout(){clearTimeout(this.m_scrollStopTimeoutHandle),this.m_scrollStopTimeoutHandle=0}onScrollStopTimeout(){var e;this.m_bScrolling&&(null===(e=this.onScrollStop)||void 0===e||e.call(this)),this.m_bScrolling=!1}}(0,i.gn)([s.LO],u.prototype,"m_bScrolling",void 0),(0,i.gn)([o.ZP],u.prototype,"ref",null),(0,i.gn)([s.Fl],u.prototype,"isScrolling",null),(0,i.gn)([o.ZP],u.prototype,"onParentScroll",null),(0,i.gn)([o.ZP],u.prototype,"onScrollStopTimeout",null);class h{constructor(){this.m_settingsSchemaPromiseCancel=null,this.m_autorunDisposer=null,this.start()}start(){return(0,i.mG)(this,void 0,void 0,(function*(){const[e,t]=function(e){let t=!1;return[new Promise(((n,i)=>{e.then((e=>t?i({canceled:!0}):n(e))).catch((e=>i(t?{canceled:!0}:e)))})),()=>t=!0]}(r.G3.AwaitInitialSettingsSchema());this.m_settingsSchemaPromiseCancel=t,yield e,this.m_autorunDisposer=(0,s.EH)(this.updateFidelity)}))}updateFidelity(){var e,t;let n=null!==(e=r.G3.settings.get(a.Ek))&&void 0!==e?e:l.LL.Auto;n==l.LL.Auto&&(n=null!==(t=null===VRHTML||void 0===VRHTML?void 0:VRHTML.GetRecommendedOverlayRenderQuality())&&void 0!==t?t:l.LL.High),(0,l.Op)()==l.qA.Overlay&&n!=l.LL.High?document.documentElement.classList.add(h.AnimationsDisabledClass):document.documentElement.classList.remove(h.AnimationsDisabledClass)}cleanup(){var e,t;null===(e=this.m_settingsSchemaPromiseCancel)||void 0===e||e.call(this),this.m_settingsSchemaPromiseCancel=null,null===(t=this.m_autorunDisposer)||void 0===t||t.call(this),this.m_autorunDisposer=null,document.documentElement.classList.remove(h.AnimationsDisabledClass)}}h.AnimationsDisabledClass="NoAnimations",(0,i.gn)([o.ZP],h.prototype,"updateFidelity",null)},6192:(e,t,n)=>{n.d(t,{H:()=>l});var i=n(655),o=n(6321),s=n(2188),r=n(7056),a=n(197);class l{constructor(){this.m_sceneApplicationState=o.xY.None,this.m_sceneAppName="",this.m_sceneAppKey="",this.m_sceneApplicationStateChangedEventHandle=null,this.m_unresponsiveTimeout=void 0,this.m_noAppTimeout=void 0,this.m_mountedTime=void 0,this.m_mountedTime=(new Date).getTime(),this.m_sceneApplicationStateChangedEventHandle=null===VRHTML||void 0===VRHTML?void 0:VRHTML.RegisterForSceneApplicationStateChangedEvents(this.updateTransitionState),this.updateTransitionState()}get SceneApplicationState(){return this.m_sceneApplicationState}get SceneAppName(){return this.m_sceneAppName}get SceneAppKey(){return this.m_sceneAppKey}get SceneAppIsHome(){return this.m_sceneAppKey==a.hK}static get Instance(){return l.s_Instance||(l.s_Instance=new l),l.s_Instance}updateTransitionState(){if(!VRHTML)return;let e=VRHTML.VRApplications.GetSceneApplicationState();e==o.xY.Starting?(this.m_sceneApplicationState==o.xY.Quitting&&this.resetLatchedValued(),this.m_sceneApplicationState=e,this.updateLatchedValues(),this.cancelUnresponsiveTimeout(),this.cancelNoAppTimeout()):e==o.xY.Quitting?(this.m_sceneApplicationState==o.xY.Starting&&this.resetLatchedValued(),this.m_sceneApplicationState=e,this.updateLatchedValues(),this.cancelUnresponsiveTimeout(),this.cancelNoAppTimeout()):e==o.xY.Running?(this.m_sceneApplicationState=e,this.cancelUnresponsiveTimeout(),this.cancelNoAppTimeout(),this.updateLatchedValues()):e==o.xY.None?(this.cancelUnresponsiveTimeout(),this.m_sceneApplicationState!=o.xY.None&&this.startNoAppTimer()):e==o.xY.Waiting&&(this.m_sceneApplicationState!=o.xY.Waiting&&this.startUnresponsiveTimer(),this.cancelNoAppTimeout()),this.log("updateTransitionState: "+o.xY[e]),this.log("this.m_sceneAppKey: "+this.m_sceneAppKey),this.log("this.m_sceneAppName: "+this.m_sceneAppName),this.log("this.m_sceneApplicationState: "+this.m_sceneApplicationState)}onUnresponsiveTimeout(){clearTimeout(this.m_unresponsiveTimeout),this.m_unresponsiveTimeout=void 0,this.m_sceneApplicationState=o.xY.Waiting,this.updateLatchedValues()}onNoAppTimeout(){clearTimeout(this.m_noAppTimeout),this.m_noAppTimeout=void 0,VRHTML.VRApplications.GetSceneApplicationState()==o.xY.None&&this.resetLatchedValued()}updateLatchedValues(){if(VRHTML)if(VRHTML.VRApplications.GetSceneApplicationState()==o.xY.Starting){let e=VRHTML.VRApplications.GetStartingApplicationKey();e&&e.length>0&&(this.m_sceneAppKey=e);let t=VRHTML.GetStartingAppName();t&&t.length>0&&(this.m_sceneAppName=t)}else{let e=VRHTML.VRApplications.GetSceneApplicationKey();e&&e.length>0&&(this.m_sceneAppKey=e);let t=VRHTML.GetCurrentSceneFocusAppName();t&&t.length>0&&(this.m_sceneAppName=t)}}resetLatchedValued(){this.m_sceneAppName="",this.m_sceneAppKey="",this.m_sceneApplicationState=o.xY.None}cancelUnresponsiveTimeout(){this.m_unresponsiveTimeout&&(clearTimeout(this.m_unresponsiveTimeout),this.m_unresponsiveTimeout=void 0)}startUnresponsiveTimer(){void 0===this.m_unresponsiveTimeout&&(this.m_unresponsiveTimeout=setTimeout(this.onUnresponsiveTimeout,l.kUnresponsiveDelayMs))}startNoAppTimer(){void 0===this.m_noAppTimeout&&(this.m_noAppTimeout=setTimeout(this.onNoAppTimeout,l.kUnresponsiveDelayMs))}cancelNoAppTimeout(){this.m_noAppTimeout&&(clearTimeout(this.m_noAppTimeout),this.m_noAppTimeout=void 0)}log(e){(new Date).getTime(),this.m_mountedTime}}l.s_Instance=null,l.kUnresponsiveDelayMs=2e3,l.kNoAppDelayMs=2e3,(0,i.gn)([s.Fl],l.prototype,"SceneApplicationState",null),(0,i.gn)([s.Fl],l.prototype,"SceneAppName",null),(0,i.gn)([s.Fl],l.prototype,"SceneAppKey",null),(0,i.gn)([s.Fl],l.prototype,"SceneAppIsHome",null),(0,i.gn)([s.LO],l.prototype,"m_sceneApplicationState",void 0),(0,i.gn)([s.LO],l.prototype,"m_sceneAppName",void 0),(0,i.gn)([s.LO],l.prototype,"m_sceneAppKey",void 0),(0,i.gn)([r.ZP],l.prototype,"updateTransitionState",null),(0,i.gn)([r.ZP],l.prototype,"onUnresponsiveTimeout",null),(0,i.gn)([r.ZP],l.prototype,"onNoAppTimeout",null),(0,i.gn)([r.ZP],l.prototype,"updateLatchedValues",null),(0,i.gn)([r.ZP],l.prototype,"resetLatchedValued",null),(0,i.gn)([r.ZP],l.prototype,"cancelUnresponsiveTimeout",null),(0,i.gn)([r.ZP],l.prototype,"startUnresponsiveTimer",null),(0,i.gn)([r.ZP],l.prototype,"startNoAppTimer",null),(0,i.gn)([r.ZP],l.prototype,"cancelNoAppTimeout",null),(0,i.gn)([r.ZP],l.prototype,"log",null)},4021:(e,t,n)=>{n.d(t,{s:()=>d});var i=n(655),o=n(7056),s=n(9669),r=n.n(s),a=n(2188);class l{constructor(e){this.m_communityData=void 0,this.m_bLoadingData=!1,this.m_sSteamID=void 0,this.m_dateLastUpdate=void 0,this.m_sSteamID=e,e.length>0&&this.EnsureCommunityDataLoaded()}get community_data_ready(){return void 0!==this.m_communityData}get avatar_url(){return this.m_communityData&&this.m_communityData.avatar_url}get persona_name(){return this.m_communityData&&this.m_communityData.persona_name}get player_level(){return this.m_communityData&&this.m_communityData.level}get player_level_class(){return this.m_communityData&&this.m_communityData.level_class}get player_badge(){return this.m_communityData&&this.m_communityData.favorite_badge}get player_in_game(){return this.m_communityData&&this.m_communityData.in_game}EnsureCommunityDataLoaded(){if(void 0===this.m_communityData&&!this.m_bLoadingData){this.m_bLoadingData=!0;let e="https://steamcommunity.com/";r().get(e+"miniprofile/s"+this.m_sSteamID+"/json").then((e=>{let t=e.data;t&&t.avatar_url&&(this.m_communityData=t,this.m_dateLastUpdate=new Date),this.m_bLoadingData=!1})).catch((e=>{console.log(e),this.m_bLoadingData=!1}))}}}(0,i.gn)([a.LO],l.prototype,"m_communityData",void 0),(0,i.gn)([o.ak],l.prototype,"EnsureCommunityDataLoaded",null);class c{constructor(){this.m_SteamCommunityUsers=a.LO.map()}GetUserInformation(e){return this.m_SteamCommunityUsers.has(e)||this.RequestUserInformation(e),this.m_SteamCommunityUsers.get(e)}RequestUserInformation(e){this.m_SteamCommunityUsers.hasOwnProperty(e)||this.m_SteamCommunityUsers.set(e,new l(e))}}(0,i.gn)([a.LO],c.prototype,"m_SteamCommunityUsers",void 0),(0,i.gn)([o.ak],c.prototype,"GetUserInformation",null),(0,i.gn)([o.ak],c.prototype,"RequestUserInformation",null);const d=new c;window.steamcommunity=d},9015:(e,t,n)=>{n.d(t,{b:()=>i,y:()=>l});var i,o=n(655),s=n(2188),r=n(7056),a=n(197);!function(e){e[e.QuickStore=0]="QuickStore",e[e.QuickLaunch=1]="QuickLaunch",e[e.Unknown=2]="Unknown"}(i||(i={}));class l{constructor(){this.m_LastBPEntryPoint=i.Unknown,this.m_NextBPEntryPoint=i.Unknown,this.m_NextBPEntryPointTimeout=0}static get Instance(){return l.s_Instance||(l.s_Instance=new l),l.s_Instance}get lastBigPictureEntryPoint(){return this.m_LastBPEntryPoint}openBigPictureStore(e,t){let n=e?"open/bigpicture/store":"open/bigpicture/storefront";e&&(n+="/"+e),this.setNextEntryPoint(null!=t?t:i.Unknown),this.openSteamURL(n,{backstack_token:this.getBackstackTokenForEntryPoint(this.m_NextBPEntryPoint)})}openBigPictureLibrary(e,t){let n=e?"open/bigpicture/librarydetails":"open/bigpicture/games";e&&(n+="/"+e),this.setNextEntryPoint(null!=t?t:i.Unknown),this.openSteamURL(n,{backstack_token:this.getBackstackTokenForEntryPoint(this.m_NextBPEntryPoint)})}openBigPictureThroughLastEntryPoint(){this.setNextEntryPoint(this.m_LastBPEntryPoint),null===VRHTML||void 0===VRHTML||VRHTML.VROverlay.ShowDashboard(a.Y8)}getBackstackTokenForEntryPoint(e){switch(e){case i.QuickStore:return a.wB;case i.QuickLaunch:return a.O5;case i.Unknown:return null}}latchBigPictureEntryPoint(){this.m_LastBPEntryPoint=this.m_NextBPEntryPoint}setNextEntryPoint(e){this.clearNextEntryPoint(),this.m_NextBPEntryPointTimeout=setTimeout(this.clearNextEntryPoint,1e3),this.m_NextBPEntryPoint=e}clearNextEntryPoint(){this.m_NextBPEntryPoint=i.Unknown,window.clearTimeout(this.m_NextBPEntryPointTimeout)}openSteamURL(e,t){let n="";if(t){const e=Object.keys(null!=t?t:{}).filter((e=>void 0!==t[e]&&null!==t[e])).map((e=>e+"="+t[e])).join("&");e&&(n="?"+e)}const i="steam://"+e+n;console.log("Opening Steam URI: "+i),null===VRHTML||void 0===VRHTML||VRHTML.OpenURL(i)}}l.s_Instance=null,(0,o.gn)([s.LO],l.prototype,"m_LastBPEntryPoint",void 0),(0,o.gn)([s.Fl],l.prototype,"lastBigPictureEntryPoint",null),(0,o.gn)([s.aD],l.prototype,"latchBigPictureEntryPoint",null),(0,o.gn)([r.ZP],l.prototype,"clearNextEntryPoint",null)},4435:(e,t,n)=>{n.d(t,{f:()=>r});var i=n(655),o=n(7056),s=n(2188);class r{constructor(){this.m_volumeChangedEventHandle=null,this.m_nVolume=0,this.m_nMirrorVolume=0,this.m_nMicrophoneVolume=0,this.m_bMuted=!1,this.m_bMirrorMuted=!1,this.m_bMicrophoneMuted=!1,this.m_volumeChangedEventHandle=null===VRHTML||void 0===VRHTML?void 0:VRHTML.VRAudioDevices.RegisterForVolumeChangedEvents(this.onSystemVolumeChanged),this.onSystemVolumeChanged()}static get Instance(){return r.s_Instance||(r.s_Instance=new r),r.s_Instance}get muted(){return this.m_bMuted}get mirrorMuted(){return this.m_bMirrorMuted}get microphoneMuted(){return this.m_bMicrophoneMuted}get volume(){return this.m_nVolume}get mirrorVolume(){return this.m_nMirrorVolume}get microphoneVolume(){return this.m_nMicrophoneVolume}cleanup(){this.m_volumeChangedEventHandle&&(this.m_volumeChangedEventHandle.unregister(),this.m_volumeChangedEventHandle=null)}toggleMute(){this.m_bMuted=!this.m_bMuted,null===VRHTML||void 0===VRHTML||VRHTML.VRAudioDevices.SetMasterSoundVolumeMute(this.m_bMuted)}toggleMirrorMute(){this.m_bMirrorMuted=!this.m_bMirrorMuted,null===VRHTML||void 0===VRHTML||VRHTML.VRAudioDevices.SetMirrorSoundVolumeMute(this.m_bMirrorMuted)}toggleMicrophoneMute(){this.m_bMicrophoneMuted=!this.m_bMicrophoneMuted,null===VRHTML||void 0===VRHTML||VRHTML.VRAudioDevices.SetMasterMicrophoneMute(this.m_bMicrophoneMuted)}setVolume(e){(e=Math.max(0,Math.min(1,e)))!=this.m_nVolume&&(this.m_nVolume=e,this.m_bMuted=0==e,null===VRHTML||void 0===VRHTML||VRHTML.VRAudioDevices.SetMasterSoundVolume(this.m_nVolume),null===VRHTML||void 0===VRHTML||VRHTML.VRAudioDevices.SetMasterSoundVolumeMute(this.m_bMuted))}setMirrorVolume(e){(e=Math.max(0,Math.min(1,e)))!=this.m_nMirrorVolume&&(this.m_nMirrorVolume=e,this.m_bMirrorMuted=0==e,null===VRHTML||void 0===VRHTML||VRHTML.VRAudioDevices.SetMirrorSoundVolume(this.m_nMirrorVolume),null===VRHTML||void 0===VRHTML||VRHTML.VRAudioDevices.SetMirrorSoundVolumeMute(this.m_bMirrorMuted))}setMicrophoneVolume(e){(e=Math.max(0,Math.min(1,e)))!=this.m_nMicrophoneVolume&&(this.m_nMicrophoneVolume=e,this.m_bMicrophoneMuted=0==e,null===VRHTML||void 0===VRHTML||VRHTML.VRAudioDevices.SetMasterMicrophoneVolume(this.m_nMicrophoneVolume),null===VRHTML||void 0===VRHTML||VRHTML.VRAudioDevices.SetMasterMicrophoneMute(this.m_bMicrophoneMuted))}onSystemVolumeChanged(){VRHTML&&(this.m_nVolume=VRHTML.VRAudioDevices.GetMasterSoundVolume(),this.m_bMuted=VRHTML.VRAudioDevices.IsMasterSoundVolumeMute(),this.m_nMirrorVolume=VRHTML.VRAudioDevices.GetMirrorSoundVolume(),this.m_bMirrorMuted=VRHTML.VRAudioDevices.IsMirrorSoundVolumeMute(),this.m_nMicrophoneVolume=VRHTML.VRAudioDevices.GetMasterMicrophoneVolume(),this.m_bMicrophoneMuted=VRHTML.VRAudioDevices.IsMasterMicrophoneMute())}}r.s_Instance=null,(0,i.gn)([s.LO],r.prototype,"m_nVolume",void 0),(0,i.gn)([s.LO],r.prototype,"m_nMirrorVolume",void 0),(0,i.gn)([s.LO],r.prototype,"m_nMicrophoneVolume",void 0),(0,i.gn)([s.LO],r.prototype,"m_bMuted",void 0),(0,i.gn)([s.LO],r.prototype,"m_bMirrorMuted",void 0),(0,i.gn)([s.LO],r.prototype,"m_bMicrophoneMuted",void 0),(0,i.gn)([s.Fl],r.prototype,"muted",null),(0,i.gn)([s.Fl],r.prototype,"mirrorMuted",null),(0,i.gn)([s.Fl],r.prototype,"microphoneMuted",null),(0,i.gn)([s.Fl],r.prototype,"volume",null),(0,i.gn)([s.Fl],r.prototype,"mirrorVolume",null),(0,i.gn)([s.Fl],r.prototype,"microphoneVolume",null),(0,i.gn)([o.ZP],r.prototype,"toggleMute",null),(0,i.gn)([o.ZP],r.prototype,"toggleMirrorMute",null),(0,i.gn)([o.ZP],r.prototype,"toggleMicrophoneMute",null),(0,i.gn)([o.ZP],r.prototype,"setVolume",null),(0,i.gn)([o.ZP],r.prototype,"setMirrorVolume",null),(0,i.gn)([o.ZP],r.prototype,"setMicrophoneVolume",null),(0,i.gn)([o.ZP],r.prototype,"onSystemVolumeChanged",null)},3194:(e,t,n)=>{n.d(t,{Q:()=>a});var i=n(655),o=n(7056),s=n(2188);class r{constructor(){this.m_wsWebSocketToServer=void 0,this.vecMessageBuffer=s.LO.array()}OpenWebSocketToHost(){return new Promise(((e,t)=>{console.log("Connecting vconsole..."),this.m_wsWebSocketToServer=new WebSocket("ws://"+window.location.host),this.m_wsWebSocketToServer.addEventListener("open",(t=>{this.OnWebSocketOpen(t),e()})),this.m_wsWebSocketToServer.addEventListener("message",(e=>{this.OnWebSocketMessage(e)})),this.m_wsWebSocketToServer.addEventListener("close",(e=>{this.OnWebSocketClose(e)}))}))}Init(){return(0,i.mG)(this,void 0,void 0,(function*(){this.connected||(this.vecMessages=[],(0,s.EH)((()=>{this.vecMessages=this.vecMessages.concat(this.vecMessageBuffer.splice(0,this.vecMessageBuffer.length)).map(((e,t)=>({item:e,index:t}))).sort(((e,t)=>e.item.nTimestamp-t.item.nTimestamp||e.index-t.index)).map((({item:e})=>e))}),{delay:300}),yield this.OpenWebSocketToHost())}))}OnWebSocketOpen(e){this.connected=!0,this.WebSocketSend("console_open"),window.addEventListener("beforeunload",(()=>{this.WebSocketSend("console_close")}))}OnWebSocketClose(e){console.log("Lost connection to host..."),this.connected=!1,this.OpenWebSocketToHost()}WebSocketSend(e){null!=this.m_wsWebSocketToServer&&1==this.m_wsWebSocketToServer.readyState&&this.m_wsWebSocketToServer.send(e)}OnWebSocketMessage(e){let t=JSON.parse(e.data);this.OnConsoleMessage(t)}OnConsoleMessage(e){let t=e.sMessage.indexOf("-");e.sTimestamp=e.sMessage.substr(0,t),e.sMessage=e.sMessage.substr(t+1),this.vecMessageBuffer.push(e)}}(0,i.gn)([s.LO],r.prototype,"connected",void 0),(0,i.gn)([s.LO],r.prototype,"vecMessages",void 0),(0,i.gn)([o.ak],r.prototype,"OpenWebSocketToHost",null),(0,i.gn)([o.ak],r.prototype,"OnWebSocketOpen",null),(0,i.gn)([o.ak],r.prototype,"OnWebSocketClose",null),(0,i.gn)([o.ak],r.prototype,"WebSocketSend",null),(0,i.gn)([o.ak],r.prototype,"OnWebSocketMessage",null);const a=new r;window.VRConsoleState=a},3446:(e,t,n)=>{n.d(t,{A3:()=>m,BQ:()=>u,G3:()=>_,_e:()=>p,_g:()=>h});var i=n(655),o=n(7056),s=n(9669),r=n.n(s),a=n(2188),l=n(6321),c=n(8546),d=n(197);const p=16,u=.2,h=5,m=.02,g="change_route";class S{constructor(){this.m_wsWebSocketToServer=void 0,this.m_mailbox=new l.Nv,this.probablyOwnedAppkeys=new Set,this.showInternalSettings=!1,this.workshopStateChangedCanary=1,this.onRestartRequired=null,this.onAppRestartRequired=null,this.pendingChanges=new Map,this.route=[],this.m_mapSettingsLastWriteInfo=new Map,this.m_bIsSettingApp=!1,this.m_bInitStarted=!1,this.GetAppList=function(){return new Promise((function(e,t){r().get("/app/list.json").then((t=>{e(t.data.apps)})).catch((e=>{t(e)}))}))},this.GetSettingsUGC=function(){return new Promise((function(e,t){r().get("/settings_getugc").then((t=>{e(t.data)})).catch((e=>{t(e)}))}))},this.ReloadSettingsSchema=function(){return new Promise((function(e,t){r().get("/settings_reloadschema").then((t=>{e(t.data)})).catch((e=>{t(e)}))}))},this.GetSettingsInfo=function(){return new Promise((function(e,t){r().get("/settings_getinfo").then((t=>{e(t.data)})).catch((e=>{t(e)}))}))}}OpenWebSocketToHost(){return new Promise(((e,t)=>{console.log("Connecting vrsettings..."),this.m_wsWebSocketToServer=new WebSocket("ws://"+window.location.host),this.m_wsWebSocketToServer.addEventListener("open",(t=>{this.OnWebSocketOpen(t),e()})),this.m_wsWebSocketToServer.addEventListener("message",this.OnWebSocketMessage),this.m_wsWebSocketToServer.addEventListener("close",this.OnWebSocketClose)}))}Init(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(this.m_bInitStarted)return;this.m_bInitStarted=!0,this.m_bIsSettingApp=e,this.connected=!1,this.settings=new Map,this.m_bIsSettingApp&&(window.addEventListener("hashchange",this.onHashChanged),this.onHashChanged()),(0,a.EH)((()=>{let e=[];if(0!=this.pendingChanges.size){for(const[t,n]of this.pendingChanges.entries())e.push({name:t,value:n});this.pendingChanges.clear(),r().post("/settings_set.action",e).then((e=>{})).catch((t=>{console.log("Failed to save settings! This usually happens when type is set incorrectly on one of the keys in the schema. ",e)}))}}),{delay:300}),null===VRHTML||void 0===VRHTML||VRHTML.RegisterForDisplayModeNotSupportedEvents(this.SetRestartRequired);let t=[];this.m_mailbox.connected||t.push(this.ConnectMailbox()),t.push(this.OpenWebSocketToHost()),t.push(this.AwaitInitialSettingsSchema()),yield Promise.all(t)}))}get MailboxName(){if(!this.m_bIsSettingApp)return"settings";switch((0,l.Op)()){case l.qA.Overlay:return"settings/overlay";case l.qA.Desktop:return"settings/desktop";default:return"settings/unknown"}}ConnectMailbox(){return(0,i.mG)(this,void 0,void 0,(function*(){try{yield this.m_mailbox.Init(this.MailboxName),this.m_mailbox.RegisterHandler("workshop_state_changed",this.OnWorkshopStateChangedMessage),this.m_mailbox.RegisterHandler(g,this.OnChangeRouteMessage),this.m_mailbox.RegisterHandler("app_config_changed",this.OnAppConfigChangedMessage),this.m_mailbox.RegisterHandler("refresh_rate_change",this.OnRefreshRateChangeMessage)}catch(e){console.log("Failed to open settings mailbox:"+e)}}))}OnWorkshopStateChangedMessage(e){this.workshopStateChangedCanary++}OnChangeRouteMessage(e){this.m_bIsSettingApp&&this.setRoute(e.page,e.section,e.sectionParams)}OnAppConfigChangedMessage(e){return(0,i.mG)(this,void 0,void 0,(function*(){if(e.deleted_appkeys.length)for(let t=this.apps.length-1;t>=0;t--)e.deleted_appkeys.indexOf(this.apps[t].key)>=0&&this.apps.splice(t,1);for(let t of e.updated_apps){for(let e=0;e<this.apps.length;e++)if(this.apps[e].key==t.key){!this.apps[e].is_autolaunch&&t.is_autolaunch&&this.SetRestartRequired(),this.apps[e]=Object.assign(Object.assign(Object.assign({},this.apps[e]),{current_scene_process:!1}),t),t=null;break}t&&(this.apps.push(t),this.probablyOwnedAppkeys.add(t.key))}}))}OnRefreshRateChangeMessage(e){this.onAppRestartRequired&&this.onAppRestartRequired(e.app_supports)}onHashChanged(){if(!this.m_bIsSettingApp)return;const e=window.location.hash;0===e.indexOf("#")?this.route=e.substring(1).split("/"):this.route=[]}get routePage(){return this.route.length>=1?this.route[0]:null}get routePageSection(){return this.route.length>=2?this.route[1]:null}get routePageSectionParams(){return this.route.slice(2)}setRoutePage(e){this.setRoute(e)}setRoutePageSection(e){this.setRoute(this.routePage,e)}setRoutePageSectionParams(e){this.setRoute(this.routePage,this.routePageSection,e)}setRoute(e,t,n){if(this.m_bIsSettingApp){e=null!=e?e:"",n=null!=n?n:[];const i=t?[e,t,...n]:[e],o=i.join("/");window.location.hash.substring(1)!=o&&(window.location.hash=o,this.route=i)}else this.m_mailbox.connected&&this.m_mailbox.SendMessage(this.MailboxName,{type:g,page:e,section:t,sectionParams:n})}SetDashboardFadeSupression(e,t){this.m_mailbox.connected&&this.m_mailbox.SendMessage(c.g.k_sDashboardMailboxName,{type:c.g.k_sSetDashboardFadeSupressionMessage,suppress_dashboard_fade:t,for_id:e})}SetDashboardForceBoundsVisible(e,t,n){this.m_mailbox.connected&&this.m_mailbox.SendMessage(c.g.k_sDashboardMailboxName,{type:c.g.k_sSetDashboardForceBoundsVisible,force_bounds_visible:n,for_overlay_key:e,for_id:t})}SetRestartRequired(){this.onRestartRequired&&this.onRestartRequired()}OnWebSocketOpen(e){this.connected=!0,this.WebSocketSend("settings_open"),window.addEventListener("beforeunload",(()=>{this.WebSocketSend("settings_close")})),_.GetSettingsInfo().then((e=>{this.systemInfo=e})),_.GetAppList().then((e=>{this.OnVRAppList({jsonid:"vr_app_list",apps:e})}))}OnWebSocketClose(e){console.log("Lost connection to host..."),this.connected=!1,this.OpenWebSocketToHost()}WebSocketSend(e){null!=this.m_wsWebSocketToServer&&1==this.m_wsWebSocketToServer.readyState&&this.m_wsWebSocketToServer.send(e)}OnWebSocketMessage(e){let t=JSON.parse(e.data);switch(t.jsonid){case"vr_settings":this.OnVRSettings(t);break;case"vr_settings_schema":this.OnVRSettingsSchema(t);break;case"vr_audio_devices":this.OnVRAudioDevices(t);break;case"vr_app_list":this.OnVRAppList(t);break;default:t.jsonid?console.log("Received unhandled event: "+t.jsonid):console.log("Received unknown message: ",t)}}OnVRSettings(e){for(let t in e.values){const n=e.values[t];if(this.settings.get(t)!=n||this.m_mapSettingsLastWriteInfo.has(t)){if(this.settingsSchema){const e=this.GetSettingSchema(t);e&&e.requires_restart&&this.SetRestartRequired()}this.SetSettingValueFromServer(t,n)}}}SetSettingValueFromServer(e,t){const n=1e3*S.SERVER_SETTING_MERGE_DEFER_DURATION;if(this.m_mapSettingsLastWriteInfo.has(e)){let i=this.m_mapSettingsLastWriteInfo.get(e);if((new Date).getTime()-i.nLastUserUpdateTime<n)return window.clearTimeout(i.nPendingServerValueUpdateTimeout),void(i.nPendingServerValueUpdateTimeout=window.setTimeout((()=>{this.SetSettingValueFromServer(e,t)}),n));window.clearTimeout(i.nPendingServerValueUpdateTimeout),this.m_mapSettingsLastWriteInfo.delete(e)}this.settings.set(e,t)}UpdateLastUserWriteTimeForSetting(e){const t=(new Date).getTime();this.m_mapSettingsLastWriteInfo.has(e)?this.m_mapSettingsLastWriteInfo.get(e).nLastUserUpdateTime=t:this.m_mapSettingsLastWriteInfo.set(e,{nLastUserUpdateTime:t,nPendingServerValueUpdateTimeout:0})}OnVRSettingsSchema(e){null==this.settingsSchema&&(console.log("Got vr settings schema"),this.settingsSchema=e.schema,this.showInternalSettings=e.is_steamvr_main)}AwaitInitialSettingsSchema(){return(0,i.mG)(this,void 0,void 0,(function*(){return(0,a.gx)((()=>!!this.settingsSchema))}))}OnVRAudioDevices(e){console.log("Got audio devices"),this.audioDevices=e}OnVRAppList(e){this.apps=e.apps,e.apps.map((e=>this.probablyOwnedAppkeys.add(e.key)))}SettingNameMatches(e,t){if(t.endsWith("*")){let n=t.length-1;return e.substr(0,n)==t.substr(0,n)}return e==t}GetSettingSchema(e){for(let t of this.settingsSchema)if(t.values)for(let n of t.values)if(this.SettingNameMatches(e,n.name))return n;return null}ResetSettingsValue(e){this.SetSettingsValue(e,null)}ResetSettingsValues(...e){e.forEach(this.ResetSettingsValue)}SetSettingsValue(e,t){let n=this.GetSettingSchema(e);null!=n?(null!=t&&("int"==n.type?t=parseInt(t):"float"==n.type?t=parseFloat(t):"string"==n.type?t=""+t:"bool"==n.type&&(t=!!t)),n.requires_restart&&this.SetRestartRequired(),this.SetSettingsStringValueWithoutSchema(e,t)):console.log("Tried to set setting "+e+" but it's not in the schema! Aborting")}SetSettingsStringValueWithoutSchema(e,t){if(VRHTML){const n=e.split("/");if(4!=n.length||""!=n[0]||"settings"!=n[1])throw new Error("bad settings path "+e);VRHTML.VRSettings.Set(n[2],n[3],t),this.settings.set(e,VRHTML.VRSettings.Get(n[2],n[3]))}else null!=t&&this.settings.set(e,t),this.pendingChanges.set(e,t);this.UpdateLastUserWriteTimeForSetting(e)}GetSettingsValue(e){return(0,i.mG)(this,void 0,void 0,(function*(){return new Promise((function(t,n){r().get("/settings_get",{params:{name:e}}).then((e=>{t(e.data)})).catch((e=>{n(null)}))}))}))}ResetAppSettings(e){return r().post("/app/resetsettings",{app:e}).then((t=>this.GetAppSettings(e))).catch((e=>{}))}SetAppSettings(e,t){let n=Object.assign(Object.assign({},t),{app:e});r().post("/app/setsettings",n);for(let e=0;e<this.apps.length;e++)if(this.apps[e].key==n.app){!this.apps[e].is_autolaunch&&t.is_autolaunch&&this.SetRestartRequired(),this.apps[e]=Object.assign(Object.assign({},this.apps[e]),t);break}}GetAppSettings(e){return(0,i.mG)(this,void 0,void 0,(function*(){return new Promise((function(t,n){r().get("/app/getsettings",{params:{app:e}}).then((e=>{t(e.data)})).catch((e=>{n(null)}))}))}))}get NumSupersamplingSteps(){return Math.floor((h-u+.5*m)/m)}SliderposToSupersample(e){return e>h?h:e<u?u:e}get showAdvancedSettings(){return this.settings.get(d.fY)}set showAdvancedSettings(e){this.SetSettingsValue(d.fY,e)}showBindingCallouts(e){let t={type:"request_binding_callouts",app_key:e};this.m_mailbox.SendMessage(d.Ml,t)}}S.SERVER_SETTING_MERGE_DEFER_DURATION=1,(0,i.gn)([a.LO],S.prototype,"connected",void 0),(0,i.gn)([a.LO],S.prototype,"settingsSchema",void 0),(0,i.gn)([a.LO],S.prototype,"settings",void 0),(0,i.gn)([a.LO],S.prototype,"systemInfo",void 0),(0,i.gn)([a.LO],S.prototype,"audioDevices",void 0),(0,i.gn)([a.LO],S.prototype,"apps",void 0),(0,i.gn)([a.LO],S.prototype,"probablyOwnedAppkeys",void 0),(0,i.gn)([a.LO],S.prototype,"showInternalSettings",void 0),(0,i.gn)([a.LO],S.prototype,"workshopStateChangedCanary",void 0),(0,i.gn)([a.LO],S.prototype,"pendingChanges",void 0),(0,i.gn)([a.LO],S.prototype,"route",void 0),(0,i.gn)([o.ak],S.prototype,"OpenWebSocketToHost",null),(0,i.gn)([o.ak],S.prototype,"OnWorkshopStateChangedMessage",null),(0,i.gn)([o.ak],S.prototype,"OnChangeRouteMessage",null),(0,i.gn)([o.ak],S.prototype,"OnAppConfigChangedMessage",null),(0,i.gn)([o.ak],S.prototype,"OnRefreshRateChangeMessage",null),(0,i.gn)([a.aD.bound],S.prototype,"onHashChanged",null),(0,i.gn)([a.Fl],S.prototype,"routePage",null),(0,i.gn)([a.Fl],S.prototype,"routePageSection",null),(0,i.gn)([a.Fl],S.prototype,"routePageSectionParams",null),(0,i.gn)([a.aD],S.prototype,"setRoutePage",null),(0,i.gn)([a.aD],S.prototype,"setRoutePageSection",null),(0,i.gn)([a.aD],S.prototype,"setRoutePageSectionParams",null),(0,i.gn)([a.aD],S.prototype,"setRoute",null),(0,i.gn)([o.ak],S.prototype,"SetDashboardFadeSupression",null),(0,i.gn)([o.ak],S.prototype,"SetDashboardForceBoundsVisible",null),(0,i.gn)([o.ak],S.prototype,"SetRestartRequired",null),(0,i.gn)([o.ak],S.prototype,"OnWebSocketOpen",null),(0,i.gn)([o.ak],S.prototype,"OnWebSocketClose",null),(0,i.gn)([o.ak],S.prototype,"WebSocketSend",null),(0,i.gn)([o.ak],S.prototype,"OnWebSocketMessage",null),(0,i.gn)([a.aD],S.prototype,"OnVRSettings",null),(0,i.gn)([a.aD],S.prototype,"SetSettingValueFromServer",null),(0,i.gn)([a.aD],S.prototype,"OnVRSettingsSchema",null),(0,i.gn)([a.aD.bound],S.prototype,"ResetSettingsValue",null),(0,i.gn)([a.aD],S.prototype,"ResetSettingsValues",null),(0,i.gn)([a.aD],S.prototype,"SetSettingsValue",null),(0,i.gn)([a.aD],S.prototype,"SetSettingsStringValueWithoutSchema",null),(0,i.gn)([a.Fl],S.prototype,"NumSupersamplingSteps",null);const _=new S;window.VRSettingsState=_},9093:(e,t,n)=>{n.d(t,{E:()=>c});var i=n(655),o=n(7056),s=n(9669),r=n.n(s),a=n(2188);class l{constructor(){this.m_wsWebSocketToServer=void 0,this.IdentifyController=function(e){return e?new Promise((function(t,n){r().get("/identify_controller.action?serial="+e).then((e=>{t()})).catch((e=>{n(e)}))})):null},this.GetUSBDeviceList=function(){return new Promise((function(e,t){r().get("/usb_topology.action").then((t=>{e(t.data)})).catch((e=>{t(e)}))}))},this.ToggleRoomOverview=function(e){return new Promise((function(t,n){r().get("/toggle_room_overview_feed.action?enabled="+(e?"1":"0")).then((e=>{t()})).catch((e=>{n(e)}))}))}}OpenWebSocketToHost(){return new Promise(((e,t)=>{console.log("Connecting vrsystem..."),this.m_wsWebSocketToServer=new WebSocket("ws://"+window.location.host),this.m_wsWebSocketToServer.addEventListener("open",(t=>{this.OnWebSocketOpen(t),e()})),this.m_wsWebSocketToServer.addEventListener("message",this.OnWebSocketMessage),this.m_wsWebSocketToServer.addEventListener("close",this.OnWebSocketClose)}))}Init(){return(0,i.mG)(this,void 0,void 0,(function*(){this.connected=!1,this.framerate=[],this.status={jsonid:"",startup_info:"",status_string:"",is_main:!1,is_perforce:!1,hostname:"",states:[]},this.roomoverview={jsonid:"",collision:[],playarea:[],devices:[],bounds_visible:!1,compositor_available:!1},yield this.OpenWebSocketToHost()}))}OnWebSocketOpen(e){this.connected=!0,this.WebSocketSend("websocket_open"),window.addEventListener("beforeunload",(()=>{this.WebSocketSend("websocket_close")}))}OnWebSocketClose(e){console.log("Lost connection to host..."),this.connected=!1,this.OpenWebSocketToHost()}WebSocketSend(e){null!=this.m_wsWebSocketToServer&&1==this.m_wsWebSocketToServer.readyState&&this.m_wsWebSocketToServer.send(e)}OnWebSocketMessage(e){let t=JSON.parse(e.data);switch(t.jsonid){case"vr_system_status":this.OnSystemStatusMessage(t);break;case"vr_framerate":this.OnFramerateMessage(t);break;case"vr_notifications":this.OnNotificationsMessage(t);break;case"vr_room_overview":this.OnRoomOverviewMessage(t);break;default:t.jsonid?console.log("Received unhandled event: "+t.jsonid):console.log("Received unknown message: ",t)}}OnSystemStatusMessage(e){this.status=e}OnFramerateMessage(e){for(this.framerate.unshift(e);this.framerate.length>60;)this.framerate.pop()}OnNotificationsMessage(e){let t=e.notifications.map(((e,t)=>({title:e.sTitle,description:e.sDescription,timestamp:e.sTimeStamp})));this.notifications=t}OnRoomOverviewMessage(e){this.roomoverview=e}LaunchApplication(e){return new Promise((function(t,n){r().get("/steamvr_launch_application.action?param1="+e).then((e=>{t()})).catch((e=>{n(e)}))}))}TEMP_RegisterPollingWebsocketMessage(e,t){setInterval((()=>{r().get(e).then((e=>{this.OnWebSocketMessage({data:JSON.stringify(e.data)})})).catch((e=>{}))}),t)}}(0,i.gn)([a.LO],l.prototype,"status",void 0),(0,i.gn)([a.LO],l.prototype,"framerate",void 0),(0,i.gn)([a.LO],l.prototype,"notifications",void 0),(0,i.gn)([a.LO],l.prototype,"roomoverview",void 0),(0,i.gn)([a.LO],l.prototype,"connected",void 0),(0,i.gn)([o.ak],l.prototype,"OpenWebSocketToHost",null),(0,i.gn)([o.ak],l.prototype,"OnWebSocketOpen",null),(0,i.gn)([o.ak],l.prototype,"OnWebSocketClose",null),(0,i.gn)([o.ak],l.prototype,"WebSocketSend",null),(0,i.gn)([o.ak],l.prototype,"OnWebSocketMessage",null),(0,i.gn)([o.ak],l.prototype,"TEMP_RegisterPollingWebsocketMessage",null);const c=new l;window.VRSystemState=c}}]);
//# sourceMappingURL=vrwebui_shared.js.map?v=4f8c5928c6802151aa28