 * (c) Valve Corporation. Use is governed by the terms of the Steam Subscriber Agreement http://store.steampowered.com/subscriber_agreement/. 
(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/CXA":function(e,t,n){"use strict";n.d(t,"b",(function(){return p})),n.d(t,"c",(function(){return h})),n.d(t,"a",(function(){return m}));var i,o=n("mrSG"),s=n("q1tI"),r=n("7wIv"),a=n("hcOo"),l=n("2vnA"),c=n("okNM");const d=s.createContext(null);class u{constructor(){this.m_stack=l.m.array([]),this.m_bSViewtackWasChangedInThisCallStack=!0,this.m_nCallStackClearedTimeout=0,window.addEventListener("keydown",this.onWindowKeyDown),window.addEventListener("click",this.onWindowClick)}cleanup(){clearTimeout(this.m_nCallStackClearedTimeout),window.removeEventListener("keydown",this.onWindowKeyDown),window.removeEventListener("click",this.onWindowClick)}onWindowKeyDown(e){"Escape"==e.key&&this.dismissTopView()}onWindowClick(e){const t=this.topView;t&&t.div&&!this.m_bSViewtackWasChangedInThisCallStack&&(t.shouldDismissOnClickAnywhere||t.shouldDismissOnClickInViewStack)&&!t.isPointInDiv(e.clientX,e.clientY)&&(t.shouldDismissOnClickAnywhere||t==this.bottomView||t.getViewsBelow().some(t=>t.isPointInDiv(e.clientX,e.clientY)))&&t.dismissView()}get size(){return this.m_stack.length}dismissTopView(){var e;null===(e=this.topView)||void 0===e||e.dismissView()}get hasViews(){return this.m_stack.length>0}get bottomView(){return this.hasViews?this.m_stack[0]:null}get topView(){return this.hasViews?this.m_stack[this.m_stack.length-1]:null}getViewsBelow(e){const t=this.m_stack.indexOf(e);return t<0?[]:this.m_stack.slice(0,t)}getViewsAbove(e){const t=this.m_stack.indexOf(e);return t<0?[]:this.m_stack.slice(t+1)}getViewLevel(e){return this.m_stack.indexOf(e)}pushView(e){this.m_stack.push(e),this.setViewJustAddedOrRemoved()}removeView(e){this.m_stack.splice(this.m_stack.indexOf(e),1),this.setViewJustAddedOrRemoved()}setViewJustAddedOrRemoved(){clearTimeout(this.m_nCallStackClearedTimeout),this.m_bSViewtackWasChangedInThisCallStack=!0,this.m_nCallStackClearedTimeout=setTimeout(()=>this.m_bSViewtackWasChangedInThisCallStack=!1,0)}}Object(o.b)([r.bind],u.prototype,"cleanup",null),Object(o.b)([r.bind],u.prototype,"onWindowKeyDown",null),Object(o.b)([r.bind],u.prototype,"onWindowClick",null),Object(o.b)([l.f],u.prototype,"size",null),Object(o.b)([l.d.bound],u.prototype,"dismissTopView",null),Object(o.b)([l.f],u.prototype,"hasViews",null),Object(o.b)([l.f],u.prototype,"bottomView",null),Object(o.b)([l.f],u.prototype,"topView",null),Object(o.b)([l.d],u.prototype,"pushView",null),Object(o.b)([l.d],u.prototype,"removeView",null);let p=i=class extends s.Component{constructor(e){super(e),this.m_viewRef=s.createRef(),this.m_newViewStack=null}get viewStack(){return this.context?this.context:(null===this.m_newViewStack&&(this.m_newViewStack=new u),this.m_newViewStack)}get isTopView(){return this.viewStack.topView==this}getViewsBelow(){return this.viewStack.getViewsBelow(this)}getViewsAbove(){return this.viewStack.getViewsAbove(this)}get viewLevel(){return this.viewStack.getViewLevel(this)}get viewShouldFadeForModal(){return this.getViewsAbove().some(e=>e.fadesViewsBelow)}get shouldDismissOnClickInViewStack(){var e;return null!=(e=this.props.shouldDismissOnClickInViewStack)&&e}get shouldDismissOnClickAnywhere(){var e;return null!=(e=this.props.shouldDismissOnClickAnywhere)&&e}get fadesViewsBelow(){var e;return null!=(e=this.props.fadesViewsBelow)&&e}dismissView(){var e,t;null===(t=(e=this.props).onDismissRequested)||void 0===t||t.call(e)}get div(){return this.m_viewRef.current}isPointInDiv(e,t){if(!this.div)return!1;const n=this.div.getBoundingClientRect();return e>=n.left&&e<=n.right&&t>=n.top&&t<=n.bottom}componentDidMount(){this.viewStack.pushView(this)}componentWillUnmount(){var e;this.viewStack.removeView(this),null===(e=this.m_newViewStack)||void 0===e||e.cleanup()}render(){let e=Object.assign({},this.props);delete e.shouldDismissOnClickAnywhere,delete e.shouldDismissOnClickInViewStack,delete e.fadesViewsBelow,delete e.onDismissRequested;const t=s.createElement("div",Object.assign({},e,{className:Object(a.a)("View",[i.k_FadedForModalClassName,this.viewShouldFadeForModal],e.className),style:Object.assign(Object.assign({},e.style),{zIndex:3e3+this.viewLevel}),ref:this.m_viewRef}),e.children);return null===this.context?s.createElement(d.Provider,{value:this.viewStack},t):t}};p.k_FadedForModalClassName="FadedForModal",p.contextType=d,Object(o.b)([l.f],p.prototype,"viewStack",null),Object(o.b)([l.f],p.prototype,"isTopView",null),Object(o.b)([l.f],p.prototype,"viewLevel",null),Object(o.b)([l.f],p.prototype,"viewShouldFadeForModal",null),Object(o.b)([r.bind],p.prototype,"dismissView",null),p=i=Object(o.b)([c.a],p);const h=s.forwardRef((e,t)=>s.createElement(p,Object.assign({},e,{ref:t}),e.children));let m=class extends s.Component{constructor(e){super(e),this.state={viewStack:null}}setFloatingViewStack(e){this.setState({viewStack:e})}render(){var e,t,n;const i=null!=(n=null===(t=null===(e=this.state.viewStack)||void 0===e?void 0:e.bottomView)||void 0===t?void 0:t.viewShouldFadeForModal)&&n;return s.createElement("div",Object.assign({},this.props,{className:Object(a.a)("View",[p.k_FadedForModalClassName,i],this.props.className)}),this.props.children)}};m=Object(o.b)([c.a],m)},"39GS":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("mrSG"),o=n("7wIv"),s=n.n(o),r=n("2vnA");class a{constructor(){var e;this.m_volumeChangedEventHandle=null,this.m_nVolume=0,this.m_nMirrorVolume=0,this.m_nMicrophoneVolume=0,this.m_bMuted=!1,this.m_bMirrorMuted=!1,this.m_bMicrophoneMuted=!1,this.m_volumeChangedEventHandle=null===(e=VRHTML)||void 0===e?void 0:e.VRAudioDevices.RegisterForVolumeChangedEvents(this.onSystemVolumeChanged),this.onSystemVolumeChanged()}static get Instance(){return a.s_Instance||(a.s_Instance=new a),a.s_Instance}get muted(){return this.m_bMuted}get mirrorMuted(){return this.m_bMirrorMuted}get microphoneMuted(){return this.m_bMicrophoneMuted}get volume(){return this.m_nVolume}get mirrorVolume(){return this.m_nMirrorVolume}get microphoneVolume(){return this.m_nMicrophoneVolume}cleanup(){this.m_volumeChangedEventHandle&&(this.m_volumeChangedEventHandle.unregister(),this.m_volumeChangedEventHandle=null)}toggleMute(){var e;this.m_bMuted=!this.m_bMuted,null===(e=VRHTML)||void 0===e||e.VRAudioDevices.SetMasterSoundVolumeMute(this.m_bMuted)}toggleMirrorMute(){var e;this.m_bMirrorMuted=!this.m_bMirrorMuted,null===(e=VRHTML)||void 0===e||e.VRAudioDevices.SetMirrorSoundVolumeMute(this.m_bMirrorMuted)}toggleMicrophoneMute(){var e;this.m_bMicrophoneMuted=!this.m_bMicrophoneMuted,null===(e=VRHTML)||void 0===e||e.VRAudioDevices.SetMasterMicrophoneMute(this.m_bMicrophoneMuted)}setVolume(e){var t,n;(e=Math.max(0,Math.min(1,e)))!=this.m_nVolume&&(this.m_nVolume=e,this.m_bMuted=0==e,null===(t=VRHTML)||void 0===t||t.VRAudioDevices.SetMasterSoundVolume(this.m_nVolume),null===(n=VRHTML)||void 0===n||n.VRAudioDevices.SetMasterSoundVolumeMute(this.m_bMuted))}setMirrorVolume(e){var t,n;(e=Math.max(0,Math.min(1,e)))!=this.m_nMirrorVolume&&(this.m_nMirrorVolume=e,this.m_bMirrorMuted=0==e,null===(t=VRHTML)||void 0===t||t.VRAudioDevices.SetMirrorSoundVolume(this.m_nMirrorVolume),null===(n=VRHTML)||void 0===n||n.VRAudioDevices.SetMirrorSoundVolumeMute(this.m_bMirrorMuted))}setMicrophoneVolume(e){var t,n;(e=Math.max(0,Math.min(1,e)))!=this.m_nMicrophoneVolume&&(this.m_nMicrophoneVolume=e,this.m_bMicrophoneMuted=0==e,null===(t=VRHTML)||void 0===t||t.VRAudioDevices.SetMasterMicrophoneVolume(this.m_nMicrophoneVolume),null===(n=VRHTML)||void 0===n||n.VRAudioDevices.SetMasterMicrophoneMute(this.m_bMicrophoneMuted))}onSystemVolumeChanged(){VRHTML&&(this.m_nVolume=VRHTML.VRAudioDevices.GetMasterSoundVolume(),this.m_bMuted=VRHTML.VRAudioDevices.IsMasterSoundVolumeMute(),this.m_nMirrorVolume=VRHTML.VRAudioDevices.GetMirrorSoundVolume(),this.m_bMirrorMuted=VRHTML.VRAudioDevices.IsMirrorSoundVolumeMute(),this.m_nMicrophoneVolume=VRHTML.VRAudioDevices.GetMasterMicrophoneVolume(),this.m_bMicrophoneMuted=VRHTML.VRAudioDevices.IsMasterMicrophoneMute())}}a.s_Instance=null,Object(i.b)([r.m],a.prototype,"m_nVolume",void 0),Object(i.b)([r.m],a.prototype,"m_nMirrorVolume",void 0),Object(i.b)([r.m],a.prototype,"m_nMicrophoneVolume",void 0),Object(i.b)([r.m],a.prototype,"m_bMuted",void 0),Object(i.b)([r.m],a.prototype,"m_bMirrorMuted",void 0),Object(i.b)([r.m],a.prototype,"m_bMicrophoneMuted",void 0),Object(i.b)([r.f],a.prototype,"muted",null),Object(i.b)([r.f],a.prototype,"mirrorMuted",null),Object(i.b)([r.f],a.prototype,"microphoneMuted",null),Object(i.b)([r.f],a.prototype,"volume",null),Object(i.b)([r.f],a.prototype,"mirrorVolume",null),Object(i.b)([r.f],a.prototype,"microphoneVolume",null),Object(i.b)([s.a],a.prototype,"toggleMute",null),Object(i.b)([s.a],a.prototype,"toggleMirrorMute",null),Object(i.b)([s.a],a.prototype,"toggleMicrophoneMute",null),Object(i.b)([s.a],a.prototype,"setVolume",null),Object(i.b)([s.a],a.prototype,"setMirrorVolume",null),Object(i.b)([s.a],a.prototype,"setMicrophoneVolume",null),Object(i.b)([s.a],a.prototype,"onSystemVolumeChanged",null)},"5/du":function(e,t,n){"use strict";var i=n("mrSG"),o=n("q1tI"),s=n.n(o),r=n("okNM"),a=n("/i/y"),l=n("GXif"),c=n("Q+Z6"),d=n("TbT/"),u=n("7wIv"),p=n.n(u),h=n("GxMB");let m=class extends d.b{constructor(e){super(e),this.m_audioDeviceChangedEventHandle=null,this.state=this.defaultState}get defaultState(){return{}}componentDidMount(){var e;this.m_audioDeviceChangedEventHandle=null===(e=VRHTML)||void 0===e?void 0:e.VRAudioDevices.RegisterForDeviceChangedEvents(this.onAudioDeviceChanged)}onAudioDeviceChanged(){}getHmdAudioSettingsKey(e){return"/settings/audio/"+c.d.audioDevices.hmd_settings_key.replace("{setting}",e)}temporaryDropdownOverride(e,t){e.indexOf("Mirror")>=0?c.d.audioDevices.selected_mirror_device=t:e.indexOf("playback")>=0?c.d.audioDevices.selected_playback_device=t:e.indexOf("recording")>=0&&(c.d.audioDevices.selected_recording_device=t)}setDeviceSetting(e,t,n){n&&(c.d.SetSettingsValue(e,n.guid),c.d.SetSettingsValue(t,n.name),this.temporaryDropdownOverride(e,n.guid))}setDeviceOverride(e,t){this.setDeviceSetting(this.getHmdAudioSettingsKey(e),this.getHmdAudioSettingsKey(e+"Name"),t)}getAudioDevice(e){return e?c.d.audioDevices.playback_devices.concat(c.d.audioDevices.record_devices).find(t=>t.guid==e):{guid:"",name:""}}onOverrideDeviceDropdownChanged(e,t){this.setDeviceOverride(e,this.getAudioDevice(t))}onMirrorDeviceDropdownChanged(e){this.setDeviceSetting("/settings/audio/playbackMirrorDevice","/settings/audio/playbackMirrorDeviceName",this.getAudioDevice(e))}makeDeviceChoiceList(e){let t=[];t.push({value:"",sLabel:Object(l.c)("#Settings_Audio_Default")}),t.push(h.b.Separator);for(let n of e)t.push({value:n.guid,sLabel:n.name});return t}render(){var e,t,n,i;if(!this.props.active)return null;if(void 0===c.d.audioDevices)return null;let s=null!=(t=null===(e=VRHTML)||void 0===e?void 0:e.VRProperties.GetBoolProperty("/user/head",a.y.Audio_SupportsDualSpeakerAndJackOutput_Bool))&&t,r=null!=(i=null===(n=VRHTML)||void 0===n?void 0:n.VRProperties.GetBoolProperty("/user/head",a.y.Hmd_SupportsMicMonitoring_Bool))&&i,u=!1;try{u="htc"==c.d.settings.get("/settings/LastKnown/HMDManufacturer").toLowerCase()&&c.d.settings.get("/settings/LastKnown/HMDModel").toLowerCase().indexOf("vive")>=0}catch(e){}return o.createElement(o.Fragment,null,o.createElement(d.n,{name:this.getHmdAudioSettingsKey("enablePlaybackDeviceOverride"),label:Object(l.c)("#Settings_Audio_Playback_Automatic_Label"),offLabel:Object(l.c)("#Settings_Audio_Headset"),onLabel:Object(l.c)("#Settings_Audio_Manual"),onSubsection:o.createElement(d.h,{items:this.makeDeviceChoiceList(c.d.audioDevices.playback_devices),value:c.d.audioDevices.selected_playback_device,onChange:this.onOverrideDeviceDropdownChanged.bind(this,"playbackDeviceOverride"),defaultLabel:Object(l.c)("#Settings_Audio_Current_Setting_Unknown")})}),o.createElement(d.n,{name:this.getHmdAudioSettingsKey("enableRecordingDeviceOverride"),label:Object(l.c)("#Settings_Audio_Recording_Automatic_Label"),offLabel:Object(l.c)("#Settings_Audio_Headset"),onLabel:Object(l.c)("#Settings_Audio_Manual"),onSubsection:o.createElement(d.h,{items:this.makeDeviceChoiceList(c.d.audioDevices.record_devices),value:c.d.audioDevices.selected_recording_device,onChange:this.onOverrideDeviceDropdownChanged.bind(this,"recordingDeviceOverride"),defaultLabel:Object(l.c)("#Settings_Audio_Current_Setting_Unknown")})}),o.createElement(d.n,{name:"/settings/audio/enablePlaybackMirror",label:Object(l.c)("#Settings_Audio_Mirroring_Label"),onSubsection:o.createElement(o.Fragment,null,o.createElement(d.h,{items:this.makeDeviceChoiceList(c.d.audioDevices.playback_devices),value:c.d.audioDevices.selected_mirror_device,onChange:this.onMirrorDeviceDropdownChanged,defaultLabel:Object(l.c)("#Settings_Audio_Current_Setting_Unknown")}),o.createElement(d.n,{name:"/settings/audio/enablePlaybackMirrorIndependentVolume",label:Object(l.c)("#Settings_Audio_Mirroring_Independent_Volume_Label"),visibility:d.d.Advanced}))}),u&&o.createElement(d.n,{name:"/settings/audio/viveHDMIGain",label:Object(l.c)("#Settings_Audio_HDMIGain")}),s&&o.createElement(d.n,{name:"/settings/audio/dualSpeakerAndJackOutput",label:Object(l.c)("#Settings_Audio_SpeakerJackOutput"),offLabel:Object(l.c)("#Settings_Audio_Single"),onLabel:Object(l.c)("#Settings_Audio_Dual"),title:Object(l.c)("#Settings_Audio_SpeakerJackOutput_Title")}),r&&o.createElement(d.n,{name:"/settings/audio/muteMicMonitor",label:Object(l.c)("#Settings_Audio_MicMonitor"),offLabel:Object(l.c)("#Settings_Audio_Active"),onLabel:Object(l.c)("#Settings_Audio_Muted")}))}};m.Name="audio_settings",Object(i.b)([u.bind],m.prototype,"onAudioDeviceChanged",null),Object(i.b)([u.bind],m.prototype,"onOverrideDeviceDropdownChanged",null),Object(i.b)([u.bind],m.prototype,"onMirrorDeviceDropdownChanged",null),m=Object(i.b)([r.a],m);var b,g,S=n("vzqD"),_=n("6YgL"),f=n("7uy8"),v=n("2vnA"),y=n("X3sx");!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.EDGE_A=1]="EDGE_A",e[e.EDGE_B=2]="EDGE_B",e[e.VIDEO_TRANSLUCENT=3]="VIDEO_TRANSLUCENT",e[e.VIDEO_OPAQUE=4]="VIDEO_OPAQUE",e[e.COUNT=5]="COUNT"}(b||(b={})),function(e){e[e.Evaluating=0]="Evaluating",e[e.Success=1]="Success",e[e.Failure=2]="Failure"}(g||(g={}));class O extends o.Component{constructor(e){super(e),this.m_imageRef=o.createRef(),this.m_cameraFrameCount=0,this.state=O.DefaultState}static get DefaultState(){return{bShowTest:!1,streamingProgress:g.Evaluating,trackingProgress:g.Evaluating}}componentWillUnmount(){this.stopTest()}updateStatus(){let e=Date.now()-this.m_startTestTime;this.state.streamingProgress==g.Evaluating&&(this.m_cameraFrameCount>0?this.setState({streamingProgress:g.Success}):e>5e3&&this.setState({streamingProgress:g.Failure}));let t=VRHTML.GetPose(a.ob,a.A.Standing);if(this.m_cameraFrameCount>0){t.bPoseIsValid||this.setState({trackingProgress:g.Failure}),Date.now()-this.m_firstFrameTime>2e3&&this.state.trackingProgress==g.Evaluating&&this.setState({trackingProgress:g.Success})}}onUpdateCameraFrame(){let e="";try{e=VRHTML.VRTrackedCameraInternal.GetCameraTestFrame(),0==this.m_cameraFrameCount&&(this.m_firstFrameTime=Date.now()),this.m_cameraFrameCount++}catch(e){}this.m_imageRef.current&&(this.m_imageRef.current.src=e),this.updateStatus()}startTest(){this.setState({bShowTest:!0}),VRHTML.VRTrackedCameraInternal.StartCameraTest(),this.m_startTestTime=Date.now(),this.m_cameraFrameCount=0,this.m_imageRef.current&&(this.m_imageRef.current.src=""),this.m_updateInterval=window.setInterval(this.onUpdateCameraFrame,100),this.onUpdateCameraFrame()}stopTest(){this.setState(O.DefaultState),VRHTML.VRTrackedCameraInternal.StopCameraTest(),window.clearInterval(this.m_updateInterval),this.m_updateInterval=void 0}renderStatusLine(){return this.state.streamingProgress==g.Evaluating?o.createElement("h1",{className:"CameraStatus Evaluating"},Object(l.c)("#CameraTest_CheckingCamera")):this.state.streamingProgress==g.Failure?o.createElement("h1",{className:"CameraStatus Failure"},Object(l.c)("#CameraTest_CameraFailed")):this.state.trackingProgress==g.Evaluating?o.createElement("h1",{className:"CameraStatus Evaluating"},Object(l.c)("#CameraTest_CheckingTracking")):this.state.trackingProgress==g.Failure?o.createElement("h1",{className:"CameraStatus Failure"},Object(l.c)("#CameraTest_TrackingFailed")):o.createElement("h1",{className:"CameraStatus Success"},Object(l.c)("#CameraTest_Success"))}render(){return o.createElement(o.Fragment,null,o.createElement("div",{className:"SettingsItem CameraTestSettingsItem"},o.createElement("div",{className:"Label"},Object(l.c)("#Settings_CameraTest")),o.createElement(_.a,{className:"ButtonControl",onClick:this.startTest},Object(l.c)("#Settings_StartCameraTest"))),this.state.bShowTest&&o.createElement(d.i,{className:"CameraTest",header:this.renderStatusLine(),onDismissRequested:this.stopTest},o.createElement("img",{ref:this.m_imageRef})))}}var A;Object(i.b)([u.bind],O.prototype,"onUpdateCameraFrame",null),Object(i.b)([u.bind],O.prototype,"startTest",null),Object(i.b)([u.bind],O.prototype,"stopTest",null),function(e){e[e.Off=0]="Off",e[e.On2D=1]="On2D",e[e.On3D=2]="On3D"}(A||(A={}));const C=Object(r.a)(()=>{var e,t;const n=null!=(t=null===(e=VRHTML)||void 0===e?void 0:e.VRProperties.GetBoolProperty("/user/head",a.y.SupportsRoomViewDepthProjection_Bool))&&t;let i=c.d.settings.get(f.e),s=[{value:A.Off,sLabel:Object(l.c)("#Settings_ToggleButton_Off")}];return n||i==A.On3D?(s.push({value:A.On2D,sLabel:Object(l.c)("#Settings_2D")}),s.push({value:A.On3D,sLabel:Object(l.c)("#Settings_3D")})):s.push({value:A.On2D,sLabel:Object(l.c)("#Settings_ToggleButton_On")}),o.createElement(d.l,{label:Object(l.c)("#Settings_Camera_AllowCameraForRoomView"),title:Object(l.c)("#Settings_Camera_AllowCameraForRoomView_Desc"),items:s,value:i,onChange:e=>{c.d.SetSettingsValue(f.e,e)}})});let w=class extends d.b{constructor(e){super(e),this.state={cameraRateValue:this.fetchCameraRate(),showCameraTest:!1}}cameraEnabled(){return c.d.settings.get(f.d)}get cameraSupportsRates(){var e,t;return null!=(t=null===(e=VRHTML)||void 0===e?void 0:e.VRProperties.GetBoolProperty("/user/head",a.y.CameraSupportsCompatibilityModes_Bool))&&t}fetchCameraRate(){var e,t;if(!this.cameraSupportsRates)return 0;return function(e){switch(e){case a.l.ISO_30FPS:return 30;case a.l.ISO_35FPS:return 35;case a.l.ISO_40FPS:return 40;case a.l.ISO_46FPS:return 45;case a.l.ISO_50FPS:return 50;case a.l.BULK_8K_DMA:return 55;default:case a.l.BULK_DEFAULT:return 60}}(null!=(t=null===(e=VRHTML)||void 0===e?void 0:e.VRProperties.GetInt32Property("/user/head",a.y.CameraCompatibilityMode_Int32))?t:a.l.BULK_DEFAULT)}setCameraRate(e){let t=function(e){switch(e){case 30:return a.l.ISO_30FPS;case 35:return a.l.ISO_35FPS;case 40:return a.l.ISO_40FPS;case 45:return a.l.ISO_46FPS;case 50:return a.l.ISO_50FPS;case 55:return a.l.BULK_8K_DMA;default:case 60:return a.l.BULK_DEFAULT}}(e);VRHTML.VRTrackedCameraInternal.SetCameraCompatibilityMode(t)&&c.d.SetRestartRequired()}onCameraEnabled(e){c.d.SetSettingsValue("/settings/camera/enableCamera",e),this.forceUpdate(),e||this.onStopCameraTest()}onCameraRateChanged(e,t){this.setState({cameraRateValue:t}),this.setCameraRate(t)}onStartCameraTest(){this.setState({showCameraTest:!0})}onStopCameraTest(){this.setState({showCameraTest:!1})}get currentRoomViewStyle(){let e=c.d.settings.get(f.f);return e==b.DEFAULT&&(e=b.EDGE_B),e}renderEnabledSettings(){var e,t;let n=!1,i=!1;switch(this.currentRoomViewStyle){case b.EDGE_A:i=!0,n=!0;break;case b.EDGE_B:n=!0}const s=this.state.cameraRateValue>0,r=c.d.settings.get(f.e),u=c.d.settings.get("/settings/camera/enableCameraForCollisionBounds")||r!=A.Off;let p=[{value:b.EDGE_A,sLabel:Object(l.c)("#Settings_Camera_RoomViewStyle_EdgeA")},{value:b.EDGE_B,sLabel:Object(l.c)("#Settings_Camera_RoomViewStyle_EdgeB")},{value:b.VIDEO_TRANSLUCENT,sLabel:Object(l.c)("#Settings_Camera_RoomViewStyle_VideoTranslucent")},{value:b.VIDEO_OPAQUE,sLabel:Object(l.c)("#Settings_Camera_RoomViewStyle_VideoOpaque")}];const h=null!=(t=null===(e=VRHTML)||void 0===e?void 0:e.VRProperties.GetBoolProperty("/user/head",a.y.SupportsRoomViewDepthProjection_Bool))&&t;return o.createElement(o.Fragment,null,o.createElement(C,null),h&&r==A.On3D&&o.createElement("div",{className:"SettingsItemValueLabel"},Object(l.c)("#Settings_Camera_RoomView3D_Experimental")),!h&&r==A.On3D&&o.createElement("div",{className:"SettingsItemValueLabel"},Object(l.c)("#Settings_Camera_RoomView3D_Unsupported")),s&&o.createElement(d.m,{label:Object(l.c)("#Settings_Camera_Rate_Hz"),title:Object(l.c)("#Settings_Camera_CompatibilityExplanation"),min:30,max:60,step:5,value:this.state.cameraRateValue,onChange:this.onCameraRateChanged.bind(this,"click_activate_threshold"),valueStyleVariant:y.c.OnHandle,renderValue:e=>this.state.cameraRateValue.toString()}),u&&o.createElement(d.h,{value:this.currentRoomViewStyle,onChange:e=>c.d.SetSettingsValue(f.f,e),label:Object(l.c)("#Settings_Camera_RoomViewStyle"),items:p,subsection:(i||n)&&o.createElement(o.Fragment,null,n&&o.createElement(d.p,{nameR:"/settings/camera/cameraBoundsColorGammaR",nameG:"/settings/camera/cameraBoundsColorGammaG",nameB:"/settings/camera/cameraBoundsColorGammaB",label:Object(l.c)("#Settings_Chaperone_BoundsColor")}),i&&o.createElement(d.o,{name:"/settings/camera/cameraBoundsColorGammaA",min:76.5,max:255,label:Object(l.c)("#Settings_Chaperone_BoundsTransparency"),color:{r:c.d.settings.get("/settings/camera/cameraBoundsColorGammaR"),g:c.d.settings.get("/settings/camera/cameraBoundsColorGammaG"),b:c.d.settings.get("/settings/camera/cameraBoundsColorGammaB")}}))}),o.createElement(d.n,{name:"/settings/camera/showOnController",label:Object(l.c)("#Settings_Camera_ShowOnController"),title:Object(l.c)("#Settings_Camera_ShowOnController_Desc")}),o.createElement(d.n,{name:"/settings/camera/enableCameraForCollisionBounds",label:Object(l.c)("#Settings_Camera_AllowCameraForChaperoneBounds"),title:Object(l.c)("#Settings_Camera_AllowCameraForChaperoneBounds_Desc")}),o.createElement("hr",null))}render(){return this.props.active?o.createElement(o.Fragment,null,this.cameraEnabled()&&this.renderEnabledSettings(),this.cameraEnabled()&&this.GetComponentsForGroup("dev"),o.createElement(d.n,{label:Object(l.c)("#Settings_Camera_EnableCamera"),value:this.cameraEnabled(),requiresRestart:!0,onChange:this.onCameraEnabled,offLabel:Object(l.c)("#Settings_ToggleButton_Disable"),onLabel:Object(l.c)("#Settings_ToggleButton_Enable")}),this.cameraEnabled()&&o.createElement(O,null),this.makeResetToDefaultButton()):null}};w.Name="camera_settings",Object(i.b)([u.bind],w.prototype,"onCameraEnabled",null),Object(i.b)([u.bind],w.prototype,"onCameraRateChanged",null),Object(i.b)([u.bind],w.prototype,"onStartCameraTest",null),Object(i.b)([u.bind],w.prototype,"onStopCameraTest",null),Object(i.b)([v.f],w.prototype,"currentRoomViewStyle",null),w=Object(i.b)([r.a],w);var j=n("Gmup");let M=class extends d.b{constructor(e){super(e)}render(){return this.props.active?o.createElement(o.Fragment,null,o.createElement(S.d,null),o.createElement(S.a,null),o.createElement(S.g,null),o.createElement(S.f,null),o.createElement(S.e,null),o.createElement(d.h,{name:f.q,label:Object(l.c)("#Settings_Dashboard_Position"),items:[{value:j.b.Near,sLabel:Object(l.c)("#Settings_Near")},{value:j.b.Middle,sLabel:Object(l.c)("#Settings_Middle")},{value:j.b.Far,sLabel:Object(l.c)("#Settings_Far")}]}),o.createElement(d.n,{name:"/settings/notifications/DoNotDisturb",label:Object(l.c)("#Settings_General_Notifications_Label"),title:Object(l.c)("#Settings_General_Notifications_Text"),swapOnOff:!0}),o.createElement(d.n,{name:"/settings/userinterface/StatusAlwaysOnTop",label:Object(l.c)("#Settings_StatusWindowAlwaysOnTop_Text"),visibility:d.d.Desktop}),o.createElement(d.n,{name:"/settings/steamvr/allowDisplayLockedMode",label:Object(l.c)("#Settings_PauseOnLocked"),swapOnOff:!0,visibility:d.d.Advanced}),o.createElement(d.n,{name:"/settings/steamvr/enableHomeApp",label:Object(l.c)("#Settings_HomeAppCheck"),title:Object(l.c)("#Settings_HomeAppDesc"),visibility:d.d.Advanced})):null}};M.Name="general_settings",M=Object(i.b)([r.a],M);var T=n("tALH");function R(){const[e,t]=o.useState();return o.createElement(d.c,{className:"SettingsItem"},o.createElement(_.a,{className:"ButtonControl Spanning",onClick:()=>Object(i.a)(this,void 0,void 0,(function*(){t(null);try{(yield c.d.ReloadSettingsSchema()).success?window.location.reload():t("Failed to reload schema. File might not be found, or might be invalid.")}catch(e){t(e.message)}}))},"Reload Settings Schema"),e&&o.createElement("div",{className:"Subsection Label"},e))}function E(){if(!VRHTML)return null;const e=VRHTML.VRPathRegistry.GetRuntimePathHistory().map(e=>({value:e,sLabel:e}));return o.createElement(d.c,{className:"SettingsItem"},o.createElement(d.h,{defaultLabel:"Restart with Another SteamVR Install",items:e,onChange:e=>{VRHTML.VRPathRegistry.SetRuntimePath(e),VRHTML.RestartSteamVR(!1)}}))}const k=Object(r.a)(()=>o.createElement(d.c,{className:"SettingsItem"},o.createElement(d.h,{label:"Auto-Show Dashboard",name:f.m,items:[{value:"",sLabel:"Default"},h.b.Separator,{value:f.r,sLabel:"Library"},{value:f.p,sLabel:"Now Playing"},{value:f.s,sLabel:"Store"},h.b.Separator,{value:f.k,sLabel:"Desktop View"},{value:f.L+".1",sLabel:"Desktop 1"},{value:f.L+".2",sLabel:"Desktop 2"},h.b.Separator,{value:f.D,sLabel:"Settings"}]}))),I=e=>{const[t,n]=o.useState(1),[i,s]=o.useState(1),[r,a]=o.useState(1),[l,c]=o.useState(1),[u,p]=o.useState(!1);return o.createElement(o.Fragment,null,o.createElement(d.l,{label:"Segmented Control",items:[{sLabel:"One",value:1},{sLabel:"Two",value:2}],value:t,onChange:n}),o.createElement(d.l,{label:"Segmented Control",items:[{sLabel:"One",value:1},{sLabel:"Two",value:2},{sLabel:"Three",value:3}],value:i,onChange:s}),o.createElement(d.l,{label:"Segmented Control",items:[{sLabel:"One",value:1},{sLabel:"Two",value:2},{sLabel:"Three",value:3},{sLabel:"Four",value:4}],value:r,onChange:a}),o.createElement(d.l,{label:"Segmented Control",items:[{sLabel:"1",value:1},{sLabel:"2",value:2},{sLabel:"3",value:3},{sLabel:"4",value:4},{sLabel:"5",value:5}],value:l,onChange:c}),o.createElement("hr",null),o.createElement(d.n,{label:"Standard Toggle",value:u,onChange:p}),o.createElement(d.n,{label:"Inverted Toggle",value:u,onChange:p,swapOnOff:!0}))},D=e=>{const[t,n]=o.useState(1);return o.createElement(o.Fragment,null,o.createElement(d.k,{label:"Radio Buttons",items:[{sLabel:"1",value:1},{sLabel:"2",value:2},{sLabel:"3",value:3},{sLabel:"4",value:4}],value:t,onChange:n}))},B=e=>{const[t,n]=o.useState(1);return o.createElement(o.Fragment,null,o.createElement(d.h,{label:"Dropdown",items:[{sLabel:"One",value:1},{sLabel:"Two",value:2},{sLabel:"Three",value:3},{sLabel:"Four",value:4}],value:t,onChange:n}))},P=Object(r.a)(()=>{const e="settingscontrolzoo"==c.d.routePageSection;return o.createElement(o.Fragment,null,o.createElement("div",{className:"SettingsItem Button"},o.createElement(_.a,{className:"ButtonControl",onClick:()=>c.d.setRoutePageSection("settingscontrolzoo")},"Zoo of Settings Controls")),e&&o.createElement(d.i,{header:"Settings Controls",onDismissRequested:()=>c.d.setRoutePageSection(null)},o.createElement(I,null),o.createElement("hr",null),o.createElement(D,null),o.createElement("hr",null),o.createElement(B,null)))});let L=class extends d.b{constructor(e){super(e)}render(){return this.props.active?o.createElement(o.Fragment,null,this.schemaComponents,o.createElement(d.m,{name:"/settings/dashboard/verticalOffsetCm_2",label:"Vertical Offset (cm)",min:-9,max:9,valueStyleVariant:y.c.OnHandle,detents:[0],renderValue:e=>e.toFixed(0)+" cm",step:1}),o.createElement(d.n,{label:"Enable Per-App Refresh Rate",name:"/settings/internal/enablePerAppFPS"}),o.createElement(d.n,{label:"Allow Dashboard auto-launch with SteamVR Home",name:"/settings/dashboard/allowDashboardAutoLaunchWithSteamVRHome"}),o.createElement(d.n,{label:"Skip the Dashboard BG fade during SteamVR Home",name:"/settings/dashboard/omitDashboardFadeWithSteamVRHome"}),o.createElement(d.n,{label:"Haptics on Button Exit",name:"/settings/steamvr/noEdgeExitHaptics",swapOnOff:!0}),o.createElement(d.n,{label:"Force Welcome in Quicklaunch",name:"/settings/dashboard/forceWelcomeScreen"}),o.createElement(d.n,{name:f.l,swapOnOff:!0,label:Object(l.c)("#Settings_Animations")}),o.createElement(k,null),o.createElement(R,null),o.createElement(E,null),o.createElement(P,null),this.makeResetToDefaultButton()):null}};L.Name="internal_settings",L=Object(i.b)([r.a],L);var V=n("hcOo");let N=class extends d.b{constructor(e){super(e)}OnSetAsOpenXRRuntime(){var e;null===(e=VRHTML)||void 0===e||e.XRRuntimeManager.SetThisRuntimeToCurrent(),this.forceUpdate()}render(){var e,t,n;if(!this.props.active)return null;let[i,s]=null!=(t=null===(e=VRHTML)||void 0===e?void 0:e.XRRuntimeManager.GetCurrentRuntime())?t:[a.r.Error,""];a.r.ThisSteamVR;switch(i){case a.r.AnotherSteamVR:s="#OpenXR_AnotherSteamVR";break;case a.r.ThisSteamVR:s="#OpenXR_SteamVR";break;default:case a.r.Error:s="#OpenXR_Error";break;case a.r.None:s="#OpenXR_None";break;case a.r.AnotherRuntime:switch(s){case"Oculus OpenXR":s="#OpenXR_OculusRuntime";break;case"MixedRealityRuntime":s="#OpenXR_WindowsMixedReality"}}return s.startsWith("#")&&(s=Object(l.c)(s)),o.createElement(o.Fragment,null,this.schemaComponents,o.createElement("div",{className:"SettingsItem"},o.createElement("div",{className:"OpenXRRuntimeLabel"},Object(l.c)("#Settings_CurrentOpenXRRuntime")),o.createElement("div",{className:"OpenXRRuntimeValue"}," ",s," ")),!(null===(n=VRHTML)||void 0===n?void 0:n.XRRuntimeManager.IsThisRuntimeCurrent())&&o.createElement("div",{className:"SettingsItem Button ResetDefaultButton"},o.createElement(_.a,{className:"ButtonControl",onClick:this.OnSetAsOpenXRRuntime},Object(l.c)("#Settings_SetAsOpenXRRuntime"))),this.makeResetToDefaultButton())}};N.Name="developer_settings",Object(i.b)([u.bind],N.prototype,"OnSetAsOpenXRRuntime",null),N=Object(i.b)([r.a],N);var F=n("uFkT");let G=class extends o.Component{constructor(e){super(e),this.m_refSelectedButton=o.createRef(),this.state={bShowModal:!1,rBackgroundUGCItems:[]}}updateUGCItems(){c.d.GetSettingsUGC().then(e=>{null!=e.items&&this.setState({rBackgroundUGCItems:e.items})})}componentDidMount(){this.updateUGCItems(),this.m_workshopStateChangedCanaryDisposer=Object(v.n)(c.d,"workshopStateChangedCanary",this.updateUGCItems)}componentWillUnmount(){this.m_workshopStateChangedCanaryDisposer(),this.m_workshopStateChangedCanaryDisposer=null}setBackground(e){c.d.systemInfo&&e===c.d.systemInfo.default_background&&(e=""),c.d.SetSettingsValue("/settings/steamvr/background",e),this.hideModal()}hideModal(){this.setState({bShowModal:!1})}showModal(){this.setState({bShowModal:!0})}componentDidUpdate(e,t){this.state.bShowModal&&!t.bShowModal&&setTimeout(()=>{this.m_refSelectedButton.current&&this.m_refSelectedButton.current.elem.scrollIntoView({block:"center"})},0)}get currentBackgroundPath(){const e=c.d.settings.get("/settings/steamvr/background");return e||c.d.systemInfo.default_background}render(){const e=this.currentBackgroundPath,t=[{file:"#A0A0A0FF",tags:"background",preview:"/dashboard/images/background_light_thumbnail.png",publishedfileid:null},{file:"#0D0D0DFF",tags:"background",preview:"/dashboard/images/background_dark_thumbnail.png",publishedfileid:null},...this.state.rBackgroundUGCItems.filter((e,t)=>e.tags&&-1!=e.tags.indexOf("background"))],n=t.find(t=>t.file==e)||null,i=n?n.preview:null;return o.createElement(o.Fragment,null,o.createElement(d.c,{className:"SettingsItem Background",title:Object(l.c)("#Settings_Appearance_BackgroundDesc")},o.createElement("div",{className:"Label"},Object(l.c)("#Settings_Appearance_Background")),o.createElement(_.a,{className:Object(V.a)("ButtonControl",["Background",!!i]),style:{"--background-url-value":i?'url("'+i+'")':null},onClick:this.showModal},!i&&Object(l.c)("#Settings_Appearance_Background_Select"))),this.state.bShowModal&&o.createElement(d.i,{onDismissRequested:this.hideModal,className:"Backgrounds",header:Object(l.c)("#Settings_Appearance_Background"),subheader:F.a.IsSteamAvailable?null:Object(l.c)("#Settings_Appearance_Background_NoSteam")},o.createElement("div",{className:"BackgroundsGrid"},t.map((t,n)=>o.createElement(_.a,{className:Object(V.a)("ButtonControl","Background",["Selected",t.file==e]),style:{"--background-url-value":t.preview?'url("'+t.preview+'")':null},key:"backgroundelement_"+t.preview,ref:t.file==e?this.m_refSelectedButton:null,title:t.file.startsWith("#")?null:t.file,onClick:()=>this.setBackground(t.file)})))))}};Object(i.b)([p.a],G.prototype,"updateUGCItems",null),Object(i.b)([p.a],G.prototype,"setBackground",null),Object(i.b)([p.a],G.prototype,"hideModal",null),Object(i.b)([p.a],G.prototype,"showModal",null),Object(i.b)([v.f],G.prototype,"currentBackgroundPath",null),G=Object(i.b)([r.a],G);class H extends o.Component{constructor(){super(...arguments),this.m_sUniqueIdForForceBoundsVisible=Math.random().toString()}componentDidMount(){c.d.SetDashboardForceBoundsVisible(f.D,this.m_sUniqueIdForForceBoundsVisible,!0)}componentWillUnmount(){c.d.SetDashboardForceBoundsVisible(f.D,this.m_sUniqueIdForForceBoundsVisible,!1)}render(){return null}}let x=class extends d.b{constructor(e){super(e)}render(){var e;if(!this.props.active)return null;const t=c.d.settings.get("/settings/steamvr/background"),n=!!t&&!t.startsWith("#"),i=null!=(e=c.d.settings.get(f.g))?e:.7;let s;return s=i<.5?Object(l.c)("#Settings_Chaperone_SuitableForSmall"):i<1?Object(l.c)("#Settings_Chaperone_SuitableForMedium"):Object(l.c)("#Settings_Chaperone_SuitableForLarge"),o.createElement(o.Fragment,null,o.createElement(H,null),o.createElement(d.h,{name:"/settings/collisionBounds/CollisionBoundsStyle",label:Object(l.c)("#Settings_Chaperone_Style"),items:[{value:0,sLabel:Object(l.c)("#Settings_Chaperone_Style_0")},{value:1,sLabel:Object(l.c)("#Settings_Chaperone_Style_1")},{value:3,sLabel:Object(l.c)("#Settings_Chaperone_Style_3")},{value:2,sLabel:Object(l.c)("#Settings_Chaperone_Style_2")},{value:4,sLabel:Object(l.c)("#Settings_Chaperone_Style_4")}],subsection:o.createElement(o.Fragment,null,o.createElement(d.g,{label:Object(l.c)("#Settings_Chaperone_Color"),nameR:"/settings/collisionBounds/CollisionBoundsColorGammaR",nameG:"/settings/collisionBounds/CollisionBoundsColorGammaG",nameB:"/settings/collisionBounds/CollisionBoundsColorGammaB",nameA:"/settings/collisionBounds/CollisionBoundsColorGammaA",minA:.3,alphaScale:255}),o.createElement(d.n,{name:"/settings/collisionBounds/CollisionBoundsGroundPerimeterOn",label:Object(l.c)("#Settings_Appearance_Chaperone_CollisionBoundsGroundPerimeterOn"),title:Object(l.c)("#Settings_Appearance_Chaperone_CollisionBoundsGroundPerimeterOnDesc")}),o.createElement(d.m,{min:.1,max:3,detents:[2.4],name:"/settings/collisionBounds/CollisionBoundsWallHeight",label:Object(l.c)("#Settings_Chaperone_WallHeight"),renderValue:e=>e.toFixed(2),valueStyleVariant:y.c.OnHandle}),o.createElement(d.m,{min:.2,max:1.4,detents:[.7],name:f.g,label:Object(l.c)("#Settings_Chaperone_ActivationDistance"),renderValue:e=>e.toFixed(2),valueStyleVariant:y.c.OnHandle}),o.createElement("div",{className:"SettingsItemValueLabel"},s))}),o.createElement(d.g,{label:Object(l.c)("#Settings_Appearance_PlayArea_FloorColor"),name:"/settings/steamvr/playAreaColor"}),o.createElement(G,null),n&&o.createElement(d.n,{name:"/settings/steamvr/backgroundUseDomeProjection",label:Object(l.c)("#Settings_Appearance_UseDomeProjection"),title:Object(l.c)("#Settings_Appearance_UseDomeProjectionDesc"),onSubsection:o.createElement(o.Fragment,null,o.createElement(d.m,{min:1,max:10,detents:[1.6],name:f.t,label:Object(l.c)("#Settings_Appearance_DomeCameraHeight"),title:Object(l.c)("#Settings_Appearance_DomeCameraHeightDesc"),exponent:2}),o.createElement(d.m,{min:2,max:250,specialMaxValue:0,name:f.u,label:Object(l.c)("#Settings_Appearance_DomeCameraRadius"),title:Object(l.c)("#Settings_Appearance_DomeCameraRadiusDesc"),exponent:5}),o.createElement(d.c,{className:"SettingsItem"},o.createElement(_.a,{className:"ButtonControl",onClick:()=>c.d.ResetSettingsValues(f.t,f.u)},Object(l.c)("#Settings_Appearance_ResetDomeProjectionSettings"))))}),this.makeResetToDefaultButton())}};x.Name="playarea_settings",x=Object(i.b)([r.a],x);var W,U=n("vDqi"),q=n.n(U);class z{constructor(){this.driverNameToIdMap=new Map,q.a.get("/drivers/list.json").then(e=>{const t=e.data.drivers;this.driverList=t,console.log(t),t.map((e,t)=>{this.driverNameToIdMap.set(e.manifest.name,t)})})}prettyName(e){return z.driverPrettyNames[e]||e}unBlock(e){c.d.SetRestartRequired(),this.driverList[this.driverNameToIdMap.get(e)].blocked_by_safe_mode=!1;let t={driver:e};return q.a.post("/drivers/unblock",t)}setEnabled(e,t){c.d.SetRestartRequired(),this.driverList[this.driverNameToIdMap.get(e)].enabled=t;let n={driver:e,enable:t};return q.a.post("/drivers/setenable",n)}get visibleDriverList(){return this.driverList.filter(e=>!e.manifest.resourceOnly&&(e.enabled_by_default!=e.enabled||(!!e.blocked_by_safe_mode||!e.on_safemode_whitelist)))}get numBlockedDrivers(){return this.visibleDriverList.filter(e=>e.blocked_by_safe_mode).length}get numDisabledDrivers(){return this.visibleDriverList.filter(e=>!e.enabled).length}get numUserManuallyDisenabledDrivers(){return this.visibleDriverList.filter(e=>e.enabled_by_default!=e.enabled).length}}z.driverPrettyNames={lighthouse:"Lighthouse (Index, Vive, ...)",oculus:"Oculus (Rift, Rift S, Quest)",oculus_legacy:"Legacy Oculus (DK1, DK2)",gamepad:"Gamepad Support",null:"No HMD",holographic:"Windows MR / Holographic","00natural":"Natural Locomotion","00inputemulator":"OpenVR-InputEmulator",aapvr:"Pimax",ivry:"iVRy (Phone, PSVR)",kinoni:"Kinoni (Phone)",amdwvr:"AMD ReLive for VR (Wireless)",alvr:"ALVR - Air Light VR (Gear VR, Oculus Go, Quest)",VirtualDesktop:"Virtual Desktop Streamer (Quest)"},Object(i.b)([v.m],z.prototype,"driverList",void 0),Object(i.b)([v.f],z.prototype,"visibleDriverList",null),Object(i.b)([v.f],z.prototype,"numBlockedDrivers",null),Object(i.b)([v.f],z.prototype,"numDisabledDrivers",null),Object(i.b)([v.f],z.prototype,"numUserManuallyDisenabledDrivers",null);const K=new z,X=Object(r.a)(()=>s.a.createElement(_.a,{className:"ButtonControl",title:Object(l.c)("#Settings_Drivers_UnblockAllTip"),onClick:()=>Object(i.a)(void 0,void 0,void 0,(function*(){const e=K.driverList.filter(e=>e.blocked_by_safe_mode).map(e=>e.manifest.name);for(let t=0;t<e.length;++t)yield K.unBlock(e[t])}))},Object(l.c)("#Settings_Drivers_UnblockAll")));function Q(e){return e.blocked?s.a.createElement(d.c,{className:"SettingsItem",title:e.title},s.a.createElement("div",{className:"Label"},e.label),s.a.createElement(_.a,{className:"ButtonControl",title:e.title,onClick:e.onUnblock},Object(l.c)("#Settings_Drivers_Unblock"))):s.a.createElement(d.n,{label:e.label,title:e.title,onChange:e.onToggleEnable,value:e.enabled})}const Y=Object(r.a)(()=>s.a.createElement(s.a.Fragment,null,K.visibleDriverList.map(e=>s.a.createElement(Q,{key:e.manifest.name,label:K.prettyName(e.manifest.name),title:e.manifest.name,blocked:e.blocked_by_safe_mode,enabled:e.enabled,onToggleEnable:t=>{return n=e.manifest.name,i=t,void K.setEnabled(n,i);var n,i},onUnblock:()=>{return t=e.manifest.name,void K.unBlock(t);var t}}))));let J=W=class extends s.a.Component{constructor(e){super(e)}render(){const e=K.numBlockedDrivers,t=K.numDisabledDrivers,n=c.d.showAdvancedSettings||e||K.numUserManuallyDisenabledDrivers,i=c.d.routePageSection==W.PAGE_SECTION;return s.a.createElement(s.a.Fragment,null,!!n&&s.a.createElement("div",{className:"SettingsItem Button"},s.a.createElement(_.a,{className:"ButtonControl",onClick:()=>c.d.setRoutePageSection(W.PAGE_SECTION)},Object(l.c)("#Settings_Drivers_ShowDriverManagerUI"),0!=e&&s.a.createElement("div",{className:"Badge DriversBlocked"},Object(l.c)("#Settings_Drivers_Number_Blocked",e)),0==e&&0!=t&&s.a.createElement("div",{className:"Badge DriversDisabled"},Object(l.c)("#Settings_Drivers_Number_Disabled",t)))),i&&K.driverList&&s.a.createElement(d.i,{header:Object(l.c)("#Settings_Drivers_Header"),subheader:0==e?null:s.a.createElement("div",{className:"BlockedSubheader"},s.a.createElement("div",{className:"Label"},Object(l.c)("#Settings_Drivers_SomeBlocked")),s.a.createElement(X,null)),onDismissRequested:()=>c.d.setRoutePageSection(null)},s.a.createElement(Y,null)))}};J.PAGE_SECTION="drivermanager",J=W=Object(i.b)([r.a],J);let $=class extends o.Component{constructor(e){super(e),this.state={bShowingModal:!1}}show(){this.setState({bShowingModal:!0})}hide(){this.setState({bShowingModal:!1})}render(){const e=!!c.d.apps,t=e?c.d.apps.filter(e=>e.is_dashboard_overlay&&e.key!=f.G&&!e.is_internal):[],n=t.filter(e=>e.is_autolaunch);return o.createElement(o.Fragment,null,o.createElement(d.c,{className:"SettingsItem",title:e?null:Object(l.c)("#Settings_Loading")},o.createElement(_.a,{className:"ButtonControl",enabled:e,onClick:this.show},Object(l.c)("#Settings_ChooseStartupOverlayApps"),e&&o.createElement("div",{className:"Badge"},Object(l.c)("#Settings_Number_Selected",n.length)))),this.state.bShowingModal&&o.createElement(d.i,{className:"OverlayAutoLaunchModal",header:Object(l.c)("#Settings_StartTheseOverlayAppsOnLaunch"),onDismissRequested:this.hide},t.map(e=>o.createElement(d.n,{key:e.key,label:e.name,value:e.is_autolaunch,onChange:t=>c.d.SetAppSettings(e.key,{is_autolaunch:t})})),!t.length&&o.createElement("div",{className:"ModalPlaceholder"},Object(l.c)("#Settings_ChooseStartupOverlayApps_NoOverlayAppsInstalled"))))}};Object(i.b)([p.a],$.prototype,"show",null),Object(i.b)([p.a],$.prototype,"hide",null),$=Object(i.b)([r.a],$);let Z=class extends d.b{constructor(e){super(e)}render(){return this.props.active?o.createElement(o.Fragment,null,o.createElement($,null),o.createElement(J,null),o.createElement("hr",null),this.schemaComponents,this.makeResetToDefaultButton()):null}};Z.Name="startupshutdown_settings",Z=Object(i.b)([r.a],Z);let ee=class extends o.Component{constructor(e){super(e),this.state={m_nValue:c.d.settings.get("/settings/dashboard/dashboardScale")}}componentDidMount(){this.m_settingObserverAutorunDisposer=Object(v.e)(()=>{this.setState({m_nValue:c.d.settings.get("/settings/dashboard/dashboardScale")})})}componentWillUnmount(){this.m_settingObserverAutorunDisposer&&(this.m_settingObserverAutorunDisposer(),this.m_settingObserverAutorunDisposer=null)}render(){return o.createElement(d.m,{label:Object(l.c)("#Settings_DashboardScale"),min:.75,max:1.5,valueStyleVariant:y.c.OnHandle,renderValue:e=>(100*e).toFixed(0)+"%",value:this.state.m_nValue,detents:[1],onChange:e=>{this.setState({m_nValue:e}),Object(a.i)()!=a.H.Overlay&&c.d.SetSettingsValue("/settings/dashboard/dashboardScale",e)},onFinalChange:e=>c.d.SetSettingsValue("/settings/dashboard/dashboardScale",e)})}};ee=Object(i.b)([r.a],ee);let te=class extends d.b{constructor(e){super(e)}render(){return this.props.active?o.createElement(o.Fragment,null,o.createElement(d.h,{name:f.q,label:Object(l.c)("#Settings_Dashboard_Position"),items:[{value:j.b.Near,sLabel:Object(l.c)("#Settings_Near")},{value:j.b.Middle,sLabel:Object(l.c)("#Settings_Middle")},{value:j.b.Far,sLabel:Object(l.c)("#Settings_Far")}]}),o.createElement(d.n,{name:"/settings/dashboard/showPowerOptions",label:Object(l.c)("#Settings_ShowPowerMenu"),visibility:d.d.Advanced}),o.createElement(d.n,{name:"/settings/dashboard/showDesktop",label:Object(l.c)("#Settings_ShowDesktopViews"),visibility:d.d.Advanced}),o.createElement(d.n,{name:"/settings/dashboard/allowAppQuitting",label:Object(l.c)("#Settings_AllowAppQuitting"),visibility:d.d.Advanced}),o.createElement(d.n,{name:"/settings/dashboard/arcadeMode",label:Object(l.c)("#Settings_ShowSettingsInDashboard"),swapOnOff:!0,visibility:d.d.Advanced}),o.createElement(d.n,{name:"/settings/dashboard/enableDashboard",title:Object(l.c)("#Settings_EnableDashboardDesc"),label:Object(l.c)("#Settings_EnableDashboard"),visibility:d.d.Advanced}),this.makeResetToDefaultButton()):null}};te.Name="dashboard_settings",te=Object(i.b)([r.a],te);var ne,ie=n("YRJX"),oe=n("p9CI"),se=n("/CXA");n.d(t,"a",(function(){return ae}));class re extends o.Component{constructor(e){super(e),this.state={bRestartAnimation:!1,bShowSteamVRRestartRequired:!1,bShowAppRestartRequired:!1}}get enabled(){const e=Object(a.i)()==a.H.Overlay;return this.props.standalonePanel==e}onExitApp(){var e;null===(e=a.mb)||void 0===e||e.QuitSceneApp()}onRestartSteamVR(){a.mb?a.mb.RestartSteamVR(!1):window.open("vrmonitor://restartsystem")}onRestartRequired(){this.setState({bShowSteamVRRestartRequired:!0,bRestartAnimation:!0},()=>{setTimeout(()=>{this.setState({bRestartAnimation:!1})},10)})}onAppRestartRequired(e){this.setState({bShowAppRestartRequired:!e,bRestartAnimation:!0},()=>{setTimeout(()=>{this.setState({bRestartAnimation:!1})},10)})}componentDidMount(){this.enabled&&(c.d.onRestartRequired=this.onRestartRequired,c.d.onAppRestartRequired=this.onAppRestartRequired)}componentWillUnmount(){this.enabled&&(c.d.onRestartRequired==this.onRestartRequired&&(c.d.onRestartRequired=null),c.d.onAppRestartRequired==this.onAppRestartRequired&&(c.d.onAppRestartRequired=null))}render(){if(!this.enabled)return null;let e=null;if(this.state.bShowSteamVRRestartRequired?e=o.createElement(_.b,{className:"SettingsRestartRequiredBanner Shown"+(this.state.bRestartAnimation?" ReShimmer":"")},o.createElement("div",{className:"Label"},Object(l.c)("#Settings_MustRestart_Description")),o.createElement(_.a,{className:"ButtonControl",onClick:this.onRestartSteamVR},Object(l.c)("#Settings_MustRestart_RestartSteamVR_Button"))):this.state.bShowAppRestartRequired&&(e=o.createElement(_.b,{className:"SettingsRestartRequiredBanner Shown"+(this.state.bRestartAnimation?" ReShimmer":"")},o.createElement("div",{className:"Label"},Object(l.c)("#Settings_MustQuitApp_Description")),o.createElement(_.a,{className:"ButtonControl",onClick:this.onExitApp},Object(l.c)("#Settings_MustQuitApp_QuitCurrentGame_Button")))),this.props.standalonePanel){if(null===e)return null;const t="mainmountable"+"_TopCenter";return o.createElement(a.lb,{parent_id:t,translation:{y:.2,z:-.05}},o.createElement(a.Y,{debug_name:"settingsrestartbanner",curvature_origin_id:f.i,origin:a.s.BottomCenter,interactive:!0,target_dpi_panel_id:ie.s,reflect:.1},e))}return e}}Object(i.b)([u.bind],re.prototype,"onExitApp",null),Object(i.b)([u.bind],re.prototype,"onRestartSteamVR",null),Object(i.b)([u.bind],re.prototype,"onRestartRequired",null),Object(i.b)([u.bind],re.prototype,"onAppRestartRequired",null);let ae=ne=class extends o.Component{constructor(e){super(e),this.m_refSettingsPageContainer=o.createRef(),this.m_routeObservingAutorunDisposer=null,this.m_fidelitySettingsObserver=null,this.state={sActiveSettingSection:null}}componentDidMount(){this.m_routeObservingAutorunDisposer=Object(v.e)(()=>{c.d.routePage?this.setState({sActiveSettingSection:c.d.routePage}):c.d.setRoutePage(c.d.settingsSchema.filter(ne.shouldShowSection)[0].controller)}),this.m_fidelitySettingsObserver=new V.b,this.ListenForHomeEnabledChanges()}componentDidUpdate(e,t){this.state.sActiveSettingSection!==t.sActiveSettingSection&&this.m_refSettingsPageContainer.current&&(this.m_refSettingsPageContainer.current.scrollTop=0)}componentWillUnmount(){var e,t;null===(e=this.m_routeObservingAutorunDisposer)||void 0===e||e.call(this),this.m_routeObservingAutorunDisposer=null,null===(t=this.m_fidelitySettingsObserver)||void 0===t||t.cleanup(),this.m_fidelitySettingsObserver=null}render(){const e=!c.d.connected||!c.d.settingsSchema;let t=null;e&&Object(a.i)()!=a.H.Overlay?t=o.createElement("div",{className:"Label"},Object(l.c)("#Settings_Loading")):e||(Object(a.i)()!=a.H.Overlay||this.props.visible)&&(t=this.renderSettingsPanelContents());let n=null;if(Object(a.i)()==a.H.Overlay){const e="mainmountable",i=e+"_TopCenter";n=o.createElement(a.j,{id:"settingstab",tabName:Object(l.c)("#VRMonitor_Nav_Settings"),iconUri:"/dashboard/images/icons/svr_settings.svg",summonOverlayKey:f.D,mountableUnqualifiedID:e},t&&o.createElement(re,{standalonePanel:!0}),t&&o.createElement(ie.h,{visible:!0,debugName:"settings",additionalClassNames:"Settings",foregroundReflectMultiplier:.25},o.createElement(a.Z,{id:i,location:a.s.TopCenter}),t))}else n=t;return o.createElement("div",{className:Object(V.a)("SettingsMain",Object(a.i)()==a.H.Overlay?"Overlay":"Desktop",["Loading",e])},n)}renderSettingsPanelContents(){const e=c.d.settingsSchema.filter(ne.shouldShowSection);return o.createElement(_.b,{className:"SettingsMainPanel"},o.createElement(re,{standalonePanel:!1}),o.createElement("div",{className:"SettingsSidebarPageModalContainer"},o.createElement(se.c,{className:"SettingsSidebarPageContainer"},o.createElement("div",{className:Object(V.a)("SettingsSidebar")},e.map(this.renderSectionButton),o.createElement("div",{className:"Spacer"}),o.createElement("div",{className:Object(V.a)("Bottom","AdvancedSettingsToggle",["Fadable",!c.d.showAdvancedSettings])},o.createElement(d.n,{label:Object(l.c)("#Settings_AdvancedSettings"),value:c.d.showAdvancedSettings,onChange:e=>c.d.showAdvancedSettings=e,onLabel:Object(l.c)("#Settings_Show"),offLabel:Object(l.c)("#Settings_Hide")}))),o.createElement(oe.b,{scrollDirection:oe.a.Vertical,alwaysShowScrollbars:!0,className:Object(V.a)("SettingsPageContainer"),ref:this.m_refSettingsPageContainer},e.map(this.renderSectionPage)))))}renderSectionButton(e){let t=["SettingsSidebarButton"];return this.state.sActiveSettingSection===e.controller&&t.push("Active"),o.createElement(_.a,{key:e.title,className:t.join(" "),onClick:()=>c.d.setRoutePage(e.controller)},o.createElement("div",{className:"Label"},Object(l.c)(e.title)))}renderSectionPage(e){const t=e.controller?e.controller:"generic",n=this.state.sActiveSettingSection===e.controller,i=[m,Z,x,S.c,w,M,te,N,L,T.a].find(e=>e.Name===t)||d.b;return o.createElement(i,{key:e.title,section:e,active:n})}static shouldShowSection(e){var t,n;if(e.internal_only&&!c.d.showInternalSettings&&!c.d.settings.get(ne.k_sShowInternalSettings))return!1;if(!e.show_without_hmd&&!(null===(t=a.mb)||void 0===t?void 0:t.HasHMD()))return!1;if(e.desktop_only&&Object(a.i)()==a.H.Overlay)return!1;if(e.advanced_only&&!c.d.showAdvancedSettings)return!1;if(e.controller==w.Name&&!(null===(n=a.mb)||void 0===n?void 0:n.VRProperties.GetBoolProperty("/user/head",a.y.HasCamera_Bool)))return!1;if(e.controller==m.Name){if(!(c.d.systemInfo&&c.d.systemInfo.os_type>=0))return!1}return!(!a.mb&&e.web_helper_only)}ListenForHomeEnabledChanges(){return Object(i.a)(this,void 0,void 0,(function*(){if(Object(a.i)()!=a.H.Overlay)return;let e=yield c.d.GetSettingsValue(f.v);a.mb&&Object(v.e)(()=>{let t=c.d.settings.get(f.v);void 0!==t&&t!=e&&(t&&!a.mb.VRApplications.GetSceneApplicationKey()?a.mb.VRApplications.LaunchApplication(f.y):t||a.mb.VRApplications.GetSceneApplicationKey()!=f.y||a.mb.QuitSceneApp(),e=t)})}))}};ae.k_sShowInternalSettings="/settings/steamvr/showInternalSettings",Object(i.b)([u.bind],ae.prototype,"renderSectionButton",null),Object(i.b)([u.bind],ae.prototype,"renderSectionPage",null),ae=ne=Object(i.b)([r.a],ae)},"6YgL":function(e,t,n){"use strict";n.d(t,"a",(function(){return d})),n.d(t,"b",(function(){return u}));var i=n("mrSG"),o=n("q1tI"),s=n("7wIv"),r=n("CzjV"),a=n("/i/y"),l=n("nAcY"),c=n("hcOo");class d extends o.Component{constructor(){super(...arguments),this.m_ref=o.createRef()}get elem(){return this.m_ref.current}get disabled(){return!1===this.props.enabled}onMouseDown(e){var t,n,i;null===(n=(t=this.props).onMouseDown)||void 0===n||n.call(t,e),this.disabled||r.b.Instance.playSound(null!=(i=this.props.pressSoundEffect)?i:null)}onMouseUp(e){var t,n;null===(n=(t=this.props).onMouseUp)||void 0===n||n.call(t,e)}onClick(e){var t,n,i;this.disabled||(null===(n=(t=this.props).onClick)||void 0===n||n.call(t,e),u.temporarilySuppressSoundEffect(),r.b.Instance.playSound(null!=(i=this.props.releaseSoundEffect)?i:r.a.ButtonClick))}onMouseEnter(e){var t,n;null===(n=(t=this.props).onMouseEnter)||void 0===n||n.call(t,e),this.disabled||Object(a.i)()==a.H.Overlay&&l.b.Instance.triggerHaptic(l.a.ButtonEnter)}onMouseLeave(e){this.props.onMouseLeave&&this.props.onMouseLeave(e),this.disabled||Object(a.i)()==a.H.Overlay&&l.b.Instance.triggerHaptic(l.a.ButtonLeave)}render(){let e=Object.assign({},this.props);return delete e.enabled,delete e.pressSoundEffect,delete e.releaseSoundEffect,e.className=Object(c.a)(e.className,["Disabled",this.disabled]),o.cloneElement(o.createElement("div",e,this.props.children),{onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,ref:this.m_ref})}}Object(i.b)([s.bind],d.prototype,"onMouseDown",null),Object(i.b)([s.bind],d.prototype,"onMouseUp",null),Object(i.b)([s.bind],d.prototype,"onClick",null),Object(i.b)([s.bind],d.prototype,"onMouseEnter",null),Object(i.b)([s.bind],d.prototype,"onMouseLeave",null);class u extends o.Component{static temporarilySuppressSoundEffect(){window.clearTimeout(this.s_nPlaySoundEffectTimeout),this.s_nPlaySoundEffectTimeout=0,window.clearTimeout(this.s_nSuppressingSoundEffectsTimeout),this.s_nSuppressingSoundEffectsTimeout=window.setTimeout(this.endSoundEffectSuppression,this.k_nSoundEffectSuppressionPeriod)}static get suppressingSoundEffect(){return this.s_nSuppressingSoundEffectsTimeout>0}onClick(e){u.suppressingSoundEffect||(window.clearTimeout(u.s_nPlaySoundEffectTimeout),u.s_nPlaySoundEffectTimeout=window.setTimeout(u.playSoundEffect,u.k_nSoundEffectDelay)),this.props.onClick&&this.props.onClick(e)}static endSoundEffectSuppression(){window.clearTimeout(this.s_nSuppressingSoundEffectsTimeout),this.s_nSuppressingSoundEffectsTimeout=0}static playSoundEffect(){r.b.Instance.playSound(r.a.SurfaceClick)}render(){return o.cloneElement(o.createElement("div",this.props,this.props.children),{onClick:this.onClick})}}u.k_nSoundEffectSuppressionPeriod=4,u.k_nSoundEffectDelay=2,u.s_nSuppressingSoundEffectsTimeout=0,u.s_nPlaySoundEffectTimeout=0,Object(i.b)([s.bind],u.prototype,"onClick",null),Object(i.b)([s.bind],u,"endSoundEffectSuppression",null),Object(i.b)([s.bind],u,"playSoundEffect",null)},"7uy8":function(e,t,n){"use strict";n.d(t,"y",(function(){return i})),n.d(t,"G",(function(){return o})),n.d(t,"K",(function(){return s})),n.d(t,"M",(function(){return r})),n.d(t,"n",(function(){return a})),n.d(t,"r",(function(){return l})),n.d(t,"s",(function(){return c})),n.d(t,"p",(function(){return d})),n.d(t,"k",(function(){return u})),n.d(t,"h",(function(){return p})),n.d(t,"F",(function(){return h})),n.d(t,"Q",(function(){return m})),n.d(t,"D",(function(){return b})),n.d(t,"H",(function(){return g})),n.d(t,"I",(function(){return S})),n.d(t,"c",(function(){return _})),n.d(t,"B",(function(){return f})),n.d(t,"L",(function(){return v})),n.d(t,"N",(function(){return y})),n.d(t,"J",(function(){return O})),n.d(t,"j",(function(){return A})),n.d(t,"i",(function(){return C})),n.d(t,"v",(function(){return w})),n.d(t,"O",(function(){return j})),n.d(t,"P",(function(){return M})),n.d(t,"x",(function(){return T})),n.d(t,"f",(function(){return R})),n.d(t,"t",(function(){return E})),n.d(t,"u",(function(){return k})),n.d(t,"a",(function(){return I})),n.d(t,"z",(function(){return D})),n.d(t,"E",(function(){return B})),n.d(t,"A",(function(){return P})),n.d(t,"m",(function(){return L})),n.d(t,"q",(function(){return V})),n.d(t,"l",(function(){return N})),n.d(t,"C",(function(){return F})),n.d(t,"g",(function(){return G})),n.d(t,"e",(function(){return H})),n.d(t,"d",(function(){return x})),n.d(t,"w",(function(){return W})),n.d(t,"o",(function(){return U})),n.d(t,"b",(function(){return q}));const i="openvr.tool.steamvr_environments",o="system.generated.steam.exe",s="steam.app.250820",r="steam.app.330050",a="system.dashboard.",l=a+"quicklaunch",c=a+"quickstore",d=a+"nowplaying",u=a+"desktop",p="current.scene.app.binding.list",h="system.standalone",m="system.systemui",b="system.settings",g="valve.steam.bigpicture",S="valve.steam.desktop",_="system.vrwebhelper.controllerbinding",f="system.messageoverlay",v="system.desktop",y="system.window",O="valve.steam",A="DashboardCurvatureOrigin",C=m+"::"+A,w="/settings/steamvr/enableHomeApp",j="/settings/steamvr/supersampleManualOverride",M="/settings/steamvr/supersampleScale",T="/settings/GpuSpeed/gpuSpeedRenderTargetScale",R="/settings/camera/roomViewStyle",E="/settings/steamvr/backgroundCameraHeight",k="/settings/steamvr/backgroundDomeRadius",I="/settings/steamvr/analogGain",D="/settings/driver_lighthouse/indexHmdColumnCorrection",B="/settings/steamvr/showAdvancedSettings",P="/settings/dashboard/lastAccessedExternalOverlayKey",L="/settings/internal/dashboardInitialOverlay",V="/settings/dashboard/position_2",N="/settings/dashboard/disableAnimations",F="/settings/steamvr/overlayRenderQuality_2",G="/settings/collisionBounds/CollisionBoundsFadeDistance",H="/settings/camera/roomView",x="/settings/camera/enableCamera",W="/settings/dashboard/enableWindowView",U="/settings/dashboard/maxInlineTabs",q="binding_callouts/main"},CzjV:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var i,o=n("mrSG"),s=n("/i/y");!function(e){e[e.DashboardLoaded=0]="DashboardLoaded",e[e.DashboardLoading=1]="DashboardLoading",e[e.DashboardOpen=2]="DashboardOpen",e[e.DashboardClose=3]="DashboardClose",e[e.DashboardIdle=4]="DashboardIdle",e[e.DashboardLaunch=5]="DashboardLaunch",e[e.DashboardKill=6]="DashboardKill",e[e.DashboardFailure=7]="DashboardFailure",e[e.ControlBarButtonPress=8]="ControlBarButtonPress",e[e.ControlBarButtonRelease=9]="ControlBarButtonRelease",e[e.KeyboardClick=10]="KeyboardClick",e[e.WindowTransition=11]="WindowTransition",e[e.WindowAppear=12]="WindowAppear",e[e.WindowDisappear=13]="WindowDisappear",e[e.MajorTransition=14]="MajorTransition",e[e.Notification=15]="Notification",e[e.ButtonClick=16]="ButtonClick",e[e.Fiddle_03=17]="Fiddle_03",e[e.Fiddle_04=18]="Fiddle_04",e[e.SurfaceClick=19]="SurfaceClick",e[e.VolumePreview=20]="VolumePreview",e[e.Grab=21]="Grab",e[e.GrabRelease=22]="GrabRelease",e[e.ThemeStore=23]="ThemeStore",e[e.ThemeDesktop=24]="ThemeDesktop",e[e.ThemeLibrary=25]="ThemeLibrary",e[e.ThemeSettings=26]="ThemeSettings",e[e.ThemeNowPlaying=27]="ThemeNowPlaying",e[e.TraySlideOut=28]="TraySlideOut",e[e.TraySlideIn=29]="TraySlideIn"}(i||(i={}));class r{constructor(){this.m_mapSoundElems=new Map}static get Instance(){return r.s_Instance||(r.s_Instance=new r),r.s_Instance}preloadSounds(){if(!(Object(s.i)()!=s.H.Overlay||this.m_mapSoundElems.size>0))for(let e in i)isNaN(Number(e))||this.loadSounds(Number(e))}playSound(e){return Object(o.a)(this,void 0,void 0,(function*(){if(Object(s.i)()!=s.H.Overlay)return;if(null==e)return;const t=this.getAudioElems(e);if(!t||0==t.length)return;const n=t[Math.floor(Math.random()*t.length)];n.pause(),n.currentTime=0;try{yield n.play()}catch(t){console.error(`Failed to play sound effect "${i[e]}" (${n.src}, networkState=${n.networkState}, readyState=${n.readyState})`)}}))}loadSounds(e){const t=r.Sources[e],n=t.source;if(!n)return void this.m_mapSoundElems.set(e,[]);const i=("string"==typeof n?[n]:n).map(e=>{var n,i;let o=document.createElement("audio");return o.src=`${e}?t=${(new Date).getTime()}`,o.preload="auto",o.volume=null!=(n=t.volume)?n:1,(null==(i=t.bRespectsGlobalVolume)||i)&&(o.volume*=1),o});this.m_mapSoundElems.set(e,i)}getAudioElems(e){return this.m_mapSoundElems.has(e)||(console.warn("Playing a sound which was not preloaded. Consider calling SoundEffects.Instance.preloadSounds()."),this.loadSounds(e)),this.m_mapSoundElems.get(e)}}r.Sources={[i.DashboardLoaded]:{source:""},[i.DashboardLoading]:{source:""},[i.DashboardOpen]:{source:"",volume:.5},[i.DashboardClose]:{source:"",volume:.2},[i.DashboardIdle]:{source:""},[i.DashboardLaunch]:{source:""},[i.DashboardKill]:{source:""},[i.DashboardFailure]:{source:""},[i.ControlBarButtonPress]:{source:"",volume:1},[i.ControlBarButtonRelease]:{source:"/dashboard/sounds/activation.wav"},[i.KeyboardClick]:{source:""},[i.WindowTransition]:{source:""},[i.WindowAppear]:{source:""},[i.WindowDisappear]:{source:""},[i.MajorTransition]:{source:""},[i.Notification]:{source:""},[i.ButtonClick]:{source:"/dashboard/sounds/activation.wav"},[i.Fiddle_03]:{source:""},[i.Fiddle_04]:{source:""},[i.SurfaceClick]:{source:"/dashboard/sounds/activation_change_fail.wav"},[i.VolumePreview]:{source:"/dashboard/sounds/volume_change.wav",bRespectsGlobalVolume:!1},[i.Grab]:{source:""},[i.GrabRelease]:{source:"/dashboard/sounds/activation.wav"},[i.ThemeStore]:{source:""},[i.ThemeDesktop]:{source:""},[i.ThemeLibrary]:{source:""},[i.ThemeSettings]:{source:""},[i.ThemeNowPlaying]:{source:""},[i.TraySlideOut]:{source:""},[i.TraySlideIn]:{source:""}},r.s_Instance=null},DwIg:function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return d}));var i=n("mrSG"),o=n("q1tI"),s=n("PShe"),r=n.n(s),a=(n("Wmp0"),n("7wIv")),l=n("KgRp");n("Ut/D");class c{constructor(e,t,n,i){this.sValue=e,this.sLocalized=t,this.sRequiredLocalized=n,this.sLocalizedDescription=i}}class d extends o.Component{constructor(e){super(e),this.state={sSelectedOption:this.props.sValueSelectedItem,bVisible:!1}}componentWillMount(){null!=this.props.bShowOptionsOnStart&&this.setState({bVisible:this.props.bShowOptionsOnStart})}componentWillReceiveProps(e){null!=e.bShowOptionsOnStart&&e.bShowOptionsOnStart!=this.props.bShowOptionsOnStart&&this.setState({bVisible:e.bShowOptionsOnStart})}Show(e){this.setState({bVisible:!0}),e.stopPropagation()}Hide(e){this.setState({bVisible:!1}),e&&e.stopPropagation()}OnOptionChanged(e,t){this.setState({sSelectedOption:t}),this.props.fnOptionSelected(t),this.Hide(e)}render(){let e=this.props.vecOptions.map((e,t)=>{if("-"==e.sValue)return o.createElement("div",{key:t,className:"InlineSeparator"});if("-blank"==e.sValue)return o.createElement("div",{key:t,className:"InlineBlankSeparator"},e.sLocalized);if("-nonitem"==e.sValue)return o.createElement("div",{key:t,className:"InlineNonItemSeparator"},e.sLocalized);if("-subHeader"==e.sValue)return o.createElement("div",{key:t,className:"InlineSubHeaderSeparator"},e.sLocalized);{let n,i,s="InlineDropdownItem";return this.props.sValueSelectedItem==e.sValue&&(s+=" Selected"),null!=e.sRequiredLocalized&&(n=o.createElement("span",{className:"BindingLabelActionRequirement"},e.sRequiredLocalized)),null!=e.sLocalizedDescription&&(i=o.createElement(l.a,{content:e.sLocalizedDescription,theme:"SourceModes"},o.createElement("span",{className:"SourceModeHelp"},"?"))),o.createElement("div",{key:t,className:s,onClick:t=>{this.OnOptionChanged(t,e.sValue)}},e.sLocalized,n,i)}}),t="InlineDropdownLabel "+(null==this.props.sHeaderClass?"":this.props.sHeaderClass),n="InlineOptionsDropDownRodal "+(null==this.props.sModalClass?"":this.props.sModalClass);let i=this.props.sLocalizedSelectedItem;!i&&this.state.sSelectedOption&&this.props.vecOptions.forEach(e=>{e.sValue==this.state.sSelectedOption&&(i=e.sLocalized)});let s=this.props.bReadOnly?()=>{}:this.Show;return o.createElement("div",{className:t,onClick:s},i&&o.createElement("div",{className:this.props.sMainButtonClass},i),o.createElement(r.a,{visible:this.state.bVisible,onClose:this.Hide,customStyles:{width:"60%",height:"fit-content",maxHeight:"90%",display:"flex"},showCloseButton:!1,animation:"fade",className:n,closeOnEsc:!0},this.state.bVisible&&o.createElement("div",{className:"FlexColumn InlineDropdownModalWrapper"},this.props.sModalTitleString&&o.createElement("div",{className:"Label ModalHeader"},this.props.sModalTitleString),o.createElement("div",{className:"FlexColumn InlineDropdownItemWrapper"},e))))}}Object(i.b)([a.bind],d.prototype,"Show",null),Object(i.b)([a.bind],d.prototype,"Hide",null),Object(i.b)([a.bind],d.prototype,"OnOptionChanged",null)},GXif:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return r})),n.d(t,"b",(function(){return l}));n("q1tI");var i=n("vDqi"),o=n.n(i);class s{constructor(){this.m_mapTokens=new Map,this.m_mapFallbackTokens=new Map}InitFromObjects(e,t,n,i){this.m_mapTokens.clear();let o=[t,e,i,n];for(let e in o){let t=o[e];for(let e in t){let n=t[e];for(let e in n){let t=e.toLowerCase();this.m_mapTokens.has(t)||this.m_mapTokens.set(t,n[e])}}}}LocalizeString(e){if(!e||0==e.length||"#"!=e.charAt(0))return"";let t=this.m_mapTokens.get(e.substring(1).toLowerCase());return void 0===t?"":t}LocalizeStringFromFallback(e){if(!e||0==e.length||"#"!=e.charAt(0))return"";let t=this.m_mapFallbackTokens.get(e.substring(1).toLowerCase());return void 0===t?"":t}static GetLocale(){var e;const t=navigator.languages[0];try{const n=null===(e=VRHTML)||void 0===e?void 0:e.GetSystemLocale();if(!n)return t;s.s_Date.toLocaleTimeString(n);return n}catch(e){return t}}}function r(e,...t){let n=a.LocalizeString(e);return n?(t.length>0&&(n=n.replace(/%(\d+)\$s/g,(function(e,n){return void 0!==t[n-1]?String(t[n-1]):e}))),n):e}s.s_Date=new Date;const a=new s;function l(e,t){t||(t=function(){let e=new Map([["en","english"],["de","german"],["fr","french"],["it","italian"],["ko","korean"],["es-419","latam"],["es","spanish"],["zh-CN","schinese"],["zh-TW","tchinese"],["ru","russian"],["th","thai"],["ja","japanese"],["pt","portuguese"],["pl","polish"],["da","danish"],["nl","dutch"],["fi","finnish"],["no","norwegian"],["sv","swedish"],["hu","hungarian"],["cs","czech"],["ro","romanian"],["tr","turkish"],["pt-BR","brazilian"],["bg","bulgarian"],["el","greek"],["uk","ukranian"],["vi","vietnamese"]]);for(let t of navigator.languages){let n=t.split("-");if(e.has(t))return e.get(t);if(e.has(n[0]))return e.get(n[0])}return"english"}());let n=[],i=(e,t,n)=>{let i,s=Date.now().toString();return i="webhelper"==e?`/dashboard/localization/${e}_${t}.json?t=${s}`:`localization/${e}_${t}.json?t=${s}`,o.a.get(i).then(e=>{n(e.data)}).catch(()=>{})},s=[],r=[],l=[],c=[];for(let o of e)n.push(i(o,t,e=>{s.push(e)})),"english"!=t&&n.push(i(o,"english",e=>{l.push(e)}));for(let e of["webhelper"])n.push(i(e,t,e=>{r.push(e)})),"english"!=t&&n.push(i(e,"english",e=>{c.push(e)}));return Promise.all(n).then(()=>{a.InitFromObjects(s,r,l,c)})}window.LocalizationManager=a},GxMB:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return g})),n.d(t,"c",(function(){return S}));var i,o=n("mrSG"),s=n("q1tI"),r=n("6YgL"),a=n("hcOo"),l=n("7wIv"),c=n.n(l),d=n("2vnA"),u=n("GXif"),p=n("p9CI"),h=n("/CXA"),m=n("Vp/w");!function(e){e[e.Separator=0]="Separator"}(i||(i={}));class b extends s.Component{constructor(){super(...arguments),this.m_refView=s.createRef(),this.m_refScrollPanel=s.createRef(),this.m_refSelectedButton=s.createRef(),this.m_refParentPortal=s.createRef(),this.m_elemBoundingParent=window.document.body}renderDropdownItem(e,t){switch(typeof e){case"number":return this.renderDropdownSpecialItem(e,t);case"object":return this.renderDropdownValueItem(e)}}renderDropdownSpecialItem(e,t){switch(e){case i.Separator:return s.createElement("div",{className:"Separator",key:"separator"+t});default:return null}}renderDropdownValueItem(e){return s.createElement(r.a,{key:JSON.stringify(e.value),ref:e==this.props.selectedItem?this.m_refSelectedButton:null,className:Object(a.a)("DropdownPopoverButton",["Selected",e==this.props.selectedItem]),onClick:()=>this.setValue(e.value)},e.sLabel)}setValue(e){var t,n;this.props.onChange&&this.props.onChange(e),null===(n=(t=this.props).onDismissRequested)||void 0===n||n.call(t)}render(){return s.createElement(m.b,{ref:this.m_refParentPortal,allowableParentSelectors:["body",".SettingsMain",".DesktopHandWidget",".HMDPanel","vsg-app","vsg-mountable","[vsg-type=panel]"],onPortalDidMount:this.updateLayout},s.createElement(h.b,{ref:this.m_refView,shouldDismissOnClickAnywhere:!0,shouldDismissOnClickInViewStack:!0,fadesViewsBelow:!1,onDismissRequested:this.props.onDismissRequested,className:Object(a.a)("Dropdown","Popover")},s.createElement(p.b,{scrollDirection:p.a.Vertical,ref:this.m_refScrollPanel},this.props.items.map(this.renderDropdownItem))))}componentDidMount(){var e;this.m_elemBoundingParent=Object(a.c)(["body","[vsg-type=panel]",".SettingsSidebarPageModalContainer"],null===(e=this.m_refParentPortal.current)||void 0===e?void 0:e.anchorElement)}updateLayout(){var e,t,n,i;const o=null===(e=this.m_refView.current)||void 0===e?void 0:e.div,s=null===(t=this.m_refScrollPanel.current)||void 0===t?void 0:t.div;if(!o||!s)return;const r=null!=(i=null===(n=this.props.buttonRef.current)||void 0===n?void 0:n.elem.clientWidth)?i:0,a=this.m_elemBoundingParent.getBoundingClientRect();s.style.minWidth=r+"px",s.style.maxWidth=a.width-2*b.POPOVER_BOUNDS_MARGIN+"px",s.style.maxHeight=a.height-2*b.POPOVER_BOUNDS_MARGIN+"px";const l=this.props.buttonRef.current.elem.getBoundingClientRect();let c=l.left,d=l.top;const u=o.getBoundingClientRect(),p=this.m_elemBoundingParent.getBoundingClientRect(),h=p.left+b.POPOVER_BOUNDS_MARGIN,m=p.right-b.POPOVER_BOUNDS_MARGIN,g=p.top+b.POPOVER_BOUNDS_MARGIN,S=p.bottom-b.POPOVER_BOUNDS_MARGIN;if(this.m_refSelectedButton.current){d-=this.m_refSelectedButton.current.elem.getBoundingClientRect().top-u.top}const _=d;c<h&&(c=h),c+u.width>m&&(c=m-u.width),d<g&&(d=g),d+u.height>S&&(d=S-u.height),c=Math.round(c),d=Math.round(d),o.scrollTop=d-_,o.style.transform="translateX("+c+"px) translateY("+d+"px)"}}b.POPOVER_BOUNDS_MARGIN=10,Object(o.b)([c.a],b.prototype,"renderDropdownItem",null),Object(o.b)([c.a],b.prototype,"renderDropdownSpecialItem",null),Object(o.b)([c.a],b.prototype,"renderDropdownValueItem",null),Object(o.b)([c.a],b.prototype,"setValue",null),Object(o.b)([c.a],b.prototype,"updateLayout",null);class g extends s.Component{constructor(e){super(e),this.m_refButton=s.createRef(),this.m_scrollWatcher=new a.e,this.state={bShowingOptions:!1},this.m_scrollWatcher.onScroll=this.onParentScroll}componentWillUnmount(){this.m_scrollWatcher.cleanup()}componentDidUpdate(e,t){this.state.bShowingOptions&&!t.bShowingOptions&&this.m_scrollWatcher.updateScrollableParents()}onParentScroll(){this.hideDropdown()}get value(){return void 0!==this.props.value?this.props.value:null}get selectedItem(){const e=this.value;for(let t of this.props.items)if("object"==typeof t&&t.value==e)return t;return null}showDropdown(){this.setState({bShowingOptions:!0})}hideDropdown(){this.setState({bShowingOptions:!1})}render(){const e=this.selectedItem,t=void 0!==this.props.defaultLabel?this.props.defaultLabel:Object(u.c)("#Settings_SelectAnOption"),n=e?e.sLabel:t;return s.createElement(s.Fragment,null,s.createElement(r.a,{ref:this.m_refButton,className:"ButtonControl Dropdown",onClick:this.showDropdown,enabled:this.props.items&&(this.props.items.length>1||1==this.props.items.length&&!this.props.value),style:{pointerEvents:this.state.bShowingOptions?"none":"initial"}},s.createElement("span",{ref:this.m_scrollWatcher.ref},n)),this.state.bShowingOptions&&s.createElement(b,Object.assign({},this.props,{selectedItem:e,buttonRef:this.m_refButton,onDismissRequested:this.hideDropdown})))}}Object(o.b)([c.a],g.prototype,"onParentScroll",null),Object(o.b)([d.f],g.prototype,"value",null),Object(o.b)([d.f],g.prototype,"selectedItem",null),Object(o.b)([c.a],g.prototype,"showDropdown",null),Object(o.b)([c.a],g.prototype,"hideDropdown",null);class S extends s.Component{constructor(e){super(e),this.state={value:void 0===e.value?null:e.value}}onChange(e){this.setState({value:e}),this.props.onChange&&this.props.onChange(e)}render(){let e=Object.assign({},this.props);return e.onChange=this.onChange,e.value=this.state.value,s.createElement(g,Object.assign({},e))}}Object(o.b)([c.a],S.prototype,"onChange",null)},Ibgz:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return c}));var i,o=n("mrSG"),s=n("2vnA"),r=n("7wIv"),a=n.n(r),l=n("7uy8");!function(e){e[e.QuickStore=0]="QuickStore",e[e.QuickLaunch=1]="QuickLaunch",e[e.Unknown=2]="Unknown"}(i||(i={}));class c{constructor(){this.m_LastBPEntryPoint=i.Unknown,this.m_NextBPEntryPoint=i.Unknown,this.m_NextBPEntryPointTimeout=0}static get Instance(){return c.s_Instance||(c.s_Instance=new c),c.s_Instance}get lastBigPictureEntryPoint(){return this.m_LastBPEntryPoint}openBigPictureStore(e,t){let n=e?"open/bigpicture/store":"open/bigpicture/storefront";e&&(n+="/"+e),this.setNextEntryPoint(null!=t?t:i.Unknown),this.openSteamURL(n,{backstack_token:this.getBackstackTokenForEntryPoint(this.m_NextBPEntryPoint)})}openBigPictureLibrary(e,t){let n=e?"open/bigpicture/librarydetails":"open/bigpicture/games";e&&(n+="/"+e),this.setNextEntryPoint(null!=t?t:i.Unknown),this.openSteamURL(n,{backstack_token:this.getBackstackTokenForEntryPoint(this.m_NextBPEntryPoint)})}openBigPictureThroughLastEntryPoint(){var e;this.setNextEntryPoint(this.m_LastBPEntryPoint),null===(e=VRHTML)||void 0===e||e.VROverlay.ShowDashboard(l.H)}getBackstackTokenForEntryPoint(e){switch(e){case i.QuickStore:return l.s;case i.QuickLaunch:return l.r;case i.Unknown:return null}}latchBigPictureEntryPoint(){this.m_LastBPEntryPoint=this.m_NextBPEntryPoint}setNextEntryPoint(e){this.clearNextEntryPoint(),this.m_NextBPEntryPointTimeout=setTimeout(this.clearNextEntryPoint,1e3),this.m_NextBPEntryPoint=e}clearNextEntryPoint(){this.m_NextBPEntryPoint=i.Unknown,window.clearTimeout(this.m_NextBPEntryPointTimeout)}openSteamURL(e,t){var n;let i="";if(t){const e=Object.keys(null!=t?t:{}).filter(e=>void 0!==t[e]&&null!==t[e]).map(e=>e+"="+t[e]).join("&");e&&(i="?"+e)}const o="steam://"+e+i;console.log("Opening Steam URI: "+o),null===(n=VRHTML)||void 0===n||n.OpenURL(o)}}c.s_Instance=null,Object(o.b)([s.m],c.prototype,"m_LastBPEntryPoint",void 0),Object(o.b)([s.f],c.prototype,"lastBigPictureEntryPoint",null),Object(o.b)([s.d],c.prototype,"latchBigPictureEntryPoint",null),Object(o.b)([a.a],c.prototype,"clearNextEntryPoint",null)},Kysl:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("mrSG"),o=n("7wIv"),s=n("vDqi"),r=n.n(s),a=n("2vnA");class l{constructor(){this.m_Applications=a.m.map(),this.m_sceneApplicationStateChangedEventHandle=null}Init(){var e;return Object(i.a)(this,void 0,void 0,(function*(){this.m_sceneApplicationStateChangedEventHandle=null===(e=VRHTML)||void 0===e?void 0:e.RegisterForSceneApplicationStateChangedEvents(this.onSceneApplicationStateChanged),yield this.UpdateApplications()}))}onSceneApplicationStateChanged(){this.UpdateApplications()}SetApplicationMap(e){this.m_Applications.clear(),e.apps.forEach(e=>{this.m_Applications.set(e.key,e)})}UpdateApplications(){return Object(i.a)(this,void 0,void 0,(function*(){yield this.QueryApplications().then(e=>{this.SetApplicationMap(e)})}))}QueryApplications(){return new Promise((function(e,t){r.a.get("/app/list.json").then(t=>{e(t.data)}).catch(e=>{t(e)})}))}GetAppImageURL(e){var t,n;return"/app/image?app_key="+e+"&version="+(null!=(n=null===(t=VRHTML)||void 0===t?void 0:t.SteamVRVersion())?n:"0")}GetApp(e){return this.m_Applications.has(e)?this.m_Applications.get(e):void 0}GetRecentApps(){let e=[];return this.m_Applications.forEach(t=>{t.is_internal||e.push(t)}),e.sort((e,t)=>e.last_launch<t.last_launch?1:e.last_launch>t.last_launch?-1:e.name<t.name?1:e.name>t.name?-1:0),e}GetCurrentSceneProcess(){let e=void 0;return this.m_Applications.forEach(t=>{t.current_scene_process&&!t.is_internal&&(e=t)}),e}GetRunningApps(){let e=[];for(let t of this.m_Applications.values())t.pid&&e.push(t);return e}FindAppByPid(e){for(let t of this.m_Applications.values())if(t.pid==e)return t}IsAppAllowedPrivateInputs(e){return"openvr.component.vrcompositor"==e}ShouldShowBindingFailureForApp(e){if(null==e||""==e)return!1;if("openvr.component.vrcompositor"==e)return!0;if(null==this.GetApp(e))return!1;let t=this.GetCurrentSceneProcess();return null!=t&&t.key==e}}Object(i.b)([a.m],l.prototype,"m_Applications",void 0),Object(i.b)([o.bind],l.prototype,"onSceneApplicationStateChanged",null),Object(i.b)([a.d],l.prototype,"SetApplicationMap",null),Object(i.b)([o.bind],l.prototype,"QueryApplications",null),Object(i.b)([o.bind],l.prototype,"GetAppImageURL",null),Object(i.b)([o.bind],l.prototype,"GetApp",null),Object(i.b)([o.bind],l.prototype,"GetRecentApps",null),Object(i.b)([o.bind],l.prototype,"GetCurrentSceneProcess",null),Object(i.b)([o.bind],l.prototype,"IsAppAllowedPrivateInputs",null),Object(i.b)([o.bind],l.prototype,"ShouldShowBindingFailureForApp",null);const c=new l;window.applications=c},MYgy:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"g",(function(){return O})),n.d(t,"f",(function(){return w})),n.d(t,"d",(function(){return j})),n.d(t,"e",(function(){return M})),n.d(t,"a",(function(){return k}));var i,o,s,r=n("mrSG"),a=n("7wIv"),l=n("vDqi"),c=n.n(l),d=n("2vnA"),u=n("GXif"),p=n("/i/y"),h=n("pYJh"),m=n("Kysl"),b=n("uFkT");class g{}Object(r.b)([d.m],g.prototype,"path",void 0),Object(r.b)([d.m],g.prototype,"mode",void 0),Object(r.b)([d.m],g.prototype,"parameters",void 0),Object(r.b)([d.m],g.prototype,"inputs",void 0);class S{}Object(r.b)([d.m],S.prototype,"path",void 0),Object(r.b)([d.m],S.prototype,"output",void 0);class _{}Object(r.b)([d.m],_.prototype,"path",void 0),Object(r.b)([d.m],_.prototype,"output",void 0);class f{}Object(r.b)([d.m],f.prototype,"path",void 0),Object(r.b)([d.m],f.prototype,"output",void 0);class v{}Object(r.b)([d.m],v.prototype,"output",void 0),Object(r.b)([d.m],v.prototype,"inputs",void 0);class y{}Object(r.b)([d.m],y.prototype,"chords",void 0),Object(r.b)([d.m],y.prototype,"poses",void 0),Object(r.b)([d.m],y.prototype,"haptics",void 0),Object(r.b)([d.m],y.prototype,"sources",void 0),Object(r.b)([d.m],y.prototype,"skeleton",void 0),function(e){e[e.eButtonSide_None=0]="eButtonSide_None",e[e.eButtonSide_Left=1]="eButtonSide_Left",e[e.eButtonSide_Right=2]="eButtonSide_Right"}(i||(i={})),function(e){e.eTrackPadInvert_None="",e.eTrackPadInvert_X="x",e.eTrackPadInvert_Y="y",e.eTrackPadInvert_XY="xy"}(o||(o={}));class O{constructor(){this.vecRequired=[],this.vecSuggested=[]}}class A{}Object(r.b)([d.m],A.prototype,"device_path_string",void 0),Object(r.b)([d.m],A.prototype,"device_path_handle",void 0),Object(r.b)([d.m],A.prototype,"role",void 0),Object(r.b)([d.m],A.prototype,"controller_role",void 0);class C{}function w(e){return new Promise((function(t,n){c.a.get("/input/getactions.json?app_key="+e).then(n=>{console.log("Loaded action manifest for ",e),t(n.data)}).catch(e=>{n(e)})}))}function j(e,t,n){return Object(r.a)(this,void 0,void 0,(function*(){let i=(yield c.a.get("/input/loadbindingfromurl.json?binding_url="+encodeURI(n)+"&controller_type="+encodeURI(t)+"&app_key="+encodeURI(e))).data;if(i.success)return i;throw new Error(i.error)}))}Object(r.b)([d.m],C.prototype,"trackers",void 0),Object(r.b)([d.m],C.prototype,"valid_roles",void 0);class M{constructor(e,t){this.x=e,this.y=t,this.toString.bind(this)}toString(){return this.x+","+this.y}}class T{constructor(e,t,n,i,o){this.m_BindingUISource=void 0,this.m_ControllerProfile=void 0,this.m_sDeviceInputPath=void 0,this.m_eButtonSide=void 0,this.m_sInputPath=void 0,this.m_sActionSet=void 0,this.m_BindingStoreObserverDisposer=void 0,this.m_iNewSourceEntry=-1,this.m_sDeviceInputPath=e,this.m_ControllerProfile=t,this.m_eButtonSide=n,this.m_sInputPath=i,this.m_sActionSet=o,this.m_BindingStoreObserverDisposer=Object(d.n)(k,e=>{"m_LoadedBinding"==e.name&&this.UpdateBindingSource()}),this.UpdateBindingSource(),k.RegisterBindingWatcher(this.UpdateBindingSource.bind(this))}cancelWatcher(){this.m_BindingStoreObserverDisposer(),k.UnregisterBindingWatcher(this.UpdateBindingSource)}UpdateBindingSource(){this.m_BindingUISource=k.GetActionBinding(this.GetFullInputPath,this.m_sActionSet)}get GetFullInputPath(){let e=this.m_sDeviceInputPath+this.m_sInputPath;return e=e.replace(/([^:]\/)\/+/g,"$1"),e}GetSVGEndPoint(){return new M(this.m_ControllerProfile.input_source[this.m_sInputPath].binding_image_point[0],this.m_ControllerProfile.input_source[this.m_sInputPath].binding_image_point[1])}get GetButtonSide(){return this.m_eButtonSide}get GetNumModes(){return this.m_BindingUISource?this.m_BindingUISource.length:0}GetActionForInputType(e,t){if(this.m_BindingUISource&&this.m_BindingUISource[e].inputs&&this.m_BindingUISource[e].inputs.has(t)){let n=this.m_BindingUISource[e].inputs.get(t).output,i=k.GetActionByName(n);if(!i){let e=k.GetSimulatedActionByPath(n);e&&(i=k.CreateActionDefinitionForSimulatedAction(e))}let o=k.GetAliasInfo(n);return i&&o&&o.alias_name&&(i=Object.assign({},i),i.localized_name=o.alias_name),i}}GetClickAction(e){return this.GetActionForInputType(e,"click")}GetTouchAction(e){return this.GetActionForInputType(e,"touch")}GetPositionAction(e){return this.GetActionForInputType(e,"position")}GetHeldAction(e){return this.GetActionForInputType(e,"held")}GetLongAction(e){return this.GetActionForInputType(e,"long")}GetSingleAction(e){return this.GetActionForInputType(e,"single")}GetDoubleAction(e){return this.GetActionForInputType(e,"double")}GetNorthAction(e){return this.GetActionForInputType(e,"north")}GetEastAction(e){return this.GetActionForInputType(e,"east")}GetSouthAction(e){return this.GetActionForInputType(e,"south")}GetWestAction(e){return this.GetActionForInputType(e,"west")}GetCenterAction(e){return this.GetActionForInputType(e,"center")}GetScrollAction(e){return this.GetActionForInputType(e,"scroll")}GetPullAction(e){return this.GetActionForInputType(e,"pull")}GetForceAction(e){return this.GetActionForInputType(e,"force")}GetGrabAction(e){return this.GetActionForInputType(e,"grab")}GetValueAction(e){return this.GetActionForInputType(e,"value")}get GetControllerInputName(){return b.a.LocalizeDriverString(this.m_ControllerProfile.resource_root,this.m_sInputPath)}get GetModes(){return this.m_BindingUISource?this.m_BindingUISource:[]}GetMode(e){return this.m_BindingUISource&&e>=0&&e<this.m_BindingUISource.length?this.m_BindingUISource[e].mode:"none"}get GetInputSourceType(){return this.m_ControllerProfile.input_source[this.m_sInputPath].type}get GetInputSource(){return this.m_ControllerProfile.input_source[this.m_sInputPath]}get GetInputSourceClickSupport(){return!(this.m_ControllerProfile.input_source[this.m_sInputPath].force&&!this.m_ControllerProfile.input_source[this.m_sInputPath].click)&&(("knuckles"!=this.m_ControllerProfile.controller_type||"/input/trackpad"!=this.m_sInputPath)&&(!(!this.m_ControllerProfile.input_source[this.m_sInputPath].click&&!this.m_ControllerProfile.input_source[this.m_sInputPath].touch)&&(this.m_ControllerProfile.input_source[this.m_sInputPath].click||this.m_ControllerProfile.input_source[this.m_sInputPath].touch)))}get GetInputSourceTouchSupport(){return!(!this.m_ControllerProfile.input_source[this.m_sInputPath].touch&&!this.m_ControllerProfile.input_source[this.m_sInputPath].proximity)&&(this.m_ControllerProfile.input_source[this.m_sInputPath].touch||this.m_ControllerProfile.input_source[this.m_sInputPath].proximity)}get GetInputSourceForceSupport(){return!!this.m_ControllerProfile.input_source[this.m_sInputPath].force&&this.m_ControllerProfile.input_source[this.m_sInputPath].force}get GetInputSourceDefaultDeadzone(){return this.m_ControllerProfile.input_source[this.m_sInputPath].default_dead_zone_pct?this.m_ControllerProfile.input_source[this.m_sInputPath].default_dead_zone_pct:0}SetInputMode(e,t){!this.m_BindingUISource||t<0||t>=this.m_BindingUISource.length?console.error("SetInputMode: Invalid mode index for new mode"):(this.ClearNewModeIfSet(t),k.SetInputModeForInputSource(this.GetFullInputPath,t,e))}AddInputMode(e){this.m_iNewSourceEntry=k.AddInputModeForSource(this.GetFullInputPath,e)}DeleteInputMode(e){!this.m_BindingUISource||e<0||e>=this.m_BindingUISource.length?console.error("SetInputMode: Invalid mode index for new mode"):k.DeleteInputModeForSource(this.GetFullInputPath,e)}ClearNewModeIfSet(e){-1!=this.m_iNewSourceEntry&&this.m_iNewSourceEntry==e&&(this.m_iNewSourceEntry=-1)}BHasModeSelectionPending(e){return-1!=this.m_iNewSourceEntry&&this.m_iNewSourceEntry==e}SetClickAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"click",t,["button","trackpad","joystick","trigger","toggle_button","complex_button"])}SetTouchAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"touch",t,["button","trackpad","joystick","trigger","toggle_button","complex_button"])}SetHeldAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"held",t,["button","complex_button"])}SetLongAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"long",t,["button","complex_button"])}SetSingleAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"single",t,["button","complex_button"])}SetDoubleAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"double",t,["button","complex_button"])}SetPositionAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"position",t,["trackpad","joystick"])}SetNorthAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"north",t,["dpad","dpad_click","dpad_touch"])}SetEastAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"east",t,["dpad","dpad_click","dpad_touch"])}SetSouthAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"south",t,["dpad","dpad_click","dpad_touch"])}SetWestAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"west",t,["dpad","dpad_click","dpad_touch"])}SetCenterAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"center",t,["dpad","dpad_click","dpad_touch"])}SetScrollAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"scroll",t,["scroll"])}SetPullAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"pull",t,["trigger"])}SetForceAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"force",t,["force_sensor"])}SetGrabAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"grab",t,["grab"])}SetValueAction(e,t){k.SetActionForInputModeType(this.GetFullInputPath,e,"value",t,["scalar_constant"])}CopyActions(e){k.ClearModesForInputPath(this.GetFullInputPath),e.GetModes.map((e,t)=>{k.AddInputModeForSource(this.GetFullInputPath,e.mode),e.inputs.forEach((e,n)=>{k.SetActionForInputModeType(this.GetFullInputPath,t,n,e.output,[])})})}BindingsMatch(e){let t=e.GetModes;if(this.GetModes.length!=t.length)return!1;for(let e=0;e<t.length;e++){let n=t[e],i=this.GetModes.filter(e=>e.mode==n.mode);if(i.length>0){let e=!0;return i[0].inputs.forEach((t,i)=>{n.inputs.has(i)&&n.inputs.get(i).output==t.output||(e=!1)}),e}return!1}return!0}SetClickParameter(e,t,n){k.SetParameterForInputModeType(this.GetFullInputPath,e,"click",t,n)}SetTouchParameter(e,t,n){k.SetParameterForInputModeType(this.GetFullInputPath,e,"touch",t,n)}SetParameter(e,t,n,i){k.SetParameterForInputModeType(this.GetFullInputPath,e,t,n,i)}GetClickParameter(e,t){return k.GetParameterForInputModeType(this.GetFullInputPath,e,"click",t)}GetTouchParameter(e,t){return k.GetParameterForInputModeType(this.GetFullInputPath,e,"touch",t)}GetParameter(e,t,n){return k.GetParameterForInputModeType(this.GetFullInputPath,e,t,n)}GetTrackpadInvertState(e){switch(k.GetParameterForInputModeType(this.GetFullInputPath,e,"trackpad","invert")){case"x":return o.eTrackPadInvert_X;case"y":return o.eTrackPadInvert_Y;case"xy":return o.eTrackPadInvert_XY;default:return o.eTrackPadInvert_None}}SetTrackpadInvertState(e,t){let n="";switch(t){case o.eTrackPadInvert_X:n="x";break;case o.eTrackPadInvert_Y:n="y";break;case o.eTrackPadInvert_XY:n="xy"}k.SetParameterForInputModeType(this.GetFullInputPath,e,"trackpad","invert",n)}}Object(r.b)([d.m],T.prototype,"m_BindingUISource",void 0),Object(r.b)([d.m],T.prototype,"m_ControllerProfile",void 0),Object(r.b)([d.m],T.prototype,"m_sDeviceInputPath",void 0),Object(r.b)([d.m],T.prototype,"m_eButtonSide",void 0),Object(r.b)([d.m],T.prototype,"m_sInputPath",void 0),Object(r.b)([d.m],T.prototype,"m_sActionSet",void 0),Object(r.b)([a.bind],T.prototype,"cancelWatcher",null),Object(r.b)([d.d],T.prototype,"UpdateBindingSource",null),Object(r.b)([d.f],T.prototype,"GetFullInputPath",null),Object(r.b)([a.bind],T.prototype,"GetSVGEndPoint",null),Object(r.b)([d.f],T.prototype,"GetButtonSide",null),Object(r.b)([d.f],T.prototype,"GetNumModes",null),Object(r.b)([a.bind],T.prototype,"GetActionForInputType",null),Object(r.b)([a.bind],T.prototype,"GetClickAction",null),Object(r.b)([a.bind],T.prototype,"GetTouchAction",null),Object(r.b)([a.bind],T.prototype,"GetPositionAction",null),Object(r.b)([a.bind],T.prototype,"GetHeldAction",null),Object(r.b)([a.bind],T.prototype,"GetLongAction",null),Object(r.b)([a.bind],T.prototype,"GetSingleAction",null),Object(r.b)([a.bind],T.prototype,"GetDoubleAction",null),Object(r.b)([a.bind],T.prototype,"GetNorthAction",null),Object(r.b)([a.bind],T.prototype,"GetEastAction",null),Object(r.b)([a.bind],T.prototype,"GetSouthAction",null),Object(r.b)([a.bind],T.prototype,"GetWestAction",null),Object(r.b)([a.bind],T.prototype,"GetCenterAction",null),Object(r.b)([a.bind],T.prototype,"GetScrollAction",null),Object(r.b)([a.bind],T.prototype,"GetPullAction",null),Object(r.b)([a.bind],T.prototype,"GetForceAction",null),Object(r.b)([a.bind],T.prototype,"GetGrabAction",null),Object(r.b)([a.bind],T.prototype,"GetValueAction",null),Object(r.b)([d.f],T.prototype,"GetControllerInputName",null),Object(r.b)([d.f],T.prototype,"GetModes",null),Object(r.b)([a.bind],T.prototype,"GetMode",null),Object(r.b)([d.f],T.prototype,"GetInputSourceType",null),Object(r.b)([d.f],T.prototype,"GetInputSource",null),Object(r.b)([d.f],T.prototype,"GetInputSourceClickSupport",null),Object(r.b)([d.f],T.prototype,"GetInputSourceTouchSupport",null),Object(r.b)([d.f],T.prototype,"GetInputSourceForceSupport",null),Object(r.b)([d.f],T.prototype,"GetInputSourceDefaultDeadzone",null),Object(r.b)([d.d],T.prototype,"SetInputMode",null),Object(r.b)([d.d],T.prototype,"AddInputMode",null),Object(r.b)([d.d],T.prototype,"DeleteInputMode",null),Object(r.b)([a.bind],T.prototype,"ClearNewModeIfSet",null),Object(r.b)([a.bind],T.prototype,"BHasModeSelectionPending",null),Object(r.b)([d.d],T.prototype,"SetClickAction",null),Object(r.b)([d.d],T.prototype,"SetTouchAction",null),Object(r.b)([d.d],T.prototype,"SetHeldAction",null),Object(r.b)([d.d],T.prototype,"SetLongAction",null),Object(r.b)([d.d],T.prototype,"SetSingleAction",null),Object(r.b)([d.d],T.prototype,"SetDoubleAction",null),Object(r.b)([d.d],T.prototype,"SetPositionAction",null),Object(r.b)([d.d],T.prototype,"SetNorthAction",null),Object(r.b)([d.d],T.prototype,"SetEastAction",null),Object(r.b)([d.d],T.prototype,"SetSouthAction",null),Object(r.b)([d.d],T.prototype,"SetWestAction",null),Object(r.b)([d.d],T.prototype,"SetCenterAction",null),Object(r.b)([d.d],T.prototype,"SetScrollAction",null),Object(r.b)([d.d],T.prototype,"SetPullAction",null),Object(r.b)([d.d],T.prototype,"SetForceAction",null),Object(r.b)([d.d],T.prototype,"SetGrabAction",null),Object(r.b)([d.d],T.prototype,"SetValueAction",null),Object(r.b)([d.d],T.prototype,"CopyActions",null),Object(r.b)([a.bind],T.prototype,"BindingsMatch",null),Object(r.b)([d.d],T.prototype,"SetClickParameter",null),Object(r.b)([d.d],T.prototype,"SetTouchParameter",null),Object(r.b)([d.d],T.prototype,"SetParameter",null),Object(r.b)([d.d],T.prototype,"GetClickParameter",null),Object(r.b)([d.d],T.prototype,"GetTouchParameter",null),Object(r.b)([d.d],T.prototype,"GetParameter",null),Object(r.b)([a.bind],T.prototype,"GetTrackpadInvertState",null),Object(r.b)([d.d],T.prototype,"SetTrackpadInvertState",null);class R{constructor(e,t,n){this.m_sSaveType=e,this.m_OutstandingSaveBindingResolve=t,this.m_OutstandingSaveBindingReject=n}resolve(e){this.m_OutstandingSaveBindingResolve(e)}reject(e){this.m_OutstandingSaveBindingReject(e)}get SaveType(){return this.m_sSaveType}}Object(r.b)([a.bind],R.prototype,"resolve",null),Object(r.b)([a.bind],R.prototype,"reject",null),function(e){e[e.eWebSocketState_Unknown=0]="eWebSocketState_Unknown",e[e.eWebSocketState_Disconnected=1]="eWebSocketState_Disconnected",e[e.eWebSocketState_Connecting=2]="eWebSocketState_Connecting",e[e.eWebSocketState_Connected=3]="eWebSocketState_Connected"}(s||(s={}));class E{constructor(){this.m_wsWebSocketToServer=void 0,this.m_eWebSocketState=s.eWebSocketState_Unknown,this.m_timerWebSocket=void 0,this.m_dateStartTime=new Date,this.m_sLoadedBindingURI=void 0,this.m_LoadedBinding=void 0,this.m_ModifiedBindingSet=d.m.map(),this.m_ModifiedOptions=d.m.map(),this.m_ModifiedAliases=d.m.map(),this.m_sName=void 0,this.m_sDescription=void 0,this.m_SelectedApp=void 0,this.m_SelectedAppActions=void 0,this.m_sSelectedActionSet=void 0,this.m_sSelectedControllerType=void 0,this.m_TrackerBindingSetup=void 0,this.m_bControllerTypeSelectedByUser=!1,this.m_OutstandingSaveBindingCalls=[],this.m_vecBindingSetWatchers=Array(),this.m_mapUnoundActions=new Map,this.m_bIsMissingRequiredActions=!1,this.m_rKnownFailedBindingUris=[],this.m_ControllerWatchers=new Map,this.m_ModifiedSimulatedActions=d.m.map(),this.m_nNextSimulatedActionId=1,this.m_nBindingSubscriptionChangedCanary=1}OpenWebSocketToHost(){return new Promise((e,t)=>{this.m_eWebSocketState!=s.eWebSocketState_Connecting&&this.m_eWebSocketState!=s.eWebSocketState_Connected&&(this.m_wsWebSocketToServer&&delete this.m_wsWebSocketToServer,this.m_wsWebSocketToServer=new WebSocket("ws://"+window.location.host),this.m_wsWebSocketToServer.addEventListener("open",t=>{this.OnWebSocketOpen(t),e()}),this.m_wsWebSocketToServer.addEventListener("message",e=>{this.OnWebSocketMessage(e)}),this.m_wsWebSocketToServer.addEventListener("close",e=>{this.OnWebSocketClose(e)}),this.m_eWebSocketState=s.eWebSocketState_Connecting),this.m_timerWebSocket||(this.m_timerWebSocket=window.setTimeout(this.OpenWebSocketToHost,1e3))})}Init(){return Object(r.a)(this,void 0,void 0,(function*(){yield this.OpenWebSocketToHost(),yield this.RefreshInputState()}))}CountDevicesWithControllerType(e){let t=0;return b.a.ConnectedDevices.forEach(n=>{n.controller_type==e&&t++}),t}ComputeControllerTypeScore(e){var t,n;let i=this.CountDevicesWithControllerType(e.controller_type),o=((null===(t=p.mb)||void 0===t?void 0:t.HasHMD())?null===(n=p.mb)||void 0===n?void 0:n.VRProperties.GetStringProperty("/user/head",p.y.Prop_ExpectedControllerType_String):void 0)==e.controller_type?2:1;return 1e3*(999-e.priority)+10*i+o}GetBestControllerType(){let e,t=0;return b.a.ControllerTypes.forEach(n=>{let i=this.ComputeControllerTypeScore(n);i>t&&(e=n,t=i)}),e}RefreshInputState(){return Object(r.a)(this,void 0,void 0,(function*(){let e=b.a.KnownControllerTypes.size;return b.a.GetInputState().then(()=>{this.m_SelectedApp&&e!=b.a.KnownControllerTypes.size&&this.ReloadCurrentApp();let t=!1;const n=this.GetBestControllerType();let i=b.a.FindDeviceClassForControllerType(this.m_sSelectedControllerType);if(null!=n&&this.m_sSelectedControllerType!=n.controller_type&&!this.m_bControllerTypeSelectedByUser){let e=b.a.FindDeviceClassForControllerType(n.controller_type);h.a.IsSafeToResetControllerType(i,e)&&(this.m_sSelectedControllerType=n.controller_type,t=!0,null!=i&&h.a.RefreshBindingList())}return t?this.ReloadControllerConfiguration():null})}))}get SteamVRUnavailable(){return this.m_eWebSocketState==s.eWebSocketState_Connecting||this.m_eWebSocketState==s.eWebSocketState_Unknown?Date.now()-this.m_dateStartTime.getTime()>1e4:this.m_eWebSocketState!=s.eWebSocketState_Connected}get ActionSets(){if(null==this.m_SelectedAppActions||null==this.m_SelectedAppActions.action_sets)return[];let e=[];return this.m_SelectedAppActions.action_sets.forEach(t=>{if("hidden"!=t.usage){let n=!0;t.required_options&&t.required_options.forEach(e=>{this.GetOptionValue(e)||(n=!1)});let i=!1;t.forbidden_options&&t.forbidden_options.forEach(e=>{this.GetOptionValue(e)&&(i=!0)}),n&&!i&&e.push(t)}}),e}get ManifestOptions(){return null==this.m_SelectedAppActions||null==this.m_SelectedAppActions.action_sets||null==this.m_SelectedAppActions.options?[]:this.m_SelectedAppActions.options}get SecondaryControllerOptions(){return[{name:"returnBindingsWithLeftHand",localized_name:Object(u.c)("#SecondaryController_ReturnWithLeftHand"),type:"bool",default:!1},{name:"returnBindingsWithRightHand",localized_name:Object(u.c)("#SecondaryController_ReturnWithRightHand"),type:"bool",default:!1},{name:"returnBindingsWithHead",localized_name:Object(u.c)("#SecondaryController_ReturnWithHead"),type:"bool",default:!1}]}GetOptionDefault(e){let t=!1;return this.ManifestOptions.forEach(n=>{n.name==e&&(t=n.default)}),t}GetOptionValue(e){return this.m_ModifiedOptions.has(e)?this.m_ModifiedOptions.get(e):void 0}SetOptionValue(e,t){this.m_ModifiedOptions.set(e,t),this.NotifyWatchersOfChange()}GetAliasInfo(e){return this.m_ModifiedAliases.has(e)?this.m_ModifiedAliases.get(e):null}SetAliasName(e,t){if(this.m_ModifiedAliases.has(e)){let n=this.m_ModifiedAliases.get(e);n.alias_name=t,this.m_ModifiedAliases.set(e,n),this.NotifyWatchersOfChange()}else{let n={alias_name:t,hidden:!1};this.m_ModifiedAliases.set(e,n),this.NotifyWatchersOfChange()}}SetAliasHidden(e,t){if(this.m_ModifiedAliases.has(e)){let n=this.m_ModifiedAliases.get(e);n.hidden=t,this.m_ModifiedAliases.set(e,n),this.NotifyWatchersOfChange()}else{let n={alias_name:"",hidden:t};this.m_ModifiedAliases.set(e,n),this.NotifyWatchersOfChange()}}ComputeSimulatedActionPathFromId(e){return"/simactions/"+e}GetSimulatedActionByPath(e){return this.m_ModifiedSimulatedActions.has(e)?this.m_ModifiedSimulatedActions.get(e):void 0}SetSimulatedActionByPath(e,t){this.m_ModifiedSimulatedActions.set(e,t),this.NotifyWatchersOfChange()}AddSimulatedAction(e){let t={name:"",type:e,id:this.m_nNextSimulatedActionId++,output:""},n=this.ComputeSimulatedActionPathFromId(t.id);this.m_ModifiedSimulatedActions.set(n,t),this.NotifyWatchersOfChange()}DeleteSimulatedActionByPath(e){this.m_ModifiedSimulatedActions.delete(e),this.NotifyWatchersOfChange()}get SimulatedActions(){return Array.from(this.m_ModifiedSimulatedActions.values())}get SelectedApp(){return this.m_SelectedApp?this.m_SelectedApp.key:void 0}get SelectedAppActions(){return this.m_SelectedAppActions}get CurrentAppCanAccessPrivateInputs(){return m.a.IsAppAllowedPrivateInputs(this.m_SelectedApp.key)||b.a.ShouldSendSystemButtonToAllApps}get SelectedControllerTypeInfo(){if(b.a.IsValid&&null!=this.m_sSelectedControllerType)return b.a.GetControllerTypeInfo(this.m_sSelectedControllerType)}DeviceForControllerType(e,t){let n=b.a.GetControllerTypeInfo(e);if(!n)return;let o=!1,s=b.a.ConnectedDevices.find(s=>{if(s.controller_type==e){if(o=!0,!t)return!0;if("controller_handed"!=n.input_bindingui_mode)return!0;let e=t==i.eButtonSide_Left?"/left":"/right";if(s.root_path&&s.root_path.indexOf(e)>=0)return!0}return!1});return s||(o?b.a.ConnectedDevices.find(t=>t.controller_type==e):void 0)}get CurrentBindingSaveType(){if(null!=this.m_LoadedBinding)return"developer"==this.m_LoadedBinding.save_type&&k.SelectedBindingIsLegacy?"developer_legacy":this.m_LoadedBinding.save_type}get CurrentBindingActionManifestVersion(){return this.m_LoadedBinding&&this.m_LoadedBinding.binding_config&&this.m_LoadedBinding.binding_config.action_manifest_version?this.m_LoadedBinding.binding_config.action_manifest_version:0}get SelectedActionSet(){return this.m_sSelectedActionSet}get SelectedActionSetDetails(){if(null!=this.m_SelectedAppActions&&null!=this.m_sSelectedActionSet)return this.m_SelectedAppActions.action_sets.find(e=>e.name==this.m_sSelectedActionSet)}get SelectedActionSetActions(){return this.GetActionSetActions(this.m_sSelectedActionSet)}GetSelectedAppDefaultBinding(e){if(null!=this.m_SelectedAppActions)return this.m_SelectedAppActions.default_bindings&&this.m_SelectedAppActions.default_bindings.hasOwnProperty(e)?this.m_SelectedAppActions.default_bindings[e]:void 0}GetActionSetActions(e){if(null==this.m_SelectedAppActions||null==e)return[];let t=this.m_SelectedAppActions.action_sets.find(t=>t.name==e);return t?t.actions:[]}GetActionByName(e){if(null==this.m_SelectedApp||!this.m_SelectedAppActions.action_sets)return;let t=e.toLowerCase(),n=void 0;return this.m_SelectedAppActions.action_sets.forEach(e=>{if(!e.actions)return;let i=e.actions.find(e=>e.name.toLowerCase()==t);i&&(n=i)}),n}get UnboundActions(){this.m_bIsMissingRequiredActions=!1;for(let e of this.ActionSets){let t=[],n=[];if(!e.actions)break;for(let i of e.actions)if("optional"!=i.requirement&&!this.IsActionBound(e,i.name)){let e=this.GetAliasInfo(i.name);if(e){if(e.hidden)continue;e.alias_name&&(i=Object.assign({},i),i.localized_name=e.alias_name)}"mandatory"==i.requirement?t.push(i):n.push(i)}if(t.length>0&&(this.m_bIsMissingRequiredActions=!0),this.m_mapUnoundActions.has(e.name)){let i=this.m_mapUnoundActions.get(e.name);i.vecRequired=t,i.vecSuggested=n}else this.m_mapUnoundActions.set(e.name,{vecRequired:t,vecSuggested:n})}let e=this.SelectedControllerTypeInfo;return e&&"TrackedDeviceClass_HMD"==e.device_class&&(this.m_bIsMissingRequiredActions=!1),this.IsSecondaryController&&(this.m_bIsMissingRequiredActions=!1),this.m_mapUnoundActions}get HasUnboundActions(){return this.UnboundActions,this.m_bIsMissingRequiredActions}IsActionBound(e,t){t=t.toLowerCase();let n=this.GetActionSetSources(e.name);if(n)for(let e of n){let n=!1;if(e.inputs.forEach(e=>{e.output.toLowerCase()==t&&(n=!0)}),n)return!0}let i=this.GetActionSetChords(e.name);if(i)for(let e of i)if(e.output&&e.output.toLowerCase()==t)return!0;let o=this.GetActionSetPoses(e.name);if(o)for(let e of o)if(e.output&&e.output.toLowerCase()==t)return!0;let s=this.GetActionSetHaptics(e.name);if(s)for(let e of s)if(e.output&&e.output.toLowerCase()==t)return!0;let r=this.GetActionSetSkeleton(e.name);if(r)for(let e of r)if(e.output&&e.output.toLowerCase()==t)return!0;return!1}GetActionSetPoses(e){return this.m_ModifiedBindingSet.has(e)?this.m_ModifiedBindingSet.get(e).poses:[]}get SelectedActionSetPoses(){return this.GetActionSetPoses(this.m_sSelectedActionSet)}GetActionSetHaptics(e){return this.m_ModifiedBindingSet.has(e)?this.m_ModifiedBindingSet.get(e).haptics:[]}get SelectedActionSetHaptics(){return this.GetActionSetHaptics(this.m_sSelectedActionSet)}GetActionSetSkeleton(e){return this.m_ModifiedBindingSet.has(e)?this.m_ModifiedBindingSet.get(e).skeleton:[]}get SelectedActionSetSkeletons(){return this.GetActionSetSkeleton(this.m_sSelectedActionSet)}GetActionSetChords(e){return this.m_ModifiedBindingSet.has(e)?this.m_ModifiedBindingSet.get(e).chords:[]}get SelectedActionSetChords(){return this.GetActionSetChords(this.m_sSelectedActionSet)}get SelectedActionSetChordCount(){let e=this.SelectedActionSetChords;return e?e.length:0}GetActionSetSources(e){if(null==this.m_ModifiedBindingSet||null==e)return;let t=this.m_ModifiedBindingSet;return t.has(e)?t.get(e).sources:void 0}get SelectedActionSetSources(){return this.GetActionSetSources(this.m_sSelectedActionSet)}get BSelectedActionSetHasPoses(){return null!=this.m_LoadedBinding&&null!=this.m_sSelectedActionSet&&null!=this.SelectedActionSetActions&&this.SelectedActionSetActions.filter(e=>"pose"==e.type).length>0}get BSelectedActionSetHasBoundPoses(){if(!this.BSelectedActionSetHasPoses||!this.SelectedActionSetPoses||null==this.SelectedActionSetActions)return!1;for(let e of this.SelectedActionSetPoses)if(e.output&&"none"!=e.output)return!0;return!1}get BSelectedActionSetHasHaptics(){return null!=this.m_LoadedBinding&&null!=this.m_sSelectedActionSet&&null!=this.SelectedActionSetActions&&this.SelectedActionSetActions.filter(e=>"vibration"==e.type).length>0}get BSelectedActionSetHasBoundHaptics(){if(!this.BSelectedActionSetHasHaptics||!this.SelectedActionSetHaptics||null==this.SelectedActionSetActions)return!1;for(let e of this.SelectedActionSetHaptics)if(e.output&&"none"!=e.output)return!0;return!1}get BSelectedActionSetHasSkeletons(){if(null==this.m_LoadedBinding||null==this.m_sSelectedActionSet||null==this.SelectedActionSetActions)return!1;if(0==this.SelectedActionSetActions.filter(e=>"skeleton"==e.type).length)return!1;return null!=this.SelectedControllerTypeInfo&&!!this.GetFirstInputSourceOfType("skeleton")}get BSelectedActionSetHasBoundSkeletons(){if(!this.BSelectedActionSetHasSkeletons||!this.SelectedActionSetSkeletons||null==this.SelectedActionSetActions)return!1;for(let e of this.SelectedActionSetSkeletons)if(e.output&&"none"!=e.output)return!0;return!1}SetSelectedApp(e,t){if(null==this.m_SelectedApp||e!=this.m_SelectedApp.key){this.m_rKnownFailedBindingUris=[],this.m_ControllerWatchers.clear();let n=m.a.GetApp(e);n&&(this.m_SelectedApp=n,t||this.ReloadCurrentApp())}}ReloadCurrentApp(){return Object(r.a)(this,void 0,void 0,(function*(){this.m_sLoadedBindingURI=void 0,this.m_sSelectedActionSet=void 0,yield this.LoadActionManifest();let e=this.ActionSets;e.length>0&&(null==this.m_sSelectedActionSet||!this.m_SelectedAppActions.action_sets.hasOwnProperty(this.m_sSelectedActionSet))&&(this.m_sSelectedActionSet=e[0].name),yield this.ReloadControllerConfiguration()}))}SetSelectedController(e,t){if(e!=this.m_sSelectedControllerType){let n=b.a.GetControllerTypeInfo(e);n&&(this.m_ControllerWatchers.clear(),this.m_sSelectedControllerType=n.controller_type,this.m_bControllerTypeSelectedByUser=!0,this.m_sLoadedBindingURI=void 0,t||this.ReloadControllerConfiguration())}}SetSelectedActionSet(e){e!=this.m_sSelectedActionSet&&(this.m_sSelectedActionSet=e)}LocalizeStringForSelectedControllerType(e){let t=this.SelectedControllerTypeInfo;return t&&t.resource_root?b.a.LocalizeDriverString(t.resource_root,e):e}LocalizePathNameForSelectedControllerType(e){let t=void 0;return["/user/hand/secondary","/user/hand/primary","/user/hand/left","/user/hand/right","/user/head"].forEach(n=>{0!=e.indexOf(n)||(t=n)}),t?Object(u.c)("#"+t)+" "+this.LocalizeStringForSelectedControllerType(e.replace(t,"")):e}get SelectedControllerTypeLocalizedName(){let e=this.SelectedControllerTypeInfo;return e?e.resource_root?b.a.LocalizeDriverString(e.resource_root,e.controller_type):e.controller_type:""}RegisterBindingWatcher(e){null==this.m_vecBindingSetWatchers.find(t=>t==e)&&this.m_vecBindingSetWatchers.push(e)}UnregisterBindingWatcher(e){let t=this.m_vecBindingSetWatchers.indexOf(e);t>=0&&this.m_vecBindingSetWatchers.splice(t,1)}GetActionBinding(e,t){if(null==this.m_ModifiedBindingSet)return;let n=this.m_ModifiedBindingSet;if(n.has(t)){let i=n.get(t).sources;if(i){let t=i.filter(t=>t.path==e);if(t)return t}}}GetInputModesForSourceType(e,t){let n=[];switch(e){case"button":n=["button","-","toggle_button
